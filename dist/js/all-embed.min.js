/**
 * @license
 * Video.js 5.20.5 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojs=t()}}(function(){var t;return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r||t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(2),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.mouseused_=!1,a.on("mousedown",a.handleMouseDown),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-big-play-button"},e.prototype.handleClick=function(t){var e=this.player_.play();if(!(this.mouseused_&&t.clientX&&t.clientY)){var r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n)return void this.player_.focus();var i=function(){return n.focus()};if(e&&e.then){var o=function(){};e.then(i,o)}else this.setTimeout(i,1)}},e.prototype.handleKeyPress=function(e){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,e)},e.prototype.handleMouseDown=function(t){this.mouseused_=!0},e}(l.default);d.prototype.controlText_="Play Video",c.default.registerComponent("BigPlayButton",d),r.default=d},{2:2,5:5}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(3),l=n(s),u=t(5),c=n(u),d=t(86),h=n(d),f=t(88),p=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=(0,f.assign)({className:this.buildCSSClass()},e),"button"!==t&&(h.default.warn("Creating a Button with an HTML element of "+t+" is deprecated; use ClickableComponent instead."),e=(0,f.assign)({tabIndex:0},e),r=(0,f.assign)({role:"button"},r)),r=(0,f.assign)({type:"button","aria-live":"polite"},r);var n=c.default.prototype.createEl.call(this,t,e,r);return this.createControlTextEl(n),n},e.prototype.addChild=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.constructor.name;return h.default.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),c.default.prototype.addChild.call(this,t,e)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(l.default);c.default.registerComponent("Button",p),r.default=p},{3:3,5:5,86:86,88:88}],3:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(5),u=i(l),c=t(81),d=n(c),h=t(82),f=n(h),p=t(83),y=n(p),v=t(86),g=i(v),m=t(94),b=i(m),_=t(88),T=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n));return i.emitTapEvents(),i.enable(),i}return s(e,t),e.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=(0,_.assign)({className:this.buildCSSClass(),tabIndex:0},r),"button"===e&&g.default.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=(0,_.assign)({role:"button","aria-live":"polite"},n),this.tabIndex_=r.tabIndex;var i=t.prototype.createEl.call(this,e,r,n);return this.createControlTextEl(i),i},e.prototype.createControlTextEl=function(t){return this.controlTextEl_=d.createEl("span",{className:"vjs-control-text"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},e.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===t)return this.controlText_||"Need Text";var r=this.localize(t);return this.controlText_=t,this.controlTextEl_.innerHTML=r,this.nonIconControl||e.setAttribute("title",r),this},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},e.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},e.prototype.handleClick=function(t){},e.prototype.handleFocus=function(t){f.on(b.default,"keydown",y.bind(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleClick(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e.prototype.handleBlur=function(t){f.off(b.default,"keydown",y.bind(this,this.handleKeyPress))},e}(u.default);u.default.registerComponent("ClickableComponent",T),r.default=T},{5:5,81:81,82:82,83:83,86:86,88:88,94:94}],4:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(2),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.controlText(n&&n.controlText||a.localize("Close")),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},e}(l.default);c.default.registerComponent("CloseButton",d),r.default=d},{2:2,5:5}],5:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t(95),s=i(a),l=t(81),u=n(l),c=t(83),d=n(c),h=t(85),f=n(h),p=t(82),y=n(p),v=t(86),g=i(v),m=t(91),b=i(m),_=t(87),T=i(_),E=function(){function t(e,r,n){if(o(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=(0,T.default)({},this.options_),r=this.options_=(0,T.default)(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+f.newGUID()}this.name_=r.name||null,r.el?this.el_=r.el:!1!==r.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==r.initChildren&&this.initChildren(),this.ready(n),!1!==r.reportTouchActivity&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),u.removeElData(this.el_),this.el_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(t){return g.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t?(this.options_=(0,T.default)(this.options_,t),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(t,e,r){return u.createEl(t,e,r)},t.prototype.localize=function(t){var e=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages();if(!e||!r)return t;var n=r[e];if(n&&n[t])return n[t];var i=e.split("-")[0],o=r[i];return o&&o[t]?o[t]:t},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(t){return this.childIndex_[t]},t.prototype.getChild=function(t){if(t)return t=(0,b.default)(t),this.childNameIndex_[t]},t.prototype.addChild=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,o=void 0;if("string"==typeof e){o=(0,b.default)(e),r||(r={}),!0===r&&(g.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),r={});var a=r.componentClass||o;r.name=o;var s=t.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,r)}else i=e;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&(0,b.default)(i.name()),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var l=this.contentEl().children,u=l[n]||null;this.contentEl().insertBefore(i.el(),u)}return i},t.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===t){e=!0,this.children_.splice(r,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.prototype.initChildren=function(){var e=this,r=this.options_.children;if(r){var n=this.options_,i=function(t){var r=t.name,i=t.opts;if(void 0!==n[r]&&(i=n[r]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var o=e.addChild(r,i);o&&(e[r]=o)}},o=void 0,a=t.getComponent("Tech");o=Array.isArray(r)?r:Object.keys(r),o.concat(Object.keys(this.options_).filter(function(t){return!o.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var n=void 0,i=void 0;return"string"==typeof t?(n=t,i=r[n]||e.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}}).filter(function(e){var r=t.getComponent(e.opts.componentClass||(0,b.default)(e.name));return r&&!a.isTech(r)}).forEach(i)}},t.prototype.buildCSSClass=function(){return""},t.prototype.on=function(t,e,r){var n=this;if("string"==typeof t||Array.isArray(t))y.on(this.el_,t,d.bind(this,e));else{var i=t,o=e,a=d.bind(this,r),s=function(){return n.off(i,o,a)};s.guid=a.guid,this.on("dispose",s);var l=function(){return n.off("dispose",s)};l.guid=a.guid,t.nodeName?(y.on(i,o,a),y.on(i,"dispose",l)):"function"==typeof t.on&&(i.on(o,a),i.on("dispose",l))}return this},t.prototype.off=function(t,e,r){if(!t||"string"==typeof t||Array.isArray(t))y.off(this.el_,t,e);else{var n=t,i=e,o=d.bind(this,r);this.off("dispose",o),t.nodeName?(y.off(n,i,o),y.off(n,"dispose",o)):(n.off(i,o),n.off("dispose",o))}return this},t.prototype.one=function(t,e,r){var n=this,i=arguments;if("string"==typeof t||Array.isArray(t))y.one(this.el_,t,d.bind(this,e));else{var o=t,a=e,s=d.bind(this,r),l=function t(){n.off(o,a,t),s.apply(null,i)};l.guid=s.guid,this.on(o,a,l)}return this},t.prototype.trigger=function(t,e){return y.trigger(this.el_,t,e),this},t.prototype.ready=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(this.isReady_?e?t.call(this):this.setTimeout(t,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t))),this},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(t,e){return u.$(t,e||this.contentEl())},t.prototype.$$=function(t,e){return u.$$(t,e||this.contentEl())},t.prototype.hasClass=function(t){return u.hasElClass(this.el_,t)},t.prototype.addClass=function(t){return u.addElClass(this.el_,t),this},t.prototype.removeClass=function(t){return u.removeElClass(this.el_,t),this},t.prototype.toggleClass=function(t,e){return u.toggleElClass(this.el_,t,e),this},t.prototype.show=function(){return this.removeClass("vjs-hidden"),this},t.prototype.hide=function(){return this.addClass("vjs-hidden"),this},t.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},t.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},t.prototype.getAttribute=function(t){return u.getAttribute(this.el_,t)},t.prototype.setAttribute=function(t,e){return u.setAttribute(this.el_,t,e),this},t.prototype.removeAttribute=function(t){return u.removeAttribute(this.el_,t),this},t.prototype.width=function(t,e){return this.dimension("width",t,e)},t.prototype.height=function(t,e){return this.dimension("height",t,e)},t.prototype.dimensions=function(t,e){return this.width(t,!0).height(e)},t.prototype.dimension=function(t,e,r){if(void 0!==e)return null!==e&&e===e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",r||this.trigger("resize"),this;if(!this.el_)return 0;var n=this.el_.style[t],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+(0,b.default)(t)],10)},t.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s.default.getComputedStyle){var r=s.default.getComputedStyle(this.el_);e=r.getPropertyValue(t)||r[t]}if(0===(e=parseFloat(e))){var n="offset"+(0,b.default)(t);e=this.el_[n]}return e},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.focus=function(){this.el_.focus()},t.prototype.blur=function(){this.el_.blur()},t.prototype.emitTapEvents=function(){var t=0,e=null,r=void 0;this.on("touchstart",function(n){1===n.touches.length&&(e={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=(new Date).getTime(),r=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)r=!1;else if(e){var n=t.touches[0].pageX-e.pageX,i=t.touches[0].pageY-e.pageY,o=Math.sqrt(n*n+i*i);o>10&&(r=!1)}});var n=function(){r=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(n){e=null,!0===r&&(new Date).getTime()-t<200&&(n.preventDefault(),this.trigger("tap"))})},t.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=d.bind(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var r=function(r){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}},t.prototype.setTimeout=function(t,e){t=d.bind(this,t);var r=s.default.setTimeout(t,e),n=function(){this.clearTimeout(r)};return n.guid="vjs-timeout-"+r,this.on("dispose",n),r},t.prototype.clearTimeout=function(t){s.default.clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.prototype.setInterval=function(t,e){t=d.bind(this,t);var r=s.default.setInterval(t,e),n=function(){this.clearInterval(r)};return n.guid="vjs-interval-"+r,this.on("dispose",n),r},t.prototype.clearInterval=function(t){s.default.clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.registerComponent=function(e,r){if(e){if(e=(0,b.default)(e),t.components_||(t.components_={}),"Player"===e&&t.components_[e]){var n=t.components_[e];if(n.players&&Object.keys(n.players).length>0&&Object.keys(n.players).map(function(t){return n.players[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return t.components_[e]=r,r}},t.getComponent=function(e){if(e)return e=(0,b.default)(e),t.components_&&t.components_[e]?t.components_[e]:s.default&&s.default.videojs&&s.default.videojs[e]?(g.default.warn("The "+e+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s.default.videojs[e]):void 0},t.extend=function(e){e=e||{},g.default.warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var r=e.init||e.init||this.prototype.init||this.prototype.init||function(){},n=function(){r.apply(this,arguments)};n.prototype=Object.create(this.prototype),n.prototype.constructor=n,n.extend=t.extend;for(var i in e)e.hasOwnProperty(i)&&(n.prototype[i]=e[i]);return n},t}();E.registerComponent("Component",E),r.default=E},{81:81,82:82,83:83,85:85,86:86,87:87,91:91,95:95}],6:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(36),l=n(s),u=t(5),c=n(u),d=t(7),h=n(d),f=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),n.tracks=r.audioTracks&&r.audioTracks();var a=o(this,t.call(this,r,n));return a.el_.setAttribute("aria-label","Audio Menu"),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;var e=this.player_.audioTracks&&this.player_.audioTracks();if(!e)return t;for(var r=0;r<e.length;r++){var n=e[r];t.push(new h.default(this.player_,{track:n,selectable:!0}))}return t},e}(l.default);f.prototype.controlText_="Audio Track",c.default.registerComponent("AudioTrackButton",f),r.default=f},{36:36,5:5,7:7}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(48),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=function(t){function e(r,n){i(this,e);var a=n.track,s=r.audioTracks();n.label=a.label||a.language||"Unknown",n.selected=a.enabled;var l=o(this,t.call(this,r,n));if(l.track=a,s){var u=h.bind(l,l.handleTracksChange);s.addEventListener("change",u),l.on("dispose",function(){s.removeEventListener("change",u)})}return l}return a(e,t),e.prototype.handleClick=function(e){var r=this.player_.audioTracks();if(t.prototype.handleClick.call(this,e),r)for(var n=0;n<r.length;n++){var i=r[n];i.enabled=i===this.track}},e.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(l.default);c.default.registerComponent("AudioTrackMenuItem",f),r.default=f},{48:48,5:5,83:83}],8:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a);t(12),t(32),t(33),t(35),t(34),t(10),t(18),t(9),t(38),t(40),t(11),t(25),t(27),t(29),t(24),t(6),t(13),t(21);var l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},e}(s.default);l.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},s.default.registerComponent("ControlBar",l),r.default=l},{10:10,11:11,12:12,13:13,18:18,21:21,24:24,25:25,27:27,29:29,32:32,33:33,34:34,35:35,38:38,40:40,5:5,6:6,9:9}],9:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(2),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"fullscreenchange",a.handleFullscreenChange),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(l.default);d.prototype.controlText_="Fullscreen",c.default.registerComponent("FullscreenToggle",d),r.default=d},{2:2,5:5}],10:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=t(81),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=function(t){function e(r,o){n(this,e);var a=i(this,t.call(this,r,o));return a.updateShowing(),a.on(a.player(),"durationchange",a.updateShowing),a}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=u.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(s.default);s.default.registerComponent("LiveDisplay",c),r.default=c},{5:5,81:81}],11:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(2),l=n(s),u=t(5),c=n(u),d=t(81),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"volumechange",a.update),r.tech_&&!1===r.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(r,"loadstart",function(){this.update(),!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.player_.muted(!this.player_.muted())},e.prototype.update=function(t){var e=this.player_.volume(),r=3;this.player_.muted()?r=0:e<.33?r=1:e<.67&&(r=2);var n=this.player_.muted()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n);for(var i=0;i<4;i++)h.removeElClass(this.el_,"vjs-vol-"+i);h.addElClass(this.el_,"vjs-vol-"+r)},e}(l.default);f.prototype.controlText_="Mute",c.default.registerComponent("MuteToggle",f),r.default=f},{2:2,5:5,81:81}],12:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(2),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"play",a.handlePlay),a.on(r,"pause",a.handlePause),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handlePlay=function(t){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e}(l.default);d.prototype.controlText_="Play",c.default.registerComponent("PlayToggle",d),r.default=d},{2:2,5:5}],13:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(47),l=n(s),u=t(49),c=n(u),d=t(14),h=n(d),f=t(5),p=n(f),y=t(81),v=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(y),g=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.updateVisibility(),a.updateLabel(),a.on(r,"loadstart",a.updateVisibility),a.on(r,"ratechange",a.updateLabel),a}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=v.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),e.appendChild(this.labelEl_),e},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.createMenu=function(){
var t=new c.default(this.player()),e=this.playbackRates();if(e)for(var r=e.length-1;r>=0;r--)t.addChild(new h.default(this.player(),{rate:e[r]+"x"}));return t},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(t){for(var e=this.player().playbackRate(),r=this.playbackRates(),n=r[0],i=0;i<r.length;i++)if(r[i]>e){n=r[i];break}this.player().playbackRate(n)},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(l.default);g.prototype.controlText_="Playback Rate",p.default.registerComponent("PlaybackRateMenuButton",g),r.default=g},{14:14,47:47,49:49,5:5,81:81}],14:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(48),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e);var a=n.rate,s=parseFloat(a,10);n.label=a,n.selected=1===s,n.selectable=!0;var l=o(this,t.call(this,r,n));return l.label=a,l.rate=s,l.on(r,"ratechange",l.update),l}return a(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.prototype.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(l.default);d.prototype.contentElType="button",c.default.registerComponent("PlaybackRateMenuItem",d),r.default=d},{48:48,5:5}],15:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=t(81),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=function(t){function e(r,o){n(this,e);var a=i(this,t.call(this,r,o));return a.partEls_=[],a.on(r,"progress",a.update),a}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.update=function(t){var e=this.player_.buffered(),r=this.player_.duration(),n=this.player_.bufferedEnd(),i=this.partEls_,o=function(t,e){var r=t/e||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=o(n,r);for(var a=0;a<e.length;a++){var s=e.start(a),l=e.end(a),c=i[a];c||(c=this.el_.appendChild(u.createEl()),i[a]=c),c.style.left=o(s,n),c.style.width=o(l-s,n)}for(var d=i.length;d>e.length;d--)this.el_.removeChild(i[d-1]);i.length=e.length},e}(s.default);s.default.registerComponent("LoadProgressBar",c),r.default=c},{5:5,81:81}],16:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(5),u=i(l),c=t(81),d=n(c),h=t(83),f=n(h),p=t(84),y=i(p),v=t(80),g=i(v),m=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n));return n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),i.keepTooltipsInside&&(i.tooltip=d.createEl("div",{className:"vjs-time-tooltip"}),i.el().appendChild(i.tooltip),i.addClass("vjs-keep-tooltips-inside")),i.update(0,0),r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",f.throttle(f.bind(i,i.handleMouseMove),25))}),i}return s(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.handleMouseMove=function(t){var e=this.player_.duration(),r=this.calculateDistance(t)*e,n=t.pageX-d.findElPosition(this.el().parentNode).left;this.update(r,n)},e.prototype.update=function(t,e){var r=(0,y.default)(t,this.player_.duration());if(this.el().style.left=e+"px",this.el().setAttribute("data-current-time",r),this.keepTooltipsInside){var n=this.clampPosition_(e),i=e-n+1,o=parseFloat((0,g.default)(this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=r,this.tooltip.style.right="-"+(a-i)+"px"}},e.prototype.calculateDistance=function(t){return d.getPointerPosition(this.el().parentNode,t).x},e.prototype.clampPosition_=function(t){if(!this.keepTooltipsInside)return t;var e=parseFloat((0,g.default)(this.player().el(),"width")),r=parseFloat((0,g.default)(this.tooltip,"width")),n=r/2,i=t;return t<n?i=Math.ceil(n):t>e-n&&(i=Math.floor(e-n)),i},e}(u.default);u.default.registerComponent("MouseTimeDisplay",m),r.default=m},{5:5,80:80,81:81,83:83,84:84}],17:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(83),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(84),h=n(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.updateDataAttr(),a.on(r,"timeupdate",a.updateDataAttr),r.ready(c.bind(a,a.updateDataAttr)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&a.addClass("vjs-keep-tooltips-inside"),a}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.updateDataAttr=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,h.default)(e,this.player_.duration()))},e}(l.default);l.default.registerComponent("PlayProgressBar",f),r.default=f},{5:5,83:83,84:84}],18:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a);t(19),t(16);var l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e}(s.default);l.prototype.options_={children:["seekBar"]},s.default.registerComponent("ProgressControl",l),r.default=l},{16:16,19:19,5:5}],19:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(57),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=t(84),p=n(f),y=t(80),v=n(y);t(15),t(17),t(20);var g=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"timeupdate",a.updateProgress),a.on(r,"ended",a.updateProgress),r.ready(h.bind(a,a.updateProgress)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&(a.tooltipProgressBar=a.addChild("TooltipProgressBar")),a}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},e.prototype.updateProgress=function(t){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var e=parseFloat((0,v.default)(this.player().el(),"width")),r=parseFloat((0,v.default)(this.tooltipProgressBar.tooltip,"width")),n=this.tooltipProgressBar.el().style;n.maxWidth=Math.floor(e-r/2)+"px",n.minWidth=Math.ceil(r/2)+"px",n.right="-"+r/2+"px"}},e.prototype.updateAriaAttributes=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();t.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),t.setAttribute("aria-valuetext",(0,p.default)(e,this.player_.duration()))},e.prototype.getPercent=function(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t},e.prototype.handleMouseDown=function(e){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e)},e.prototype.handleMouseMove=function(t){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)},e.prototype.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},e.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e}(l.default);g.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},g.prototype.playerEvent="timeupdate",c.default.registerComponent("SeekBar",g),r.default=g},{15:15,17:17,20:20,5:5,57:57,80:80,83:83,84:84}],20:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(83),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(84),h=n(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.updateDataAttr(),a.on(r,"timeupdate",a.updateDataAttr),r.ready(c.bind(a,a.updateDataAttr)),a}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=e.querySelector(".vjs-time-tooltip"),e},e.prototype.updateDataAttr=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),r=(0,h.default)(e,this.player_.duration());this.el_.setAttribute("data-current-time",r),this.tooltip.innerHTML=r},e}(l.default);l.default.registerComponent("TooltipProgressBar",f),r.default=f},{5:5,83:83,84:84}],21:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(22),l=n(s),u=t(5),c=n(u),d=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="&nbsp;",e},e}(l.default);c.default.registerComponent("CustomControlSpacer",d),r.default=d},{22:22,5:5}],22:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(s.default);s.default.registerComponent("Spacer",l),r.default=l},{5:5}],23:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(31),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e),n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1;var a=o(this,t.call(this,r,n));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+n.kind+" settings dialog"),a}return a(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},e}(l.default);c.default.registerComponent("CaptionSettingsMenuItem",d),r.default=d},{31:31,5:5}],24:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(30),l=n(s),u=t(5),c=n(u),d=t(23),h=n(d),f=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(e.push(new h.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(l.default);f.prototype.kind_="captions",f.prototype.controlText_="Captions",c.default.registerComponent("CaptionsButton",f),r.default=f},{23:23,30:30,5:5}],25:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(30),l=n(s),u=t(5),c=n(u),d=t(26),h=n(d),f=t(91),p=n(f),y=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},e.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},e.prototype.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_)}}},e.prototype.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var r=t[e];if(r.kind===this.kind_)return r}},e.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,p.default)(this.kind_))},e.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},e.prototype.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var r=0,n=e.length;r<n;r++){var i=e[r],o=new h.default(this.player_,{track:this.track_,cue:i});t.push(o)}return t},e}(l.default);y.prototype.kind_="chapters",y.prototype.controlText_="Chapters",c.default.registerComponent("ChaptersButton",y),r.default=y},{26:26,30:30,5:5,91:91}],26:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(48),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=function(t){function e(r,n){i(this,e);var a=n.track,s=n.cue,l=r.currentTime();n.selectable=!0,n.label=s.text,n.selected=s.startTime<=l&&l<s.endTime;var u=o(this,t.call(this,r,n));return u.track=a,u.cue=s,a.addEventListener("cuechange",h.bind(u,u.update)),u}return a(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.prototype.update=function(t){var e=this.cue,r=this.player_.currentTime();this.selected(e.startTime<=r&&r<e.endTime)},e}(l.default);c.default.registerComponent("ChaptersTrackMenuItem",f),r.default=f},{48:48,5:5,83:83}],27:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(30),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));s.el_.setAttribute("aria-label","Descriptions Menu");var l=r.textTracks();if(l){var u=h.bind(s,s.handleTracksChange);l.addEventListener("change",u),s.on("dispose",function(){l.removeEventListener("change",u)})}return s}return a(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!1,n=0,i=e.length;n<i;n++){var o=e[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},e.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},e}(l.default);f.prototype.kind_="descriptions",f.prototype.controlText_="Descriptions",c.default.registerComponent("DescriptionsButton",f),r.default=f},{30:30,5:5,83:83}],28:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(31),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n){i(this,e),n.track={player:r,kind:n.kind,label:n.kind+" off",default:!1,mode:"disabled"},n.selectable=!0;var a=o(this,t.call(this,r,n));return a.selected(!0),a}return a(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!0,n=0,i=e.length;n<i;n++){var o=e[n];if(o.kind===this.track.kind&&"showing"===o.mode){r=!1;break}}this.selected(r)},e}(l.default);c.default.registerComponent("OffTextTrackMenuItem",d),r.default=d},{31:31,5:5}],29:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(30),l=n(s),u=t(5),c=n(u),d=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},e}(l.default);d.prototype.kind_="subtitles",d.prototype.controlText_="Subtitles",c.default.registerComponent("SubtitlesButton",d),r.default=d},{30:30,5:5}],30:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(36),l=n(s),u=t(5),c=n(u),d=t(31),h=n(d),f=t(28),p=n(f),y=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,e),n.tracks=r.textTracks(),o(this,t.call(this,r,n))}return a(e,t),e.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.push(new p.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1;var e=this.player_.textTracks();if(!e)return t;for(var r=0;r<e.length;r++){var n=e[r];n.kind===this.kind_&&t.push(new h.default(this.player_,{track:n,selectable:!0}))}return t},e}(l.default);c.default.registerComponent("TextTrackButton",y),r.default=y},{28:28,31:31,36:36,5:5}],31:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=t(48),u=n(l),c=t(5),d=n(c),h=t(83),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),p=t(95),y=n(p),v=t(94),g=n(v),m=function(t){function e(r,n){i(this,e);var a=n.track,l=r.textTracks();n.label=a.label||a.language||"Unknown",n.selected=a.default||"showing"===a.mode;var u=o(this,t.call(this,r,n));if(u.track=a,l){var c=f.bind(u,u.handleTracksChange);r.on(["loadstart","texttrackchange"],c),l.addEventListener("change",c),u.on("dispose",function(){l.removeEventListener("change",c)})}if(l&&void 0===l.onchange){var d=void 0;u.on(["tap","click"],function(){if("object"!==s(y.default.Event))try{d=new y.default.Event("change")}catch(t){}d||(d=g.default.createEvent("Event"),d.initEvent("change",!0,!0)),l.dispatchEvent(d)})}return u}return a(e,t),e.prototype.handleClick=function(e){var r=this.track.kind,n=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),n)for(var i=0;i<n.length;i++){var o=n[i];o.kind===r&&(o===this.track?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},e.prototype.handleTracksChange=function(t){this.selected("showing"===this.track.mode)},e}(u.default);d.default.registerComponent("TextTrackMenuItem",m),r.default=m},{48:48,5:5,83:83,94:94,95:95}],32:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(81),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(84),h=n(d),f=function(t){function e(r,n){i(this,e);
var a=o(this,t.call(this,r,n));return a.on(r,"timeupdate",a.updateContent),a}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),r=this.localize("Current Time"),n=(0,h.default)(e,this.player_.duration());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n)},e}(l.default);l.default.registerComponent("CurrentTimeDisplay",f),r.default=f},{5:5,81:81,84:84}],33:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(81),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(84),h=n(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"durationchange",a.updateContent),a.on(r,"timeupdate",a.updateContent),a.on(r,"loadedmetadata",a.updateContent),a}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(t){var e=this.player_.duration();if(e&&this.duration_!==e){this.duration_=e;var r=this.localize("Duration Time"),n=(0,h.default)(e);this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n}},e}(l.default);l.default.registerComponent("DurationDisplay",f),r.default=f},{5:5,81:81,84:84}],34:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(81),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(84),h=n(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"timeupdate",a.updateContent),a.on(r,"durationchange",a.updateContent),a}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(t){if(this.player_.duration()){var e=this.localize("Remaining Time"),r=(0,h.default)(this.player_.remainingTime());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> -"+r)}},e}(l.default);l.default.registerComponent("RemainingTimeDisplay",f),r.default=f},{5:5,81:81,84:84}],35:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(s.default);s.default.registerComponent("TimeDivider",l),r.default=l},{5:5}],36:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(47),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=function(t){function e(r,n){i(this,e);var a=n.tracks,s=o(this,t.call(this,r,n));if(s.items.length<=1&&s.hide(),!a)return o(s);var l=h.bind(s,s.update);return a.addEventListener("removetrack",l),a.addEventListener("addtrack",l),s.player_.on("dispose",function(){a.removeEventListener("removetrack",l),a.removeEventListener("addtrack",l)}),s}return a(e,t),e}(l.default);c.default.registerComponent("TrackButton",f),r.default=f},{47:47,5:5,83:83}],37:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(57),l=n(s),u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d);t(39);var f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"volumechange",a.updateARIAAttributes),r.ready(h.bind(a,a.updateARIAAttributes)),a}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},e.prototype.handleMouseMove=function(t){this.checkMuted(),this.player_.volume(this.calculateDistance(t))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(t){var e=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},e}(l.default);f.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},f.prototype.playerEvent="volumechange",c.default.registerComponent("VolumeBar",f),r.default=f},{39:39,5:5,57:57,83:83}],38:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a);t(37);var l=function(t){function e(r,o){n(this,e);var a=i(this,t.call(this,r,o));return r.tech_&&!1===r.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(r,"loadstart",function(){!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},e}(s.default);l.prototype.options_={children:["volumeBar"]},s.default.registerComponent("VolumeControl",l),r.default=l},{37:37,5:5}],39:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(s.default);s.default.registerComponent("VolumeLevel",l),r.default=l},{5:5}],40:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(83),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),u=t(5),c=n(u),d=t(54),h=n(d),f=t(53),p=n(f),y=t(11),v=n(y),g=t(37),m=n(g),b=function(t){function e(r){function n(){r.tech_&&!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),void 0===a.inline&&(a.inline=!0),void 0===a.vertical&&(a.inline?a.vertical=!1:a.vertical=!0),a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=!!a.vertical;var s=o(this,t.call(this,r,a));return s.on(r,"volumechange",s.volumeUpdate),s.on(r,"loadstart",s.volumeUpdate),n.call(s),s.on(r,"loadstart",n),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return a(e,t),e.prototype.buildCSSClass=function(){var e="";return e=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+t.prototype.buildCSSClass.call(this)+" "+e},e.prototype.createPopup=function(){var t=new h.default(this.player_,{contentElType:"div"}),e=new m.default(this.player_,this.options_.volumeBar);return t.addChild(e),this.menuContent=t,this.volumeBar=e,this.attachVolumeBarEvents(),t},e.prototype.handleClick=function(e){v.default.prototype.handleClick.call(this),t.prototype.handleClick.call(this)},e.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],l.bind(this,this.handleMouseDown))},e.prototype.handleMouseDown=function(t){this.on(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},e.prototype.handleMouseUp=function(t){this.off(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove))},e}(p.default);b.prototype.volumeUpdate=v.default.prototype.update,b.prototype.controlText_="Mute",c.default.registerComponent("VolumeMenuButton",b),r.default=b},{11:11,37:37,5:5,53:53,54:54,83:83}],41:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(50),c=n(u),d=t(87),h=n(d),f=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.on(r,"error",a.open),a}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},e.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(c.default);f.prototype.options_=(0,h.default)(c.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),l.default.registerComponent("ErrorDisplay",f),r.default=f},{5:5,50:50,87:87}],42:[function(t,e,r){"use strict";r.__esModule=!0;var n=t(82),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=function(){};o.prototype.allowedEvents_={},o.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},i.on(this,t,e),this.addEventListener=r},o.prototype.addEventListener=o.prototype.on,o.prototype.off=function(t,e){i.off(this,t,e)},o.prototype.removeEventListener=o.prototype.off,o.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},i.one(this,t,e),this.addEventListener=r},o.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=i.fixEvent(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),i.trigger(this,t)},o.prototype.dispatchEvent=o.prototype.trigger,r.default=o},{82:82}],43:[function(t,e,r){"use strict";r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=t(86),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=t(88),s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){t.apply(this,arguments)},n={};(0,a.isObject)(e)?("function"==typeof e.init&&(o.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),e.constructor=e.init),e.constructor!==Object.prototype.constructor&&(r=e.constructor),n=e):"function"==typeof e&&(r=e),s(r,t);for(var i in n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r};r.default=l},{86:86,88:88}],44:[function(t,e,r){"use strict";r.__esModule=!0;for(var n=t(94),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o={},a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=a[0],l=void 0,u=0;u<a.length;u++)if(a[u][1]in i.default){l=a[u];break}if(l)for(var c=0;c<l.length;c++)o[s[c]]=l[c];r.default=o},{94:94}],45:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},e}(s.default);s.default.registerComponent("LoadingSpinner",l),r.default=l},{5:5}],46:[function(t,e,r){"use strict";function n(t){return t instanceof n?t:("number"==typeof t?this.code=t:"string"==typeof t?this.message=t:(0,i.isObject)(t)&&("number"==typeof t.code&&(this.code=t.code),(0,i.assign)(this,t)),void(this.message||(this.message=n.defaultMessages[this.code]||"")))}r.__esModule=!0;var i=t(88);n.prototype.code=0,n.prototype.message="",n.prototype.status=null,n.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],n.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<n.errorTypes.length;o++)n[n.errorTypes[o]]=o,n.prototype[n.errorTypes[o]]=o;r.default=n},{88:88}],47:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(3),u=i(l),c=t(5),d=i(c),h=t(49),f=i(h),p=t(81),y=n(p),v=t(83),g=n(v),m=t(91),b=i(m),_=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=a(this,t.call(this,r,n));return i.update(),i.enabled_=!0,i.el_.setAttribute("aria-haspopup","true"),i.el_.setAttribute("role","menuitem"),i.on("keydown",i.handleSubmenuKeyPress),i}return s(e,t),e.prototype.update=function(){var t=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.prototype.createMenu=function(){var t=new f.default(this.player_);if(this.hideThreshold_=0,this.options_.title){var e=y.createEl("li",{className:"vjs-menu-title",innerHTML:(0,b.default)(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),y.insertElFirst(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",g.bind(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault()):38===e.which||40===e.which?this.buttonPressed_||(this.pressButton(),e.preventDefault()):t.prototype.handleKeyPress.call(this,e)},e.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault())},e.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},e.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,t.prototype.disable.call(this)},e.prototype.enable=function(){return this.enabled_=!0,t.prototype.enable.call(this)},e}(u.default);d.default.registerComponent("MenuButton",_),r.default=_},{3:3,49:49,5:5,81:81,83:83,91:91}],48:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(3),l=n(s),u=t(5),c=n(u),d=t(88),h=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.selectable=n.selectable,a.selected(n.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return a(e,t),e.prototype.createEl=function(e,r,n){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",(0,d.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},r),n)},e.prototype.handleClick=function(t){this.selected(!0)},e.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},e}(l.default);c.default.registerComponent("MenuItem",h),r.default=h},{3:3,5:5,88:88}],49:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=t(81),c=n(u),d=t(83),h=n(d),f=t(82),p=n(f),y=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.focusedChild_=-1,a.on("keydown",a.handleKeyPress),a}return a(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",h.bind(this,function(t){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=c.createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.setAttribute("role","presentation"),r.appendChild(this.contentEl_),p.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.prototype.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(l.default);l.default.registerComponent("Menu",y),r.default=y},{5:5,81:81,82:82,83:83}],50:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(81),l=n(s),u=t(83),c=n(u),d=t(5),h=function(t){return t&&t.__esModule?t:{default:t}}(d),f="vjs-modal-dialog",p=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));return a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=l.createEl("div",{className:f+"-content"},{role:"document"}),a.descEl_=l.createEl("p",{className:f+"-description vjs-offscreen",id:a.el().getAttribute("aria-describedby")}),l.textContent(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.prototype.buildCSSClass=function(){return f+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},e.prototype.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},e.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},e.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),t.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},e.prototype.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},e.prototype.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close)}!e&&r&&(this.off(r,"close",this.close),this.removeChild(r),r.dispose())}return this.closeable_},e.prototype.fill=function(){return this.fillWith(this.content())},e.prototype.fillWith=function(t){var e=this.contentEl(),r=e.parentNode,n=e.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(e),this.empty(),l.insertContent(e,t),this.trigger("modalfill"),n?r.insertBefore(e,n):r.appendChild(e),this},e.prototype.empty=function(){return this.trigger("beforemodalempty"),l.emptyEl(this.contentEl()),this.trigger("modalempty"),this},e.prototype.content=function(t){return void 0!==t&&(this.content_=t),this.content_},e}(h.default);p.prototype.options_={pauseOnOpen:!0,temporary:!0},h.default.registerComponent("ModalDialog",p),
r.default=p},{5:5,81:81,83:83}],51:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(5),u=i(l),c=t(94),d=i(c),h=t(95),f=i(h),p=t(82),y=n(p),v=t(81),g=n(v),m=t(83),b=n(m),_=t(85),T=n(_),E=t(78),w=n(E),S=t(86),k=i(S),C=t(91),A=i(C),O=t(90),R=t(79),L=t(89),P=n(L),D=t(44),x=i(D),I=t(46),M=i(I),j=t(97),N=i(j),F=t(88),B=t(87),U=i(B),G=t(69),H=i(G),V=t(50),W=i(V),K=t(62),z=i(K),q=t(63),Y=i(q),X=t(76),$=i(X);t(61),t(59),t(55),t(68),t(45),t(1),t(4),t(8),t(41),t(71),t(60);var J=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],Q=function(t){function e(r,n,i){if(o(this,e),r.id=r.id||"vjs_video_"+T.newGUID(),n=(0,F.assign)(e.getTagSettings(r),n),n.initChildren=!1,n.createEl=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof r.closest){var s=r.closest("[lang]");s&&(n.language=s.getAttribute("lang"))}else for(var l=r;l&&1===l.nodeType;){if(g.getElAttributes(l).hasOwnProperty("lang")){n.language=l.getAttribute("lang");break}l=l.parentNode}var u=a(this,t.call(this,null,n,i));if(!u.options_||!u.options_.techOrder||!u.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(u.tag=r,u.tagAttributes=r&&g.getElAttributes(r),u.language(u.options_.language),n.languages){var c={};Object.getOwnPropertyNames(n.languages).forEach(function(t){c[t.toLowerCase()]=n.languages[t]}),u.languages_=c}else u.languages_=e.prototype.options_.languages;u.cache_={},u.poster_=n.poster||"",u.controls_=!!n.controls,r.controls=!1,u.scrubbing_=!1,u.el_=u.createEl();var d=(0,U.default)(u.options_);if(n.plugins){var h=n.plugins;Object.getOwnPropertyNames(h).forEach(function(t){"function"==typeof this[t]?this[t](h[t]):k.default.error("Unable to find plugin:",t)},u)}u.options_.playerOptions=d,u.initChildren(),u.isAudio("audio"===r.nodeName.toLowerCase()),u.controls()?u.addClass("vjs-controls-enabled"):u.addClass("vjs-controls-disabled"),u.el_.setAttribute("role","region"),u.isAudio()?u.el_.setAttribute("aria-label","audio player"):u.el_.setAttribute("aria-label","video player"),u.isAudio()&&u.addClass("vjs-audio"),u.flexNotSupported_()&&u.addClass("vjs-no-flex"),w.IS_IOS||u.addClass("vjs-workinghover"),e.players[u.id_]=u;var f="5.20.5".split(".")[0];return u.addClass("vjs-v"+f),u.userActive(!0),u.reportUserActivity(),u.listenForUserActivity_(),u.on("fullscreenchange",u.handleFullscreenChange_),u.on("stageclick",u.handleStageClick_),u}return s(e,t),e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var e=this.tag,r=void 0,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");r=this.el_=n?e.parentNode:t.prototype.createEl.call(this,"div"),e.setAttribute("tabindex","-1"),e.removeAttribute("width"),e.removeAttribute("height");var i=g.getElAttributes(e);if(Object.getOwnPropertyNames(i).forEach(function(t){"class"===t?r.className+=" "+i[t]:r.setAttribute(t,i[t])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=r.player=this,this.addClass("vjs-paused"),!0!==f.default.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=P.createStyleElement("vjs-styles-dimensions");var o=g.$(".vjs-styles-defaults"),a=g.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=e.getElementsByTagName("a"),l=0;l<s.length;l++){var u=s.item(l);g.addElClass(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(r,e),g.insertElFirst(e,r),this.children_.unshift(e),this.el_=r,r},e.prototype.width=function(t){return this.dimension("width",t)},e.prototype.height=function(t){return this.dimension("height",t)},e.prototype.dimension=function(t,e){var r=t+"_";if(void 0===e)return this[r]||0;if(""===e)this[r]=void 0;else{var n=parseFloat(e);if(isNaN(n))return k.default.error('Improper value "'+e+'" supplied for for '+t),this;this[r]=n}return this.updateStyleEl_(),this},e.prototype.fluid=function(t){return void 0===t?!!this.fluid_:(this.fluid_=!!t,t?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_(),void 0)},e.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(!0===f.default.VIDEOJS_NO_DYNAMIC_STYLE){var t="number"==typeof this.width_?this.width_:this.options_.width,e="number"==typeof this.height_?this.height_:this.options_.height,r=this.tech_&&this.tech_.el();return void(r&&(t>=0&&(r.width=t),e>=0&&(r.height=e)))}var n=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),l=s[1]/s[0];n=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,i=void 0!==this.height_?this.height_:n*l,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),P.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+n+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")},e.prototype.loadTech_=function(t,e){var r=this;this.tech_&&this.unloadTech_(),"Html5"!==t&&this.tag&&(z.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=t,this.isReady_=!1;var n=(0,F.assign)({source:e,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+t+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);this.tag&&(n.tag=this.tag),e&&(this.currentType_=e.type,e.src===this.cache_.src&&this.cache_.currentTime>0&&(n.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src);var i=z.default.getTech(t);i||(i=u.default.getComponent(t)),this.tech_=new i(n),this.tech_.ready(b.bind(this,this.handleTechReady_),!0),H.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),J.forEach(function(t){r.on(r.tech_,t,r["handleTech"+(0,A.default)(t)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===t&&this.tag||g.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=H.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},e.prototype.tech=function(t){if(t&&t.IWillNotUseThisInPlugins)return this.tech_;var e="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw f.default.alert(e),new Error(e)},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(t){(0,k.default)("deleting tag.poster throws in some browsers",t)}this.play()}},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},e.prototype.hasStarted=function(t){return void 0!==t?(this.hasStarted_!==t&&(this.hasStarted_=t,t?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(k.default.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(t){0===t.button&&this.controls()&&(this.paused()?this.play():this.pause())},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},e.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t)},e.prototype.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(t,e){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[t](e)},!0);else try{this.tech_&&this.tech_[t](e)}catch(t){throw(0,k.default)(t),t}},e.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[t]()}catch(e){throw void 0===this.tech_[t]?(0,k.default)("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?((0,k.default)("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):(0,k.default)(e),e}},e.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},e.prototype.pause=function(){return this.techCall_("pause"),this},e.prototype.paused=function(){return!1!==this.techGet_("paused")},e.prototype.scrubbing=function(t){return void 0!==t?(this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},e.prototype.currentTime=function(t){return void 0!==t?(this.techCall_("setCurrentTime",t),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.prototype.duration=function(t){return void 0===t?void 0!==this.cache_.duration?this.cache_.duration:NaN:(t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=(0,O.createTimeRange)(0,0)),t},e.prototype.bufferedPercent=function(){return(0,R.bufferedPercent)(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),r=t.end(t.length-1);return r>e&&(r=e),r},e.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),this):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},e.prototype.muted=function(t){return void 0!==t?(this.techCall_("setMuted",t),this):this.techGet_("muted")||!1},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(t){return void 0!==t?(this.isFullscreen_=!!t,this):!!this.isFullscreen_},e.prototype.requestFullscreen=function(){var t=x.default;return this.isFullscreen(!0),t.requestFullscreen?(y.on(d.default,t.fullscreenchange,b.bind(this,function e(r){this.isFullscreen(d.default[t.fullscreenElement]),!1===this.isFullscreen()&&y.off(d.default,t.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.exitFullscreen=function(){var t=x.default;return this.isFullscreen(!1),t.requestFullscreen?d.default[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d.default.documentElement.style.overflow,y.on(d.default,"keydown",b.bind(this,this.fullWindowOnEscKey)),d.default.documentElement.style.overflow="hidden",g.addElClass(d.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,y.off(d.default,"keydown",this.fullWindowOnEscKey),d.default.documentElement.style.overflow=this.docOrigOverflow,g.removeElClass(d.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(t){for(var e=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=(0,A.default)(n[r]),o=z.default.getTech(i);if(o||(o=u.default.getComponent(i)),o){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else k.default.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.prototype.selectSource=function(t){var e=this,r=this.options_.techOrder.map(A.default).map(function(t){return[t,z.default.getTech(t)||u.default.getComponent(t)]}).filter(function(t){var e=t[0],r=t[1];return r?r.isSupported():(k.default.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(t,e,r){var n=void 0;return t.some(function(t){return e.some(function(e){if(n=r(t,e))return!0})}),n},i=function(t,r){var n=t[0];if(t[1].canPlaySource(r,e.options_[n.toLowerCase()]))return{source:r,tech:n}};return(this.options_.sourceOrder?n(t,r,function(t){return function(e,r){return t(r,e)}}(i)):n(r,t,i))||!1},e.prototype.src=function(t){if(void 0===t)return this.techGet_("src");var e=z.default.getTech(this.techName_);return e||(e=u.default.getComponent(this.techName_)),Array.isArray(t)?this.sourceList_(t):"string"==typeof t?this.src({src:t}):t instanceof Object&&(t.type&&!e.canPlaySource(t,this.options_[this.techName_.toLowerCase()])?this.sourceList_([t]):(this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src,this.currentType_=t.type||"",this.ready(function(){e.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},e.prototype.sourceList_=function(t){var e=this.selectSource(t);e?(e.tech===this.techName_?this.src(e.source):this.loadTech_(e.tech,e.source),this.cache_.sources=t):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},e.prototype.load=function(){return this.techCall_("load"),this},e.prototype.reset=function(){return this.loadTech_((0,A.default)(this.options_.techOrder[0]),null),this.techCall_("reset"),this},e.prototype.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},e.prototype.currentSource=function(){var t={},e=this.currentSrc();return e&&(t.src=e),this.cache_.source||t},e.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},e.prototype.currentType=function(){return this.currentType_||""},e.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),this.options_.preload=t,this):this.techGet_("preload")},e.prototype.autoplay=function(t){return void 0!==t?(this.techCall_("setAutoplay",t),this.options_.autoplay=t,this):this.techGet_("autoplay",t)},e.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},e.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),this.options_.loop=t,this):this.techGet_("loop")},e.prototype.poster=function(t){return void 0===t?this.poster_:(t||(t=""),this.poster_=t,this.techCall_("setPoster",t),this.trigger("posterchange"),this)},e.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},e.prototype.controls=function(t){return void 0!==t?(t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},e.prototype.usingNativeControls=function(t){return void 0!==t?(t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,t?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},e.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new M.default(t),this.addClass("vjs-error"),k.default.error("(CODE:"+this.error_.code+" "+M.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},e.prototype.reportUserActivity=function(t){this.userActivity_=!0},e.prototype.userActive=function(t){return void 0!==t?(t=!!t,t!==this.userActive_&&(this.userActive_=t,t?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},e.prototype.listenForUserActivity_=function(){var t=void 0,e=void 0,r=void 0,n=b.bind(this,this.reportUserActivity),i=function(t){t.screenX===e&&t.screenY===r||(e=t.screenX,r=t.screenY,n())},o=function(){n(),this.clearInterval(t),t=this.setInterval(n,250)},a=function(e){n(),this.clearInterval(t)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",n),this.on("keyup",n);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},e.prototype.playbackRate=function(t){return void 0!==t?(this.techCall_("setPlaybackRate",t),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},e.prototype.isAudio=function(t){return void 0!==t?(this.isAudio_=!!t,this):!!this.isAudio_},e.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new $.default,this.videoTracks_)},e.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new Y.default,this.audioTracks_)},e.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},e.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},e.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},e.prototype.addTextTrack=function(t,e,r){if(this.tech_)return this.tech_.addTextTrack(t,e,r)},e.prototype.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},e.prototype.removeRemoteTextTrack=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.track,r=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(r)},e.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(t){return void 0===t?this.language_:(this.language_=String(t).toLowerCase(),this)},e.prototype.languages=function(){return(0,U.default)(e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var t=(0,U.default)(this.options_),e=t.tracks;t.tracks=[];for(var r=0;r<e.length;r++){var n=e[r];n=(0,U.default)(n),n.player=void 0,t.tracks[r]=n}return t},e.prototype.createModal=function(t,e){var r=this;e=e||{},e.content=t||"";var n=new W.default(this,e);return this.addChild(n),n.on("dispose",function(){r.removeChild(n)}),n.open()},e.getTagSettings=function(t){var e={sources:[],tracks:[]},r=g.getElAttributes(t),n=r["data-setup"];if(g.hasElClass(t,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=(0,N.default)(n||"{}"),o=i[0],a=i[1];o&&k.default.error(o),(0,F.assign)(r,a)}if((0,F.assign)(e,r),t.hasChildNodes())for(var s=t.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],d=c.nodeName.toLowerCase();"source"===d?e.sources.push(g.getElAttributes(c)):"track"===d&&e.tracks.push(g.getElAttributes(c))}return e},e.prototype.flexNotSupported_=function(){var t=d.default.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},e}(u.default);Q.players={};var Z=f.default.navigator;Q.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Z&&(Z.languages&&Z.languages[0]||Z.userLanguage||Z.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Q.prototype[t]=function(){return this.techGet_(t)}}),J.forEach(function(t){Q.prototype["handleTech"+(0,A.default)(t)+"_"]=function(){return this.trigger(t)}}),u.default.registerComponent("Player",Q),r.default=Q},{1:1,4:4,41:41,44:44,45:45,46:46,5:5,50:50,55:55,59:59,60:60,61:61,62:62,63:63,68:68,69:69,71:71,76:76,78:78,79:79,8:8,81:81,82:82,83:83,85:85,86:86,87:87,88:88,89:89,90:90,91:91,94:94,95:95,97:97}],52:[function(t,e,r){"use strict";r.__esModule=!0;var n=t(51),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t,e){i.default.prototype[t]=e};r.default=o},{51:51}],53:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(3),l=n(s),u=t(5),c=n(u),d=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var a=o(this,t.call(this,r,n));return a.update(),a}return a(e,t),e.prototype.update=function(){var t=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=t,this.addChild(t),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},e.prototype.createPopup=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e}(l.default);c.default.registerComponent("PopupButton",d),r.default=d},{3:3,5:5}],54:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=t(81),c=n(u),d=t(83),h=n(d),f=t(82),p=n(f),y=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",h.bind(this,function(){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=c.createEl(e,{className:"vjs-menu-content"});var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),p.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e}(l.default);l.default.registerComponent("Popup",y),r.default=y},{5:5,81:81,82:82,83:83}],55:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(3),u=i(l),c=t(5),d=i(c),h=t(83),f=n(h),p=t(81),y=n(p),v=t(78),g=n(v),m=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n));return i.update(),r.on("posterchange",f.bind(i,i.update)),i}return s(e,t),e.prototype.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=y.createEl("div",{className:"vjs-poster",tabIndex:-1});return g.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=y.createEl("img"),t.appendChild(this.fallbackImg_)),t},e.prototype.update=function(t){var e=this.player().poster();
this.setSrc(e),e?this.show():this.hide()},e.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},e.prototype.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},e}(u.default);d.default.registerComponent("PosterImage",m),r.default=m},{3:3,5:5,78:78,81:81,83:83}],56:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){e&&(y=e),f.default.setTimeout(v,t)}r.__esModule=!0,r.hasLoaded=r.autoSetupTimeout=r.autoSetup=void 0;var a=t(81),s=i(a),l=t(82),u=i(l),c=t(94),d=n(c),h=t(95),f=n(h),p=!1,y=void 0,v=function(){if(s.isReal()){var t=d.default.getElementsByTagName("video"),e=d.default.getElementsByTagName("audio"),r=[];if(t&&t.length>0)for(var n=0,i=t.length;n<i;n++)r.push(t[n]);if(e&&e.length>0)for(var a=0,l=e.length;a<l;a++)r.push(e[a]);if(r&&r.length>0)for(var u=0,c=r.length;u<c;u++){var h=r[u];if(!h||!h.getAttribute){o(1);break}if(void 0===h.player){var f=h.getAttribute("data-setup");null!==f&&y(h)}}else p||o(1)}};s.isReal()&&"complete"===d.default.readyState?p=!0:u.one(f.default,"load",function(){p=!0});var g=function(){return p};r.autoSetup=v,r.autoSetupTimeout=o,r.hasLoaded=g},{81:81,82:82,94:94,95:95}],57:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=t(81),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t(88),d=function(t){function e(r,o){n(this,e);var a=i(this,t.call(this,r,o));return a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.on("mousedown",a.handleMouseDown),a.on("touchstart",a.handleMouseDown),a.on("focus",a.handleFocus),a.on("blur",a.handleBlur),a.on("click",a.handleClick),a.on(r,"controlsvisible",a.update),a.on(r,a.playerEvent,a.update),a}return o(e,t),e.prototype.createEl=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.className=r.className+" vjs-slider",r=(0,c.assign)({tabIndex:0},r),n=(0,c.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),t.prototype.createEl.call(this,e,r,n)},e.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;t.preventDefault(),u.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.prototype.handleMouseMove=function(t){},e.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;u.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!==t||t<0||t===1/0)&&(t=0);var r=(100*t).toFixed(2)+"%";this.vertical()?e.el().style.height=r:e.el().style.width=r}}},e.prototype.calculateDistance=function(t){var e=u.getPointerPosition(this.el_,t);return this.vertical()?e.y:e.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.prototype.vertical=function(t){return void 0===t?this.vertical_||!1:(this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},e}(s.default);s.default.registerComponent("Slider",d),r.default=d},{5:5,81:81,88:88}],58:[function(t,e,r){"use strict";function n(t){return t.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},t.streamFromParts=function(t,e){return t+"&"+e},t.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var r=t.search(/&(?!\w+=)/),n=void 0;return-1!==r?n=r+1:0===(r=n=t.lastIndexOf("/")+1)&&(r=n=t.length),e.connection=t.substring(0,r),e.stream=t.substring(n,t.length),e},t.isStreamingType=function(e){return e in t.streamingFormats},t.RTMP_RE=/^rtmp[set]?:\/\//i,t.isStreamingSrc=function(e){return t.RTMP_RE.test(e)},t.rtmpSourceHandler={},t.rtmpSourceHandler.canPlayType=function(e){return t.isStreamingType(e)?"maybe":""},t.rtmpSourceHandler.canHandleSource=function(e,r){var n=t.rtmpSourceHandler.canPlayType(e.type);return n||(t.isStreamingSrc(e.src)?"maybe":"")},t.rtmpSourceHandler.handleSource=function(e,r,n){var i=t.streamToParts(e.src);r.setRtmpConnection(i.connection),r.setRtmpStream(i.stream)},t.registerSourceHandler(t.rtmpSourceHandler),t}r.__esModule=!0,r.default=n},{}],59:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){k[t]=function(){return this.el_.vjs_getProperty(t)}}r.__esModule=!0;for(var u=t(62),c=i(u),d=t(81),h=n(d),f=t(92),p=n(f),y=t(90),v=t(58),g=i(v),m=t(5),b=i(m),_=t(95),T=i(_),E=t(88),w=T.default.navigator,S=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n));return r.source&&i.ready(function(){this.setSource(r.source)},!0),r.startTime&&i.ready(function(){this.load(),this.play(),this.currentTime(r.startTime)},!0),T.default.videojs=T.default.videojs||{},T.default.videojs.Flash=T.default.videojs.Flash||{},T.default.videojs.Flash.onReady=e.onReady,T.default.videojs.Flash.onEvent=e.onEvent,T.default.videojs.Flash.onError=e.onError,i.on("seeked",function(){this.lastSeekTarget_=void 0}),i}return s(e,t),e.prototype.createEl=function(){var t=this.options_;t.swf||(t.swf="//vjs.zencdn.net/swf/5.4.1/video-js.swf");var r=t.techId,n=(0,E.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),i=(0,E.assign)({wmode:"opaque",bgcolor:"#000000"},t.params),o=(0,E.assign)({id:r,name:r,class:"vjs-tech"},t.attributes);return this.el_=e.embed(t.swf,n,i,o),this.el_.tech=this,this.el_},e.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},e.prototype.pause=function(){this.el_.vjs_pause()},e.prototype.src=function(t){return void 0===t?this.currentSrc():this.setSrc(t)},e.prototype.setSrc=function(t){var e=this;t=p.getAbsoluteURL(t),this.el_.vjs_src(t),this.autoplay()&&this.setTimeout(function(){return e.play()},0)},e.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},e.prototype.setCurrentTime=function(e){var r=this.seekable();r.length&&(e=e>r.start(0)?e:r.start(0),e=e<r.end(r.length-1)?e:r.end(r.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),t.prototype.setCurrentTime.call(this))},e.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},e.prototype.duration=function(){if(0===this.readyState())return NaN;var t=this.el_.vjs_getProperty("duration");return t>=0?t:1/0},e.prototype.load=function(){this.el_.vjs_load()},e.prototype.poster=function(){this.el_.vjs_getProperty("poster")},e.prototype.setPoster=function(){},e.prototype.seekable=function(){var t=this.duration();return 0===t?(0,y.createTimeRange)():(0,y.createTimeRange)(0,t)},e.prototype.buffered=function(){var t=this.el_.vjs_getProperty("buffered");return 0===t.length?(0,y.createTimeRange)():(0,y.createTimeRange)(t[0][0],t[0][1])},e.prototype.supportsFullScreen=function(){return!1},e.prototype.enterFullScreen=function(){return!1},e.prototype.getVideoPlaybackQuality=function(){var t=this.el_.vjs_getProperty("getVideoPlaybackQuality");return T.default.performance&&"function"==typeof T.default.performance.now?t.creationTime=T.default.performance.now():T.default.performance&&T.default.performance.timing&&"number"==typeof T.default.performance.timing.navigationStart&&(t.creationTime=T.default.Date.now()-T.default.performance.timing.navigationStart),t},e}(c.default),k=S.prototype,C="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),A="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),O=0;O<C.length;O++)l(C[O]),function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);k["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}}(C[O]);for(var R=0;R<A.length;R++)l(A[R]);S.isSupported=function(){return S.version()[0]>=10},c.default.withSourceHandlers(S),S.nativeSourceHandler={},S.nativeSourceHandler.canPlayType=function(t){return t in S.formats?"maybe":""},S.nativeSourceHandler.canHandleSource=function(t,e){var r=void 0;return r=t.type?t.type.replace(/;.*/,"").toLowerCase():function(t){var e=p.getFileExtension(t);return e?"video/"+e:""}(t.src),S.nativeSourceHandler.canPlayType(r)},S.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)},S.nativeSourceHandler.dispose=function(){},S.registerSourceHandler(S.nativeSourceHandler),S.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},S.onReady=function(t){var e=h.getEl(t),r=e&&e.tech;r&&r.el()&&S.checkReady(r)},S.checkReady=function(t){t.el()&&(t.el().vjs_getProperty?t.triggerReady():this.setTimeout(function(){S.checkReady(t)},50))},S.onEvent=function(t,e){var r=h.getEl(t).tech,n=Array.prototype.slice.call(arguments,2);r.setTimeout(function(){r.trigger(e,n)},1)},S.onError=function(t,e){var r=h.getEl(t).tech;return"srcnotfound"===e?r.error(4):void r.error("FLASH: "+e)},S.version=function(){var t="0,0,0";try{t=new T.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{w.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(w.plugins["Shockwave Flash 2.0"]||w.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return t.split(",")},S.embed=function(t,e,r,n){var i=S.getEmbedCode(t,e,r,n);return h.createEl("div",{innerHTML:i}).childNodes[0]},S.getEmbedCode=function(t,e,r,n){var i="",o="",a="";return e&&Object.getOwnPropertyNames(e).forEach(function(t){i+=t+"="+e[t]+"&amp;"}),r=(0,E.assign)({movie:t,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},r),Object.getOwnPropertyNames(r).forEach(function(t){o+='<param name="'+t+'" value="'+r[t]+'" />'}),n=(0,E.assign)({data:t,width:"100%",height:"100%"},n),Object.getOwnPropertyNames(n).forEach(function(t){a+=t+'="'+n[t]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+o+"</object>"},(0,g.default)(S),b.default.registerComponent("Flash",S),c.default.registerTech("Flash",S),r.default=S},{5:5,58:58,62:62,81:81,88:88,90:90,92:92,95:95}],60:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=function(t,e){return t.raw=e,t}(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),u=t(62),c=i(u),d=t(5),h=i(d),f=t(81),p=n(f),y=t(92),v=n(y),g=t(83),m=n(g),b=t(86),_=i(b),T=t(98),E=i(T),w=t(78),S=n(w),k=t(94),C=i(k),A=t(95),O=i(A),R=t(88),L=t(87),P=i(L),D=t(91),x=i(D),I=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n)),s=r.source,u=!1;if(s&&(i.el_.currentSrc!==s.src||r.tag&&3===r.tag.initNetworkState_)?i.setSource(s):i.handleLateInit_(i.el_),i.el_.hasChildNodes()){for(var c=i.el_.childNodes,d=c.length,h=[];d--;){var f=c[d];"track"===f.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(f),i.remoteTextTracks().addTrack_(f.track),u||i.el_.hasAttribute("crossorigin")||!v.isCrossOrigin(f.src)||(u=!0)):h.push(f))}for(var p=0;p<h.length;p++)i.el_.removeChild(h[p])}return["audio","video"].forEach(function(t){var e=i.el()[t+"Tracks"],r=i[t+"Tracks"](),n=(0,x.default)(t);i["featuresNative"+n+"Tracks"]&&e&&e.addEventListener&&(i["handle"+n+"TrackChange_"]=function(t){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r})},i["handle"+n+"TrackAdd_"]=function(t){return r.addTrack(t.track)},i["handle"+n+"TrackRemove_"]=function(t){return r.removeTrack(t.track)},e.addEventListener("change",i["handle"+n+"TrackChange_"]),e.addEventListener("addtrack",i["handle"+n+"TrackAdd_"]),e.addEventListener("removetrack",i["handle"+n+"TrackRemove_"]),i["removeOld"+n+"Tracks_"]=function(t){return i.removeOldTracks_(r,e)},i.on("loadstart",i["removeOld"+n+"Tracks_"]))}),i.featuresNativeTextTracks&&(u&&_.default.warn((0,E.default)(l)),i.handleTextTrackChange_=m.bind(i,i.handleTextTrackChange),i.handleTextTrackAdd_=m.bind(i,i.handleTextTrackAdd),i.handleTextTrackRemove_=m.bind(i,i.handleTextTrackRemove),i.proxyNativeTextTracks_()),i.restoreMetadataTracksInIOSNativePlayer_(),(S.TOUCH_ENABLED||S.IS_IPHONE||S.IS_NATIVE_ANDROID)&&!0===r.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return s(e,t),e.prototype.dispose=function(){var r=this;["audio","video","text"].forEach(function(t){var e=(0,x.default)(t),n=r.el_[t+"Tracks"];n&&n.removeEventListener&&(n.removeEventListener("change",r["handle"+e+"TrackChange_"]),n.removeEventListener("addtrack",r["handle"+e+"TrackAdd_"]),n.removeEventListener("removetrack",r["handle"+e+"TrackRemove_"])),n&&r.off("loadstart",r["removeOld"+e+"Tracks_"])}),e.disposeMediaElement(this.el_),t.prototype.dispose.call(this)},e.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var t=this.textTracks(),e=void 0,r=function(){e=[];for(var r=0;r<t.length;r++){var n=t[r];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};r(),t.addEventListener("change",r);var n=function r(){for(var n=0;n<e.length;n++){var i=e[n];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",r)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",r),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",r),t.addEventListener("change",r),t.removeEventListener("change",n)})},e.prototype.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var r=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(r,t),e.disposeMediaElement(t),t=r}else{t=C.default.createElement("video");var n=this.options_.tag&&p.getElAttributes(this.options_.tag),i=(0,P.default)({},n);S.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete i.controls,p.setElAttributes(t,(0,R.assign)(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&p.setAttribute(t,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],a=o.length-1;a>=0;a--){var s=o[a],l=this.options_[s];void 0!==l&&(l?p.setAttribute(t,s,s):p.removeAttribute(t,s),t[s]=l)}return t},e.prototype.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,r=function(){e=!0};this.on("loadstart",r);var n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",n),e||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),t.readyState>=2&&i.push("loadeddata"),t.readyState>=3&&i.push("canplay"),t.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(t){this.trigger(t)},this)})}},e.prototype.proxyNativeTextTracks_=function(){var t=this.el().textTracks;if(t){for(var e=0;e<t.length;e++)this.textTracks().addTrack_(t[e]);t.addEventListener&&(t.addEventListener("change",this.handleTextTrackChange_),t.addEventListener("addtrack",this.handleTextTrackAdd_),t.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},e.prototype.handleTextTrackChange=function(t){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},e.prototype.handleTextTrackAdd=function(t){this.textTracks().addTrack_(t.track)},e.prototype.handleTextTrackRemove=function(t){this.textTracks().removeTrack_(t.track)},e.prototype.removeOldTracks_=function(t,e){var r=[];if(e){for(var n=0;n<t.length;n++){for(var i=t[n],o=!1,a=0;a<e.length;a++)if(e[a]===i){o=!0;break}o||r.push(i)}for(var s=0;s<r.length;s++){var l=r[s];t.removeTrack_(l)}}},e.prototype.removeOldTextTracks_=function(t){var e=this.textTracks(),r=this.el().textTracks;this.removeOldTracks_(e,r)},e.prototype.play=function(){var t=this.el_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(t){})},e.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){(0,_.default)(t,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){var t=this;if(this.el_.duration===1/0&&S.IS_ANDROID&&S.IS_CHROME&&0===this.el_.currentTime){var e=function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},r=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",r),this.on("dispose",function(){t.off("webkitbeginfullscreen",r),t.off("webkitendfullscreen",e)})}},e.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=O.default.navigator&&O.default.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},e.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(t){return void 0===t?this.el_.src:void this.setSrc(t)},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.setControls=function(t){this.el_.controls=!!t},e.prototype.addTextTrack=function(e,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,r,n):t.prototype.addTextTrack.call(this,e,r,n)},e.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var r=C.default.createElement("track");return e.kind&&(r.kind=e.kind),e.label&&(r.label=e.label),(e.language||e.srclang)&&(r.srclang=e.language||e.srclang),e.default&&(r.default=e.default),e.id&&(r.id=e.id),e.src&&(r.src=e.src),r},e.prototype.addRemoteTextTrack=function(e,r){var n=t.prototype.addRemoteTextTrack.call(this,e,r);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},e.prototype.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var r=this.$$("track"),n=r.length;n--;)e!==r[n]&&e!==r[n].track||this.el().removeChild(r[n])},e.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),O.default.performance&&"function"==typeof O.default.performance.now?t.creationTime=O.default.performance.now():O.default.performance&&O.default.performance.timing&&"number"==typeof O.default.performance.timing.navigationStart&&(t.creationTime=O.default.Date.now()-O.default.performance.timing.navigationStart),t},e}(c.default);if(p.isReal()){I.TEST_VID=C.default.createElement("video");var M=C.default.createElement("track");M.kind="captions",M.srclang="en",M.label="English",I.TEST_VID.appendChild(M)}I.isSupported=function(){try{I.TEST_VID.volume=.5}catch(t){return!1}return!(!I.TEST_VID||!I.TEST_VID.canPlayType)},I.canControlVolume=function(){try{var t=I.TEST_VID.volume;return I.TEST_VID.volume=t/2+.1,t!==I.TEST_VID.volume}catch(t){return!1}},I.canControlPlaybackRate=function(){if(S.IS_ANDROID&&S.IS_CHROME&&S.CHROME_VERSION<58)return!1;try{var t=I.TEST_VID.playbackRate;return I.TEST_VID.playbackRate=t/2+.1,t!==I.TEST_VID.playbackRate}catch(t){return!1}},I.supportsNativeTextTracks=function(){return S.IS_ANY_SAFARI},I.supportsNativeVideoTracks=function(){return!(!I.TEST_VID||!I.TEST_VID.videoTracks)},I.supportsNativeAudioTracks=function(){return!(!I.TEST_VID||!I.TEST_VID.audioTracks)},I.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],I.prototype.featuresVolumeControl=I.canControlVolume(),I.prototype.featuresPlaybackRate=I.canControlPlaybackRate(),I.prototype.movingMediaElementInDOM=!S.IS_IOS,I.prototype.featuresFullscreenResize=!0,I.prototype.featuresProgressEvents=!0,I.prototype.featuresTimeupdateEvents=!0,I.prototype.featuresNativeTextTracks=I.supportsNativeTextTracks(),I.prototype.featuresNativeVideoTracks=I.supportsNativeVideoTracks(),I.prototype.featuresNativeAudioTracks=I.supportsNativeAudioTracks();var j=I.TEST_VID&&I.TEST_VID.constructor.prototype.canPlayType,N=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,F=/^video\/mp4/i;I.patchCanPlayType=function(){S.ANDROID_VERSION>=4&&!S.IS_FIREFOX?I.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&N.test(t)?"maybe":j.call(this,t)}:S.IS_OLD_ANDROID&&(I.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&F.test(t)?"maybe":j.call(this,t)})},I.unpatchCanPlayType=function(){var t=I.TEST_VID.constructor.prototype.canPlayType;return I.TEST_VID.constructor.prototype.canPlayType=j,t},I.patchCanPlayType(),I.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},I.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){I.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){I.prototype["set"+(0,x.default)(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){I.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate"].forEach(function(t){I.prototype["set"+(0,x.default)(t)]=function(e){this.el_[t]=e}}),["pause","load"].forEach(function(t){I.prototype[t]=function(){return this.el_[t]()}}),c.default.withSourceHandlers(I),I.nativeSourceHandler={},I.nativeSourceHandler.canPlayType=function(t){try{return I.TEST_VID.canPlayType(t)}catch(t){return""}},I.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return I.nativeSourceHandler.canPlayType(t.type);if(t.src){var r=v.getFileExtension(t.src);return I.nativeSourceHandler.canPlayType("video/"+r)}return""},I.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)},I.nativeSourceHandler.dispose=function(){},I.registerSourceHandler(I.nativeSourceHandler),h.default.registerComponent("Html5",I),c.default.registerTech("Html5",I),r.default=I},{5:5,62:62,78:78,81:81,83:83,86:86,87:87,88:88,91:91,92:92,94:94,95:95,98:98}],61:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(5),l=n(s),u=t(62),c=n(u),d=t(91),h=n(d),f=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var u=0,d=n.playerOptions.techOrder;u<d.length;u++){var f=(0,h.default)(d[u]),p=c.default.getTech(f);if(f||(p=l.default.getComponent(f)),p&&p.isSupported()){r.loadTech_(f);break}}return s}return a(e,t),e}(l.default);l.default.registerComponent("MediaLoader",f),r.default=f},{5:5,62:62,91:91}],62:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var a=new g.default(i);return o.addTrack_(a),a}r.__esModule=!0;var l=t(5),u=n(l),c=t(66),d=n(c),h=t(65),f=n(h),p=t(87),y=n(p),v=t(72),g=n(v),m=t(70),b=n(m),_=t(76),T=n(_),E=t(63),w=n(E),S=t(83),k=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(S),C=t(86),A=n(C),O=t(90),R=t(79),L=t(46),P=n(L),D=t(95),x=n(D),I=t(94),M=n(I),j=t(88),N=function(e){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};i(this,r),t.reportTouchActivity=!1;var a=o(this,e.call(this,null,t,n));return a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),a.textTracks_=t.textTracks,a.videoTracks_=t.videoTracks,a.audioTracks_=t.audioTracks,a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(a["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions&&(a.featuresNativeTextTracks=!1),a.featuresNativeTextTracks||a.emulateTextTracks(),a.autoRemoteTextTracks_=new b.default,a.initTextTrackListeners(),a.initTrackListeners(),t.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}return a(r,e),r.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(k.bind(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},r.prototype.onDurationChange=function(t){this.duration_=this.duration()},r.prototype.buffered=function(){return(0,O.createTimeRange)(0,0)},r.prototype.bufferedPercent=function(){return(0,R.bufferedPercent)(this.buffered(),this.duration_)},r.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){
this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},r.prototype.clearTracks=function(t){var e=this;t=[].concat(t),t.forEach(function(t){for(var r=e[t+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===t&&e.removeRemoteTextTrack(i),r.removeTrack_(i)}})},r.prototype.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var r=t[e];this.removeRemoteTextTrack(r)}},r.prototype.reset=function(){},r.prototype.error=function(t){return void 0!==t&&(this.error_=new P.default(t),this.trigger("error")),this.error_},r.prototype.played=function(){return this.hasStarted_?(0,O.createTimeRange)(0,0):(0,O.createTimeRange)()},r.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.initTextTrackListeners=function(){var t=k.bind(this,function(){this.trigger("texttrackchange")}),e=this.textTracks();e&&(e.addEventListener("removetrack",t),e.addEventListener("addtrack",t),this.on("dispose",k.bind(this,function(){e.removeEventListener("removetrack",t),e.removeEventListener("addtrack",t)})))},r.prototype.initTrackListeners=function(){var t=this;["video","audio"].forEach(function(e){var r=function(){t.trigger(e+"trackchange")},n=t[e+"Tracks"]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),t.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})},r.prototype.addWebVttScript_=function(){var e=this;if(!x.default.WebVTT)if(M.default.body.contains(this.el())){var r=t(99);if(!this.options_["vtt.js"]&&(0,j.isPlain)(r)&&Object.keys(r).length>0)return void this.trigger("vttjsloaded");var n=M.default.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",n.onload=function(){e.trigger("vttjsloaded")},n.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),x.default.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.prototype.emulateTextTracks=function(){var t=this,e=this.textTracks();if(e){var r=this.remoteTextTracks(),n=function(t){return e.addTrack_(t.track)},i=function(t){return e.removeTrack_(t.track)};r.on("addtrack",n),r.on("removetrack",i),this.addWebVttScript_();var o=function(){return t.trigger("texttrackchange")},a=function(){o();for(var t=0;t<e.length;t++){var r=e[t];r.removeEventListener("cuechange",o),"showing"===r.mode&&r.addEventListener("cuechange",o)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){r.off("addtrack",n),r.off("removetrack",i),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(var t=0;t<e.length;t++)e[t].removeEventListener("cuechange",o)})}},r.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new T.default,this.videoTracks_},r.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new w.default,this.audioTracks_},r.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new b.default,this.textTracks_},r.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new b.default,this.remoteTextTracks_},r.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new f.default,this.remoteTextTrackEls_},r.prototype.addTextTrack=function(t,e,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return s(this,t,e,r)},r.prototype.createRemoteTextTrack=function(t){var e=(0,y.default)(t,{tech:this});return new d.default(e)},r.prototype.addRemoteTextTrack=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],r=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(A.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),!0!==e&&this.autoRemoteTextTracks_.addTrack_(r.track),r},r.prototype.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack_(t),this.autoRemoteTextTracks_.removeTrack_(t)},r.prototype.getVideoPlaybackQuality=function(){return{}},r.prototype.setPoster=function(){},r.prototype.playsinline=function(){},r.prototype.setPlaysinline=function(){},r.prototype.canPlayType=function(){return""},r.isTech=function(t){return t.prototype instanceof r||t instanceof r||t===r},r.registerTech=function(t,e){if(r.techs_||(r.techs_={}),!r.isTech(e))throw new Error("Tech "+t+" must be a Tech");return r.techs_[t]=e,e},r.getTech=function(t){return r.techs_&&r.techs_[t]?r.techs_[t]:x.default&&x.default.videojs&&x.default.videojs[t]?(A.default.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),x.default.videojs[t]):void 0},r}(u.default);N.prototype.textTracks_,N.prototype.audioTracks_,N.prototype.videoTracks_,N.prototype.featuresVolumeControl=!0,N.prototype.featuresFullscreenResize=!1,N.prototype.featuresPlaybackRate=!1,N.prototype.featuresProgressEvents=!1,N.prototype.featuresTimeupdateEvents=!1,N.prototype.featuresNativeTextTracks=!1,N.withSourceHandlers=function(t){t.registerSourceHandler=function(e,r){var n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,e)},t.canPlayType=function(e){for(var r=t.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(e))return n;return""},t.selectSourceHandler=function(e,r){for(var n=t.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(e,r))return n[i];return null},t.canPlaySource=function(e,r){var n=t.selectSourceHandler(e,r);return n?n.canHandleSource(e,r):""},["seekable","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var r=t.selectSourceHandler(e,this.options_);return r||(t.nativeSourceHandler?r=t.nativeSourceHandler:A.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),r!==t.nativeSourceHandler&&(this.currentSource_=e,this.off(this.el_,"loadstart",t.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",t.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",t.prototype.firstLoadStartListener_)),this.sourceHandler_=r.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},t.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",t.prototype.successiveLoadStartListener_)},t.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",t.prototype.successiveLoadStartListener_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",t.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",t.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},u.default.registerComponent("Tech",N),u.default.registerComponent("MediaTechController",N),N.registerTech("Tech",N),r.default=N},{46:46,5:5,63:63,65:65,66:66,70:70,72:72,76:76,79:79,83:83,86:86,87:87,88:88,90:90,94:94,95:95,99:99}],63:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(74),l=n(s),u=t(78),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(94),h=n(d),f=function(t,e){for(var r=0;r<t.length;r++)e.id!==t[r].id&&(t[r].enabled=!1)},p=function(t){function e(){var r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,e);for(var s=void 0,u=a.length-1;u>=0;u--)if(a[u].enabled){f(a,a[u]);break}if(c.IS_IE8){s=h.default.createElement("custom");for(var d in l.default.prototype)"constructor"!==d&&(s[d]=l.default.prototype[d]);for(var p in e.prototype)"constructor"!==p&&(s[p]=e.prototype[p])}return s=r=o(this,t.call(this,a,s)),s.changing_=!1,n=s,o(r,n)}return a(e,t),e.prototype.addTrack_=function(e){var r=this;e.enabled&&f(this,e),t.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){r.changing_||(r.changing_=!0,f(r,e),r.changing_=!1,r.trigger("change"))})},e.prototype.addTrack=function(t){this.addTrack_(t)},e.prototype.removeTrack=function(e){t.prototype.removeTrack_.call(this,e)},e}(l.default);r.default=p},{74:74,78:78,94:94}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(73),l=t(75),u=n(l),c=t(87),d=n(c),h=t(78),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),p=function(t){function e(){var r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var l=(0,d.default)(a,{kind:s.AudioTrackKind[a.kind]||""}),u=r=o(this,t.call(this,l)),c=!1;if(f.IS_IE8)for(var h in e.prototype)"constructor"!==h&&(u[h]=e.prototype[h]);return Object.defineProperty(u,"enabled",{get:function(){return c},set:function(t){"boolean"==typeof t&&t!==c&&(c=t,this.trigger("enabledchange"))}}),l.enabled&&(u.enabled=l.enabled),u.loaded_=!0,n=u,o(r,n)}return a(e,t),e}(u.default);r.default=p},{73:73,75:75,78:78,87:87}],65:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t(78),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),a=t(94),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,t);var r=this;if(o.IS_IE8){r=s.default.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}r.trackElements_=[],Object.defineProperty(r,"length",{get:function(){return this.trackElements_.length}});for(var a=0,l=e.length;a<l;a++)r.addTrackElement_(e[a]);if(o.IS_IE8)return r}return t.prototype.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},t.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(t===this.trackElements_[r].track){e=this.trackElements_[r];break}return e},t.prototype.removeTrackElement_=function(t){for(var e=0,r=this.trackElements_.length;e<r;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}();r.default=l},{78:78,94:94}],66:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(78),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),u=t(94),c=n(u),d=t(42),h=n(d),f=t(72),p=n(f),y=0,v=2,g=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=o(this,t.call(this)),a=void 0,s=n;if(l.IS_IE8){s=c.default.createElement("custom");for(var u in e.prototype)"constructor"!==u&&(s[u]=e.prototype[u])}var d=new p.default(r);if(s.kind=d.kind,s.src=d.src,s.srclang=d.language,s.label=d.label,s.default=d.default,Object.defineProperty(s,"readyState",{get:function(){return a}}),Object.defineProperty(s,"track",{get:function(){return d}}),a=y,d.addEventListener("loadeddata",function(){a=v,s.trigger({type:"load",target:s})}),l.IS_IE8){var h;return h=s,o(n,h)}return n}return a(e,t),e}(h.default);g.prototype.allowedEvents_={load:"load"},g.NONE=y,g.LOADING=1,g.LOADED=v,g.ERROR=3,r.default=g},{42:42,72:72,78:78,94:94}],67:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t(78),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),a=t(94),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(){function t(e){n(this,t);var r=this;if(o.IS_IE8){r=s.default.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}if(t.prototype.setCues_.call(r,e),Object.defineProperty(r,"length",{get:function(){return this.length_}}),o.IS_IE8)return r}return t.prototype.setCues_=function(t){var e=this.length||0,r=0,n=t.length;this.cues_=t,this.length_=t.length;var i=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<n)for(r=e;r<n;r++)i.call(this,r)},t.prototype.getCueById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},t}();r.default=l},{78:78,94:94}],68:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+e+")"}function l(t,e,r){try{t.style[e]=r}catch(t){return}}r.__esModule=!0;var u=t(5),c=n(u),d=t(83),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),f=t(95),p=n(f),y={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},v=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this,r,n,a));return r.on("loadstart",h.bind(s,s.toggleDisplay)),r.on("texttrackchange",h.bind(s,s.updateDisplay)),r.ready(h.bind(s,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)return void this.hide();r.on("fullscreenchange",h.bind(this,this.updateDisplay));for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);var n={captions:1,subtitles:1},i=this.player_.textTracks(),o=void 0,a=void 0;if(i){for(var s=0;s<i.length;s++){var l=i[s];l.default&&("descriptions"!==l.kind||o?l.kind in n&&!a&&(a=l):o=l)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return a(e,t),e.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.prototype.clearDisplay=function(){"function"==typeof p.default.WebVTT&&p.default.WebVTT.processCues(p.default,[],this.el_)},e.prototype.updateDisplay=function(){var t=this.player_.textTracks();if(this.clearDisplay(),t){for(var e=null,r=null,n=t.length;n--;){var i=t[n];"showing"===i.mode&&("descriptions"===i.kind?e=i:r=i)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))}},e.prototype.updateForTrack=function(t){if("function"==typeof p.default.WebVTT&&t.activeCues){for(var e=this.player_.textTrackSettings.getValues(),r=[],n=0;n<t.activeCues.length;n++)r.push(t.activeCues[n]);p.default.WebVTT.processCues(p.default,r,this.el_);for(var i=r.length;i--;){var o=r[i];if(o){var a=o.displayState;if(e.color&&(a.firstChild.style.color=e.color),e.textOpacity&&l(a.firstChild,"color",s(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(a.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&l(a.firstChild,"backgroundColor",s(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?l(a,"backgroundColor",s(e.windowColor,e.windowOpacity)):a.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),e.fontPercent&&1!==e.fontPercent){var u=p.default.parseFloat(a.style.fontSize);a.style.fontSize=u*e.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=y[e.fontFamily])}}}},e}(c.default);c.default.registerComponent("TextTrackDisplay",v),r.default=v},{5:5,83:83,95:95}],69:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,r,n){return t[r]&&(e[r]=t[r]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},i=function(t){var e=t.$$("track"),r=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=n(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===r.indexOf(t)}).map(n))},o=function(t,e){return t.forEach(function(t){var r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return r.addCue(t)})}),e.textTracks()};r.default={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:n}},{}],70:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(74),u=i(l),c=t(83),d=n(c),h=t(78),f=n(h),p=t(94),y=i(p),v=function(t){function e(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e);var s=void 0;if(f.IS_IE8){s=y.default.createElement("custom");for(var l in u.default.prototype)"constructor"!==l&&(s[l]=u.default.prototype[l]);for(var c in e.prototype)"constructor"!==c&&(s[c]=e.prototype[c])}return s=r=a(this,t.call(this,i,s)),n=s,a(r,n)}return s(e,t),e.prototype.addTrack_=function(e){t.prototype.addTrack_.call(this,e),e.addEventListener("modechange",d.bind(this,function(){this.trigger("change")}))},e}(u.default);r.default=v},{74:74,78:78,83:83,94:94}],71:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}function u(t,e){return l(t.options[t.options.selectedIndex].value,e)}function c(t,e,r){if(e)for(var n=0;n<t.options.length;n++)if(l(t.options[n].value,r)===e){t.selectedIndex=n;break}}r.__esModule=!0;var d=t(95),h=i(d),f=t(5),p=i(f),y=t(81),v=t(83),g=n(v),m=t(88),b=n(m),_=t(86),T=i(_),E=["#000","Black"],w=["#00F","Blue"],S=["#0FF","Cyan"],k=["#0F0","Green"],C=["#F0F","Magenta"],A=["#F00","Red"],O=["#FFF","White"],R=["#FF0","Yellow"],L=["1","Opaque"],P=["0.5","Semi-Transparent"],D=["0","Transparent"],x={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[E,O,A,k,w,R,C,S]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[L,P,D]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[O,E,A,k,w,R,C,S]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[L,P]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[D,P,L]}};x.windowColor.options=x.backgroundColor.options;var I=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r,n));return i.setDefaults(),i.hide(),i.updateDisplay=g.bind(i,i.updateDisplay),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.hide()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),b.each(x,function(t){i.on(i.$(t.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return s(e,t),e.prototype.createElSelect_=function(t){var e=this,r=x[t],n=r.id.replace("%s",this.id_);return[(0,y.createEl)("label",{className:"vjs-label",textContent:r.label},{for:n}),(0,y.createEl)("select",{id:n},void 0,r.options.map(function(t){return(0,y.createEl)("option",{textContent:e.localize(t[1]),value:t[0]})}))]},e.prototype.createElFgColor_=function(){var t=(0,y.createEl)("legend",{textContent:this.localize("Text")}),e=this.createElSelect_("color"),r=(0,y.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[t].concat(e,r))},e.prototype.createElBgColor_=function(){var t=(0,y.createEl)("legend",{textContent:this.localize("Background")}),e=this.createElSelect_("backgroundColor"),r=(0,y.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[t].concat(e,r))},e.prototype.createElWinColor_=function(){var t=(0,y.createEl)("legend",{textContent:this.localize("Window")}),e=this.createElSelect_("windowColor"),r=(0,y.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return(0,y.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[t].concat(e,r))},e.prototype.createElColors_=function(){return(0,y.createEl)("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},e.prototype.createElFont_=function(){var t=(0,y.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),e=(0,y.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),r=(0,y.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return(0,y.createEl)("div",{className:"vjs-tracksettings-font"},void 0,[t,e,r])},e.prototype.createElControls_=function(){var t=(0,y.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),e=(0,y.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,y.createEl)("div",{className:"vjs-tracksettings-controls"},void 0,[t,e])},e.prototype.createEl=function(){var t=(0,y.createEl)("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),e=(0,y.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),r=(0,y.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),n=(0,y.createEl)("div",void 0,{role:"document"},[e,r,t]);return(0,y.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":e.id,"aria-describedby":r.id},n)},e.prototype.getValues=function(){var t=this;return b.reduce(x,function(e,r,n){var i=u(t.$(r.selector),r.parser);return void 0!==i&&(e[n]=i),e},{})},e.prototype.setValues=function(t){var e=this;b.each(x,function(r,n){c(e.$(r.selector),t[n],r.parser)})},e.prototype.setDefaults=function(){var t=this;b.each(x,function(e){var r=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=r})},e.prototype.restoreSettings=function(){var t=void 0;try{t=JSON.parse(h.default.localStorage.getItem("vjs-text-track-settings"))}catch(t){T.default.warn(t)}t&&this.setValues(t)},e.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?h.default.localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):h.default.localStorage.removeItem("vjs-text-track-settings")}catch(t){T.default.warn(t)}}},e.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},e}(p.default);p.default.registerComponent("TextTrackSettings",I),r.default=I},{5:5,81:81,83:83,86:86,88:88,95:95}],72:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(67),u=i(l),c=t(83),d=n(c),h=t(73),f=t(86),p=i(f),y=t(95),v=i(y),g=t(75),m=i(g),b=t(92),_=t(104),T=i(_),E=t(87),w=i(E),S=t(78),k=n(S),C=function(t,e){var r=new v.default.WebVTT.Parser(v.default,v.default.vttjs,v.default.WebVTT.StringDecoder()),n=[];r.oncue=function(t){e.addCue(t)},r.onparsingerror=function(t){n.push(t)},r.onflush=function(){e.trigger({type:"loadeddata",target:e})},r.parse(t),n.length>0&&(v.default.console&&v.default.console.groupCollapsed&&v.default.console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return p.default.error(t)}),v.default.console&&v.default.console.groupEnd&&v.default.console.groupEnd()),r.flush()},A=function(t,e){var r={uri:t},n=(0,b.isCrossOrigin)(t);n&&(r.cors=n),(0,T.default)(r,d.bind(this,function(t,r,n){if(t)return p.default.error(t,r);if(e.loaded_=!0,"function"!=typeof v.default.WebVTT){if(e.tech_){var i=function(){return C(n,e)};e.tech_.on("vttjsloaded",i),
e.tech_.on("vttjserror",function(){p.default.error("vttjs failed to load, stopping trying to process "+e.src),e.tech_.off("vttjsloaded",i)})}}else C(n,e)}))},O=function(t){function e(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),!i.tech)throw new Error("A tech was not provided.");var s=(0,w.default)(i,{kind:h.TextTrackKind[i.kind]||"subtitles",language:i.language||i.srclang||""}),l=h.TextTrackMode[s.mode]||"disabled",c=s.default;"metadata"!==s.kind&&"chapters"!==s.kind||(l="hidden");var f=r=a(this,t.call(this,s));if(f.tech_=s.tech,k.IS_IE8)for(var p in e.prototype)"constructor"!==p&&(f[p]=e.prototype[p]);f.cues_=[],f.activeCues_=[];var y=new u.default(f.cues_),v=new u.default(f.activeCues_),g=!1,m=d.bind(f,function(){this.activeCues,g&&(this.trigger("cuechange"),g=!1)});return"disabled"!==l&&f.tech_.ready(function(){f.tech_.on("timeupdate",m)},!0),Object.defineProperty(f,"default",{get:function(){return c},set:function(){}}),Object.defineProperty(f,"mode",{get:function(){return l},set:function(t){var e=this;h.TextTrackMode[t]&&(l=t,"showing"===l&&this.tech_.ready(function(){e.tech_.on("timeupdate",m)},!0),this.trigger("modechange"))}}),Object.defineProperty(f,"cues",{get:function(){return this.loaded_?y:null},set:function(){}}),Object.defineProperty(f,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return v;for(var t=this.tech_.currentTime(),e=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];i.startTime<=t&&i.endTime>=t?e.push(i):i.startTime===i.endTime&&i.startTime<=t&&i.startTime+.5>=t&&e.push(i)}if(g=!1,e.length!==this.activeCues_.length)g=!0;else for(var o=0;o<e.length;o++)-1===this.activeCues_.indexOf(e[o])&&(g=!0);return this.activeCues_=e,v.setCues_(this.activeCues_),v},set:function(){}}),s.src?(f.src=s.src,A(s.src,f)):f.loaded_=!0,n=f,a(r,n)}return s(e,t),e.prototype.addCue=function(t){var e=t;if(v.default.vttjs&&!(t instanceof v.default.vttjs.VTTCue)){e=new v.default.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var r in t)r in e||(e[r]=t[r]);e.id=t.id,e.originalCue_=t}var n=this.tech_.textTracks();if(n)for(var i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(t){for(var e=this.cues_.length;e--;){var r=this.cues_[e];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(m.default);O.prototype.allowedEvents_={cuechange:"cuechange"},r.default=O},{104:104,67:67,73:73,75:75,78:78,83:83,86:86,87:87,92:92,95:95}],73:[function(t,e,r){"use strict";r.__esModule=!0,r.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},r.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},r.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},r.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},{}],74:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(42),l=n(s),u=t(78),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(94),h=n(d),f=function(t){function e(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e);var s=o(this,t.call(this));if(!a&&(a=s,c.IS_IE8)){a=h.default.createElement("custom");for(var l in e.prototype)"constructor"!==l&&(a[l]=e.prototype[l])}a.tracks_=[],Object.defineProperty(a,"length",{get:function(){return this.tracks_.length}});for(var u=0;u<n.length;u++)a.addTrack_(n[u]);return r=a,o(s,r)}return a(e,t),e.prototype.addTrack_=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.prototype.removeTrack_=function(t){for(var e=void 0,r=0,n=this.length;r<n;r++)if(this[r]===t){e=this[r],e.off&&e.off(),this.tracks_.splice(r,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},e}(l.default);f.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var p in f.prototype.allowedEvents_)f.prototype["on"+p]=null;r.default=f},{42:42,78:78,94:94}],75:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var l=t(78),u=i(l),c=t(94),d=n(c),h=t(85),f=i(h),p=t(42),y=n(p),v=function(t){function e(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var i=a(this,t.call(this)),s=i;if(u.IS_IE8){s=d.default.createElement("custom");for(var l in e.prototype)"constructor"!==l&&(s[l]=e.prototype[l])}var c={id:n.id||"vjs_track_"+f.newGUID(),kind:n.kind||"",label:n.label||"",language:n.language||""};for(var h in c)!function(t){Object.defineProperty(s,t,{get:function(){return c[t]},set:function(){}})}(h);return r=s,a(i,r)}return s(e,t),e}(y.default);r.default=v},{42:42,78:78,85:85,94:94}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(74),l=n(s),u=t(78),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),d=t(94),h=n(d),f=function(t,e){for(var r=0;r<t.length;r++)e.id!==t[r].id&&(t[r].selected=!1)},p=function(t){function e(){var r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,e);for(var s=void 0,u=a.length-1;u>=0;u--)if(a[u].selected){f(a,a[u]);break}if(c.IS_IE8){s=h.default.createElement("custom");for(var d in l.default.prototype)"constructor"!==d&&(s[d]=l.default.prototype[d]);for(var p in e.prototype)"constructor"!==p&&(s[p]=e.prototype[p])}return s=r=o(this,t.call(this,a,s)),s.changing_=!1,Object.defineProperty(s,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n=s,o(r,n)}return a(e,t),e.prototype.addTrack_=function(e){var r=this;e.selected&&f(this,e),t.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){r.changing_||(r.changing_=!0,f(r,e),r.changing_=!1,r.trigger("change"))})},e.prototype.addTrack=function(t){this.addTrack_(t)},e.prototype.removeTrack=function(e){t.prototype.removeTrack_.call(this,e)},e}(l.default);r.default=p},{74:74,78:78,94:94}],77:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t(73),l=t(75),u=n(l),c=t(87),d=n(c),h=t(78),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),p=function(t){function e(){var r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var l=(0,d.default)(a,{kind:s.VideoTrackKind[a.kind]||""}),u=r=o(this,t.call(this,l)),c=!1;if(f.IS_IE8)for(var h in e.prototype)"constructor"!==h&&(u[h]=e.prototype[h]);return Object.defineProperty(u,"selected",{get:function(){return c},set:function(t){"boolean"==typeof t&&t!==c&&(c=t,this.trigger("selectedchange"))}}),l.selected&&(u.selected=l.selected),n=u,o(r,n)}return a(e,t),e}(u.default);r.default=p},{73:73,75:75,78:78,87:87}],78:[function(t,e,r){"use strict";r.__esModule=!0,r.BACKGROUND_SIZE_SUPPORTED=r.TOUCH_ENABLED=r.IS_ANY_SAFARI=r.IS_SAFARI=r.IE_VERSION=r.IS_IE8=r.CHROME_VERSION=r.IS_CHROME=r.IS_EDGE=r.IS_FIREFOX=r.IS_NATIVE_ANDROID=r.IS_OLD_ANDROID=r.ANDROID_VERSION=r.IS_ANDROID=r.IOS_VERSION=r.IS_IOS=r.IS_IPOD=r.IS_IPHONE=r.IS_IPAD=void 0;var n=t(81),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=t(95),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.navigator&&a.default.navigator.userAgent||"",l=/AppleWebKit\/([\d.]+)/i.exec(s),u=l?parseFloat(l.pop()):null,c=r.IS_IPAD=/iPad/i.test(s),d=r.IS_IPHONE=/iPhone/i.test(s)&&!c,h=r.IS_IPOD=/iPod/i.test(s),f=r.IS_IOS=d||c||h,p=(r.IOS_VERSION=function(){var t=s.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),r.IS_ANDROID=/Android/i.test(s)),y=r.ANDROID_VERSION=function(){var t=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat(t[1]+"."+t[2]):e||null}(),v=(r.IS_OLD_ANDROID=p&&/webkit/i.test(s)&&y<2.3,r.IS_NATIVE_ANDROID=p&&y<5&&u<537,r.IS_FIREFOX=/Firefox/i.test(s),r.IS_EDGE=/Edge/i.test(s)),g=r.IS_CHROME=!v&&/Chrome/i.test(s),m=(r.CHROME_VERSION=function(){var t=s.match(/Chrome\/(\d+)/);return t&&t[1]?parseFloat(t[1]):null}(),r.IS_IE8=/MSIE\s8\.0/.test(s),r.IE_VERSION=function(){var t=/MSIE\s(\d+)\.\d/.exec(s),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)&&(e=11),e}(),r.IS_SAFARI=/Safari/i.test(s)&&!g&&!p&&!v);r.IS_ANY_SAFARI=m||f,r.TOUCH_ENABLED=i.isReal()&&("ontouchstart"in a.default||a.default.DocumentTouch&&a.default.document instanceof a.default.DocumentTouch),r.BACKGROUND_SIZE_SUPPORTED=i.isReal()&&"backgroundSize"in a.default.document.createElement("video").style},{81:81,95:95}],79:[function(t,e,r){"use strict";function n(t,e){var r=0,n=void 0,o=void 0;if(!e)return 0;t&&t.length||(t=(0,i.createTimeRange)(0,0));for(var a=0;a<t.length;a++)n=t.start(a),o=t.end(a),o>e&&(o=e),r+=o-n;return r/e}r.__esModule=!0,r.bufferedPercent=n;var i=t(90)},{90:90}],80:[function(t,e,r){"use strict";function n(t,e){if(!t||!e)return"";if("function"==typeof o.default.getComputedStyle){var r=o.default.getComputedStyle(t);return r?r[e]:""}return t.currentStyle[e]||""}r.__esModule=!0,r.default=n;var i=t(95),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},{95:95}],81:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return"string"==typeof t&&/\S/.test(t)}function o(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function a(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function s(){return N.default===B.default.document&&"undefined"!=typeof N.default.createElement}function l(t){return(0,z.isObject)(t)&&1===t.nodeType}function u(t){return function(e,r){if(!i(e))return N.default[t](null);i(r)&&(r=N.default.querySelector(r));var n=l(r)?r:N.default;return n[t]&&n[t](e)}}function c(t){return 0===t.indexOf("#")&&(t=t.slice(1)),N.default.getElementById(t)}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=N.default.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(V.default.warn((0,K.default)(M,t,r)),i.setAttribute(t,r)):"textContent"===t?h(i,r):i[t]=r}),Object.getOwnPropertyNames(r).forEach(function(t){i.setAttribute(t,r[t])}),n&&x(i,n),i}function h(t,e){return"undefined"==typeof t.textContent?t.innerText=e:t.textContent=e,t}function f(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function p(t){var e=t[Y];return e||(e=t[Y]=G.newGUID()),q[e]||(q[e]={}),q[e]}function y(t){var e=t[Y];return!!e&&!!Object.getOwnPropertyNames(q[e]).length}function v(t){var e=t[Y];if(e){delete q[e];try{delete t[Y]}catch(e){t.removeAttribute?t.removeAttribute(Y):t[Y]=null}}}function g(t,e){return o(e),t.classList?t.classList.contains(e):a(e).test(t.className)}function m(t,e){return t.classList?t.classList.add(e):g(t,e)||(t.className=(t.className+" "+e).trim()),t}function b(t,e){return t.classList?t.classList.remove(e):(o(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function _(t,e,r){var n=g(t,e);if("function"==typeof r&&(r=r(t,e)),"boolean"!=typeof r&&(r=!n),r!==n)return r?m(t,e):b(t,e),t}function T(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];null===n||void 0===n||!1===n?t.removeAttribute(r):t.setAttribute(r,!0===n?"":n)})}function E(t){var e={};if(t&&t.attributes&&t.attributes.length>0)for(var r=t.attributes,n=r.length-1;n>=0;n--){var i=r[n].name,o=r[n].value;"boolean"!=typeof t[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),e[i]=o}return e}function w(t,e){return t.getAttribute(e)}function S(t,e,r){t.setAttribute(e,r)}function k(t,e){t.removeAttribute(e)}function C(){N.default.body.focus(),N.default.onselectstart=function(){return!1}}function A(){N.default.onselectstart=function(){return!0}}function O(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var r=N.default.documentElement,n=N.default.body,i=r.clientLeft||n.clientLeft||0,o=B.default.pageXOffset||n.scrollLeft,a=e.left+o-i,s=r.clientTop||n.clientTop||0,l=B.default.pageYOffset||n.scrollTop,u=e.top+l-s;return{left:Math.round(a),top:Math.round(u)}}function R(t,e){var r={},n=O(t),i=t.offsetWidth,o=t.offsetHeight,a=n.top,s=n.left,l=e.pageY,u=e.pageX;return e.changedTouches&&(u=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(a-l+o)/o)),r.x=Math.max(0,Math.min(1,(u-s)/i)),r}function L(t){return(0,z.isObject)(t)&&3===t.nodeType}function P(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function D(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),l(t)||L(t)?t:"string"==typeof t&&/\S/.test(t)?N.default.createTextNode(t):void 0}).filter(function(t){return t})}function x(t,e){return D(e).forEach(function(e){return t.appendChild(e)}),t}function I(t,e){return x(P(t),e)}r.__esModule=!0,r.$$=r.$=void 0;var M=function(t,e){return t.raw=e,t}(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);r.isReal=s,r.isEl=l,r.getEl=c,r.createEl=d,r.textContent=h,r.insertElFirst=f,r.getElData=p,r.hasElData=y,r.removeElData=v,r.hasElClass=g,r.addElClass=m,r.removeElClass=b,r.toggleElClass=_,r.setElAttributes=T,r.getElAttributes=E,r.getAttribute=w,r.setAttribute=S,r.removeAttribute=k,r.blockTextSelection=C,r.unblockTextSelection=A,r.findElPosition=O,r.getPointerPosition=R,r.isTextNode=L,r.emptyEl=P,r.normalizeContent=D,r.appendContent=x,r.insertContent=I;var j=t(94),N=n(j),F=t(95),B=n(F),U=t(85),G=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(U),H=t(86),V=n(H),W=t(98),K=n(W),z=t(88),q={},Y="vdata"+(new Date).getTime();r.$=u("querySelector"),r.$$=u("querySelectorAll")},{85:85,86:86,88:88,94:94,95:95,98:98}],82:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){var r=f.getElData(t);0===r.handlers[e].length&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&f.removeElData(t)}function a(t,e,r,n){r.forEach(function(r){t(e,r,n)})}function s(t){function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped){var n=t||b.default.event;t={};for(var i in n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||T.default),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,null!==t.clientX&&void 0!==t.clientX){var o=T.default.documentElement,a=T.default.body;t.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}function l(t,e,r){if(Array.isArray(e))return a(l,t,e,r);var n=f.getElData(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=y.newGUID()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,r){if(!n.disabled){e=s(e);var i=n.handlers[e.type];if(i)for(var o=i.slice(0),a=0,l=o.length;a<l&&!e.isImmediatePropagationStopped();a++)try{o[a].call(t,e,r)}catch(t){g.default.error(t)}}}),1===n.handlers[e].length)if(t.addEventListener){var i=!1;E&&w.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,n.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function u(t,e,r){if(f.hasElData(t)){var n=f.getElData(t);if(n.handlers){if(Array.isArray(e))return a(u,t,e,r);var i=function(e){n.handlers[e]=[],o(t,e)};if(e){var s=n.handlers[e];if(s){if(!r)return void i(e);if(r.guid)for(var l=0;l<s.length;l++)s[l].guid===r.guid&&s.splice(l--,1);o(t,e)}}else for(var c in n.handlers)i(c)}}}function c(t,e,r){var n=f.hasElData(t)?f.getElData(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=s(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&!0===e.bubbles)c.call(null,i,e,r);else if(!i&&!e.defaultPrevented){var o=f.getElData(e.target);e.target[e.type]&&(o.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function d(t,e,r){if(Array.isArray(e))return a(d,t,e,r);var n=function n(){u(t,e,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||y.newGUID(),l(t,e,n)}r.__esModule=!0,r.fixEvent=s,r.on=l,r.off=u,r.trigger=c,r.one=d;var h=t(81),f=i(h),p=t(85),y=i(p),v=t(86),g=n(v),m=t(95),b=n(m),_=t(94),T=n(_),E=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){E=!0}});b.default.addEventListener("test",null,t)}catch(t){}}();var w=["touchstart","touchmove"]},{81:81,85:85,86:86,94:94,95:95}],83:[function(t,e,r){"use strict";r.__esModule=!0,r.throttle=r.bind=void 0;var n=t(85);r.bind=function(t,e,r){e.guid||(e.guid=(0,n.newGUID)());var i=function(){return e.apply(t,arguments)};return i.guid=r?r+"_"+e.guid:e.guid,i},r.throttle=function(t,e){var r=Date.now();return function(){var n=Date.now();n-r>=e&&(t.apply(void 0,arguments),r=n)}}},{85:85}],84:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;t=t<0?0:t;var r=Math.floor(t%60),n=Math.floor(t/60%60),i=Math.floor(t/3600),o=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=n=r="-"),i=i>0||a>0?i+":":"",n=((i||o>=10)&&n<10?"0"+n:n)+":",r=r<10?"0"+r:r,i+n+r}r.__esModule=!0,r.default=n},{}],85:[function(t,e,r){"use strict";function n(){return i++}r.__esModule=!0,r.newGUID=n;var i=1},{}],86:[function(t,e,r){"use strict";r.__esModule=!0,r.logByType=void 0;var n=t(95),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t(78),a=t(88),s=void 0,l=r.logByType=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!o.IE_VERSION&&o.IE_VERSION<11;"log"!==t&&e.unshift(t.toUpperCase()+":"),s.history.push(e),e.unshift("VIDEOJS:");var n=i.default.console&&i.default.console[t];n&&(r&&(e=e.map(function(t){if((0,a.isObject)(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),n.apply?n[Array.isArray(e)?"apply":"call"](i.default.console,e):n(e))};s=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];l("log",e)},s.history=[],s.error=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return l("error",e)},s.warn=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return l("warn",e)},r.default=s},{78:78,88:88,95:95}],87:[function(t,e,r){"use strict";function n(){for(var t={},e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return r.forEach(function(e){e&&(0,i.each)(e,function(e,r){return(0,i.isPlain)(e)?((0,i.isPlain)(t[r])||(t[r]={}),void(t[r]=n(t[r],e))):void(t[r]=e)})}),t}r.__esModule=!0,r.default=n;var i=t(88)},{88:88}],88:[function(t,e,r){"use strict";function n(t,e){c(t).forEach(function(r){return e(t[r],r)})}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c(t).reduce(function(r,n){return e(r,t[n],n)},r)}function o(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[t].concat(r)):(r.forEach(function(e){e&&n(e,function(e,r){t[r]=e})}),t)}function a(t){return!!t&&"object"===(void 0===t?"undefined":l(t))}function s(t){return a(t)&&"[object Object]"===u.call(t)&&t.constructor===Object}r.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.each=n,r.reduce=i,r.assign=o,r.isObject=a,r.isPlain=s;var u=Object.prototype.toString,c=function(t){return a(t)?Object.keys(t):[]}},{}],89:[function(t,e,r){"use strict";r.__esModule=!0,r.setTextContent=r.createStyleElement=void 0;var n=t(94),i=function(t){return t&&t.__esModule?t:{default:t}}(n);r.createStyleElement=function(t){var e=i.default.createElement("style");return e.className=t,e},r.setTextContent=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e}},{94:94}],90:[function(t,e,r){"use strict";function n(t,e,r){if(e<0||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is greater than or equal to the maximum bound ("+r+").")}function i(t,e,r,i){return void 0===i&&(l.default.warn("DEPRECATED: Function '"+t+"' on 'TimeRanges' called without an index argument."),i=0),n(t,i,r.length-1),r[i][e]}function o(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:i.bind(null,"start",0,t),end:i.bind(null,"end",1,t)}}function a(t,e){return Array.isArray(t)?o(t):void 0===t||void 0===e?o():o([[t,e]])}r.__esModule=!0,r.createTimeRange=void 0,r.createTimeRanges=a;var s=t(86),l=function(t){return t&&t.__esModule?t:{default:t}}(s);r.createTimeRange=a},{86:86}],91:[function(t,e,r){"use strict";function n(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}r.__esModule=!0,r.default=n},{}],92:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.isCrossOrigin=r.getFileExtension=r.getAbsoluteURL=r.parseUrl=void 0;var i=t(94),o=n(i),a=t(95),s=n(a),l=r.parseUrl=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],r=o.default.createElement("a");r.href=t;var n=""===r.host&&"file:"!==r.protocol,i=void 0;n&&(i=o.default.createElement("div"),i.innerHTML='<a href="'+t+'"></a>',r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o.default.body.appendChild(i));for(var a={},s=0;s<e.length;s++)a[e[s]]=r[e[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),n&&o.default.body.removeChild(i),a};r.getAbsoluteURL=function(t){if(!t.match(/^https?:\/\//)){var e=o.default.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t},r.getFileExtension=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,r=e.exec(t);if(r)return r.pop().toLowerCase()}return""},r.isCrossOrigin=function(t){var e=s.default.location,r=l(t);return(":"===r.protocol?e.protocol:r.protocol)+r.host!==e.protocol+e.host}},{94:94,95:95}],93:[function(e,r,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r){var n=void 0;if("string"==typeof t){if(0===t.indexOf("#")&&(t=t.slice(1)),a.getPlayers()[t])return e&&W.default.warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&a.getPlayers()[t].ready(r),a.getPlayers()[t];n=y.getEl(t)}else n=t;if(!n||!n.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(n.player||A.default.players[n.playerId])return n.player||A.default.players[n.playerId];e=e||{},a.hooks("beforesetup").forEach(function(t){var r=t(n,(0,P.default)(e));return!(0,q.isObject)(r)||Array.isArray(r)?void W.default.error("please return an object in beforesetup hooks"):void(e=(0,P.default)(e,r))});var i=T.default.getComponent("Player"),o=new i(n,e,r);return a.hooks("setup").forEach(function(t){return t(o)}),o}n.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=e(95),u=o(l),c=e(94),d=o(c),h=e(78),f=i(h),p=e(81),y=i(p),v=e(56),g=i(v),m=e(89),b=i(m),_=e(5),T=o(_),E=e(42),w=o(E),S=e(82),k=i(S),C=e(51),A=o(C),O=e(52),R=o(O),L=e(87),P=o(L),D=e(83),x=i(D),I=e(72),M=o(I),j=e(64),N=o(j),F=e(77),B=o(F),U=e(90),G=e(84),H=o(G),V=e(86),W=o(V),K=e(92),z=i(K),q=e(88),Y=e(80),X=o(Y),$=e(43),J=o($),Q=e(104),Z=o(Q),tt=e(62),et=o(tt);if("undefined"==typeof HTMLVideoElement&&y.isReal()&&(d.default.createElement("video"),d.default.createElement("audio"),d.default.createElement("track")),a.hooks_={},a.hooks=function(t,e){return a.hooks_[t]=a.hooks_[t]||[],e&&(a.hooks_[t]=a.hooks_[t].concat(e)),a.hooks_[t]},a.hook=function(t,e){a.hooks(t,e)},a.removeHook=function(t,e){var r=a.hooks(t).indexOf(e);return!(r<=-1||(a.hooks_[t]=a.hooks_[t].slice(),a.hooks_[t].splice(r,1),0))},!0!==u.default.VIDEOJS_NO_DYNAMIC_STYLE&&y.isReal()){var rt=y.$(".vjs-styles-defaults");if(!rt){rt=b.createStyleElement("vjs-styles-defaults");var nt=y.$("head");nt&&nt.insertBefore(rt,nt.firstChild),b.setTextContent(rt,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}g.autoSetupTimeout(1,a),a.VERSION="5.20.5",a.options=A.default.prototype.options_,a.getPlayers=function(){return A.default.players},a.players=A.default.players,a.getComponent=T.default.getComponent,a.registerComponent=function(t,e){et.default.isTech(e)&&W.default.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),T.default.registerComponent.call(T.default,t,e)},a.getTech=et.default.getTech,a.registerTech=et.default.registerTech,a.browser=f,a.TOUCH_ENABLED=f.TOUCH_ENABLED,a.extend=J.default,a.mergeOptions=P.default,a.bind=x.bind,a.plugin=R.default,a.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),a.options.languages=(0,P.default)(a.options.languages,(r={},r[t]=e,r)),a.options.languages[t]},a.log=W.default,a.createTimeRange=a.createTimeRanges=U.createTimeRanges,a.formatTime=H.default,a.parseUrl=z.parseUrl,a.isCrossOrigin=z.isCrossOrigin,a.EventTarget=w.default,a.on=k.on,a.one=k.one,a.off=k.off,a.trigger=k.trigger,a.xhr=Z.default,a.TextTrack=M.default,a.AudioTrack=N.default,a.VideoTrack=B.default,a.isEl=y.isEl,a.isTextNode=y.isTextNode,a.createEl=y.createEl,a.hasClass=y.hasElClass,a.addClass=y.addElClass,a.removeClass=y.removeElClass,a.toggleClass=y.toggleElClass,a.setAttributes=y.setElAttributes,a.getAttributes=y.getElAttributes,a.emptyEl=y.emptyEl,a.appendContent=y.appendContent,a.insertContent=y.insertContent,a.computedStyle=X.default,"function"==typeof t&&t.amd?t("videojs",[],function(){return a}):"object"===(void 0===n?"undefined":s(n))&&"object"===(void 0===r?"undefined":s(r))&&(r.exports=a),n.default=a},{104:104,42:42,43:43,5:5,51:51,52:52,56:56,62:62,64:64,72:72,77:77,78:78,80:80,81:81,82:82,83:83,84:84,86:86,87:87,88:88,89:89,90:90,92:92,94:94,95:95}],94:[function(t,e,r){(function(r){var n=void 0!==r?r:"undefined"!=typeof window?window:{},i=t(96);if("undefined"!=typeof document)e.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{96:96}],95:[function(t,e,r){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={};
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(t,e,r){},{}],97:[function(t,e,r){function n(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(t){n=t}return[n,r]}e.exports=n},{}],98:[function(t,e,r){function n(t){return t.replace(/\n\r?\s*/g,"")}e.exports=function(t){for(var e="",r=0;r<arguments.length;r++)e+=n(t[r])+(arguments[r+1]||"");return e}},{}],99:[function(t,e,r){var n=t(103),i=e.exports={WebVTT:t(100),VTTCue:t(101),VTTRegion:t(102)};n.vttjs=i,n.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=n.VTTCue,l=n.VTTRegion;i.shim=function(){n.VTTCue=o,n.VTTRegion=a},i.restore=function(){n.VTTCue=s,n.VTTRegion=l},n.VTTCue||i.shim()},{100:100,101:101,102:102,103:103}],100:[function(t,e,r){function n(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function i(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function o(){this.values=g(null)}function a(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],l=a[1];e(s,l)}}}function s(t,e,r){function s(){var e=i(t);if(null===e)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+u);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}var u=t;if(l(),e.startTime=s(),l(),"-->"!==t.substr(0,3))throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+u);t=t.substr(3),l(),e.endTime=s(),l(),function(t,e){var n=new o;a(t,function(t,e){switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){n.set(t,r[i].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","middle","end"]);break;case"position":o=e.split(","),n.percent(t,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","middle","end"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical",""),e.line=n.get("line","auto"),e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align","middle"),e.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,e)}function l(t,e){function r(t){return m[t]}for(var n,o=t.document.createElement("div"),a=o,s=[];null!==(n=function(){if(!e)return null;var t=e.match(/^([^<]*)(<[^>]*>?)?/);return function(t){return e=e.substr(t.length),t}(t[1]?t[1]:t[2])}());)if("<"!==n[0])a.appendChild(t.document.createTextNode(function(t){for(;c=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(c[0],r);return t}(n)));else{if("/"===n[1]){s.length&&s[s.length-1]===n.substr(2).replace(">","")&&(s.pop(),a=a.parentNode);continue}var l,u=i(n.substr(1,n.length-2));if(u){l=t.document.createProcessingInstruction("timestamp",u),a.appendChild(l);continue}var c=n.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(l=function(e,r){var n=b[e];if(!n)return null;var i=t.document.createElement(n);i.localName=n;var o=_[e];return o&&r&&(i[o]=r.trim()),i}(c[1],c[3])))continue;if(!function(t,e){return!T[e.localName]||T[e.localName]===t.localName}(a,l))continue;c[2]&&(l.className=c[2].substr(1).replace("."," ")),s.push(c[1]),a.appendChild(l),a=l}return o}function u(t){for(var e=0;e<E.length;e++){var r=E[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function c(t){function e(t,e){for(var r=e.childNodes.length-1;r>=0;r--)t.push(e.childNodes[r])}function r(t){if(!t||!t.length)return null;var n=t.pop(),i=n.textContent||n.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):i}return"ruby"===n.tagName?r(t):n.childNodes?(e(t,n),r(t)):void 0}var n,i=[],o="";if(!t||!t.childNodes)return"ltr";for(e(i,t);o=r(i);)for(var a=0;a<o.length;a++)if(n=o.charCodeAt(a),u(n))return"rtl";return"ltr"}function d(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)"showing"===r[i].mode&&n++;return-1*++n}function h(){}function f(t,e,r){var n=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";n&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),h.call(this),this.cue=e,this.cueDiv=l(t,e.text);var a={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(a.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=t.document.createElement("div"),a={textAlign:"middle"===e.align?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},n||(a.direction=c(this.cueDiv),a.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var s=0;switch(e.positionAlign){case"start":s=e.position;break;case"middle":s=e.position-e.size/2;break;case"end":s=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function p(t){var e,r,n,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function y(t,e,r,n){var i=new p(e),o=e.cue,a=d(o),s=[];if(o.snapToLines){var l;switch(o.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=i.lineHeight,c=u*Math.round(a),h=r[l]+u,f=s[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/u)*u),a<0&&(c+=""===o.vertical?r.height:r.width,s=s.reverse()),i.move(f,c)}else{var y=i.lineHeight/r.height*100;switch(o.lineAlign){case"middle":a-=y/2;break;case"end":a-=y}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new p(e)}var v=function(t,e){for(var i,o=new p(t),a=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(r,e[s])||t.within(r)&&t.overlapsAny(n);)t.move(e[s]);if(t.within(r))return t;var l=t.intersectPercentage(r);a>l&&(i=new p(t),a=l),t=new p(o)}return i||o}(i,s);e.move(v.toCSSCompatValues(r))}function v(){}var g=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();n.prototype=g(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var m={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},b={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_={v:"title",lang:"lang"},T={rt:"ruby"},E=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];h.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])},h.prototype.formatStyle=function(t,e){return 0===t?0:t+e},f.prototype=g(h.prototype),f.prototype.constructor=f,p.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},p.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},p.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},p.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},p.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},p.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},p.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},p.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t,{left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r}},v.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},v.convertCueToDOMTree=function(t,e){return t&&e?l(t,e):null},v.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",r.appendChild(n),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var i=[],o=p.getSimpleBoxPosition(n),a=Math.round(.05*o.height*100)/100,s={font:a+"px sans-serif"};!function(){for(var r,a,l=0;l<e.length;l++)a=e[l],r=new f(t,a,s),n.appendChild(r.div),y(t,r,o,i),a.displayState=r.div,i.push(p.getSimpleBoxPosition(r))}()}else for(var l=0;l<e.length;l++)n.appendChild(e[l].displayState)},v.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},v.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof n))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){function e(){for(var t=u.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,u.buffer=t.substr(e),r}function r(t){var e=new o;if(a(t,function(t,r){switch(t){case"id":e.set(t,r);break;case"width":e.percent(t,r);break;case"lines":e.integer(t,r);break;case"regionanchor":case"viewportanchor":var n=r.split(",");if(2!==n.length)break;var i=new o;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;e.set(t+"X",i.get("x")),e.set(t+"Y",i.get("y"));break;case"scroll":e.alt(t,r,["up"])}},/=/,/\s/),e.has("id")){var r=new(u.vttjs.VTTRegion||u.window.VTTRegion);r.width=e.get("width",100),r.lines=e.get("lines",3),r.regionAnchorX=e.get("regionanchorX",0),r.regionAnchorY=e.get("regionanchorY",100),r.viewportAnchorX=e.get("viewportanchorX",0),r.viewportAnchorY=e.get("viewportanchorY",100),r.scroll=e.get("scroll",""),u.onregion&&u.onregion(r),u.regionList.push({id:e.get("id"),region:r})}}function l(t){var e=new o;a(t,function(t,r){switch(t){case"MPEGT":e.integer(t+"S",r);break;case"LOCA":e.set(t+"L",i(r))}},/[^\d]:/,/,/),u.ontimestampmap&&u.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}var u=this;t&&(u.buffer+=u.decoder.decode(t,{stream:!0}));try{var c;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;c=e();var d=c.match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new n(n.Errors.BadSignature);u.state="HEADER"}for(var h=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(h?h=!1:c=e(),u.state){case"HEADER":/:/.test(c)?function(t){t.match(/X-TIMESTAMP-MAP/)?a(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":l(e)}},/=/):a(t,function(t,e){switch(t){case"Region":r(e)}},/:/)}(c):c||(u.state="ID");continue;case"NOTE":c||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){u.state="NOTE";break}if(!c)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",-1===c.indexOf("-->")){u.cue.id=c;continue}case"CUE":try{s(c,u.cue,u.regionList)}catch(t){u.reportOrThrowError(t),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var f=-1!==c.indexOf("-->");if(!c||f&&(h=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=c;continue;case"BADCUE":c||(u.state="ID");continue}}}catch(t){u.reportOrThrowError(t),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new n(n.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},e.exports=v},{}],101:[function(t,e,r){function n(t){return"string"==typeof t&&!!l[t.toLowerCase()]&&t.toLowerCase()}function i(t){return"string"==typeof t&&!!u[t.toLowerCase()]&&t.toLowerCase()}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function a(t,e,r){var a=this,l=/MSIE\s8\.0/.test(navigator.userAgent),u={};l?a=document.createElement("custom"):u.enumerable=!0,a.hasBeenReset=!1;var c="",d=!1,h=t,f=e,p=r,y=null,v="",g=!0,m="auto",b="start",_=50,T="middle",E=50,w="middle";if(Object.defineProperty(a,"id",o({},u,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(a,"pauseOnExit",o({},u,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(a,"startTime",o({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",o({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",o({},u,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",o({},u,{get:function(){return y},set:function(t){y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",o({},u,{get:function(){return v},set:function(t){var e=n(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",o({},u,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",o({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==s)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",o({},u,{get:function(){return b},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",o({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",o({},u,{get:function(){return T},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",o({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",o({},u,{get:function(){return w},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),a.displayState=void 0,l)return a}var s="auto",l={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=a},{}],102:[function(t,e,r){function n(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function i(t){return"number"==typeof t&&t>=0&&t<=100}function o(){var t=100,e=3,r=0,o=100,a=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!i(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!i(t))throw new Error("RegionAnchorX must be between 0 and 100.");o=t}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!i(t))throw new Error("RegionAnchorY must be between 0 and 100.");r=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!i(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!i(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return l},set:function(t){var e=n(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");l=e}}})}var a={"":!0,up:!0};e.exports=o},{}],103:[function(t,e,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],104:[function(t,e,r){"use strict";function n(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,r){var n=t;return c(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=h(e,{uri:t}),n.callback=r,n}function o(t,e,r){return e=i(t,e,r),a(e)}function a(t){function e(){4===h.readyState&&a()}function r(){var t=void 0;if(t=h.response?h.response:h.responseText||s(h),T)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(y),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,u(t,c)}function a(){if(!p){var e;clearTimeout(y),e=t.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var n=c,i=null;return 0!==e?(n={body:r(),statusCode:e,method:g,headers:{},url:v,rawRequest:h},h.getAllResponseHeaders&&(n.headers=d(h.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,n,n.body)}}if("undefined"==typeof t.callback)throw new Error("callback argument missing");var l=!1,u=function(e,r,n){l||(l=!0,t.callback(e,r,n))},c={body:void 0,headers:{},statusCode:0,method:g,url:v,rawRequest:h},h=t.xhr||null;h||(h=t.cors||t.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var f,p,y,v=h.url=t.uri||t.url,g=h.method=t.method||"GET",m=t.body||t.data||null,b=h.headers=t.headers||{},_=!!t.sync,T=!1;if("json"in t&&(T=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(t.json))),h.onreadystatechange=e,h.onload=a,h.onerror=i,h.onprogress=function(){},h.ontimeout=i,h.open(g,v,!_,t.username,t.password),_||(h.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(y=setTimeout(function(){p=!0,h.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)},t.timeout)),h.setRequestHeader)for(f in b)b.hasOwnProperty(f)&&h.setRequestHeader(f,b[f]);else if(t.headers&&!n(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(h.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(h),h.send(m),h}function s(t){if("document"===t.responseType)return t.responseXML;var e=204===t.status&&t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function l(){}var u=t(95),c=t(105),d=t(108),h=t(109);e.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||l,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(e,r,n){return r=i(e,r,n),r.method=t.toUpperCase(),a(r)}})},{105:105,108:108,109:109,95:95}],105:[function(t,e,r){function n(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=n;var i=Object.prototype.toString},{}],106:[function(t,e,r){function n(t,e,r){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===l.call(t)?i(t,e,r):"string"==typeof t?o(t,e,r):a(t,e,r)}function i(t,e,r){for(var n=0,i=t.length;n<i;n++)u.call(t,n)&&e.call(r,t[n],n,t)}function o(t,e,r){for(var n=0,i=t.length;n<i;n++)e.call(r,t.charAt(n),n,t)}function a(t,e,r){for(var n in t)u.call(t,n)&&e.call(r,t[n],n,t)}var s=t(105);e.exports=n;var l=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{105:105}],107:[function(t,e,r){function n(t){return t.replace(/^\s*|\s*$/g,"")}r=e.exports=n,r.left=function(t){return t.replace(/^\s*/,"")},r.right=function(t){return t.replace(/\s*$/,"")}},{}],108:[function(t,e,r){var n=t(107),i=t(106),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var r=t.indexOf(":"),i=n(t.slice(0,r)).toLowerCase(),a=n(t.slice(r+1));"undefined"==typeof e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},{106:106,107:107}],109:[function(t,e,r){function n(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}e.exports=n;var i=Object.prototype.hasOwnProperty},{}]},{},[93])(93)}),/*
 * videojs-contrib-ads
 * @version 5.2.0-1
 * @copyright 2018 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):t.videojsContribAds=e(t.videojs)}(this,function(t){"use strict";function e(t){"playing"===t.type?a(this,t):"ended"===t.type?s(this,t):"loadstart"===t.type||"loadeddata"===t.type||"loadedmetadata"===t.type?l(this,t):"play"===t.type?u(this,t):this.ads.isInAdMode()&&(this.ads.isContentResuming()?o(this,"content",t):o(this,"ad",t))}function r(t){t.ads.cancelPlayTimeout||t.ads.stitchedAds()||(t.ads.cancelPlayTimeout=t.setTimeout(function(){t.ads.cancelPlayTimeout=null,t.paused()||t.pause(),t.ads._cancelledPlay=!0},1))}t=t&&t.hasOwnProperty("default")?t.default:t;var n,i=function(t,e){e.isImmediatePropagationStopped=function(){return!0},e.cancelBubble=!0,e.isPropagationStopped=function(){return!0}},o=function(t,e,r){i(0,r),t.trigger({type:e+r.type,state:t.ads.state,originalEvent:r})},a=function(t,e){t.ads.isInAdMode()&&(t.ads.isContentResuming()?t.ads._contentEnding&&o(t,"content",e):t.ads._cancelledPlay?i(0,e):o(t,"ad",e))},s=function(t,e){if(t.ads.isInAdMode()){if(t.ads.isContentResuming())return;o(t,"ad",e)}else o(t,"content",e)},l=function(t,e){if(!("loadstart"===e.type&&!t.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===e.type&&!t.ads._hasThereBeenALoadedData||"loadedmetadata"===e.type&&!t.ads._hasThereBeenALoadedMetaData))if(t.ads.isAdPlaying())o(t,"ad",e);else{if(t.currentSrc()!==t.ads.contentSrc)return;o(t,"content",e)}},u=function(t,e){var r=t.ads._cancelledPlay&&!t.ads.isInAdMode();t.ads.isAdPlaying()?o(t,"ad",e):(t.ads.isContentResuming()||r)&&o(t,"content",e)},c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d="undefined"!=typeof window?window:void 0!==c?c:"undefined"!=typeof self?self:{},h={},f=(Object.freeze||Object)({default:h}),p=f&&h||f,y=void 0!==c?c:"undefined"!=typeof window?window:{};"undefined"!=typeof document?n=document:(n=y["__GLOBAL_DOCUMENT_CACHE@4"])||(n=y["__GLOBAL_DOCUMENT_CACHE@4"]=p);var v=n,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t,e){return e?encodeURIComponent(t):t},b=function(t,e,r){if(t&&t[r])for(var n=t[r],i=Object.keys(n),o=0;o<i.length;o++)e["{mediainfo."+r+"."+i[o]+"}"]=n[i[o]]},_={};_.processMetadataTracks=function(t,e){for(var r=t.textTracks(),n=function(r){"metadata"===r.kind&&(t.ads.cueTextTracks.setMetadataTrackMode(r),e(t,r))},i=0;i<r.length;i++)n(r[i]);r.addEventListener("addtrack",function(t){n(t.track)})},_.setMetadataTrackMode=function(t){},_.getSupportedAdCue=function(t,e){return e},_.isSupportedAdCue=function(t,e){return!0},_.getCueId=function(t,e){return e.id};var T=function(t,e){return void 0!==e&&t.ads.includedCues[e]},E=function(t,e){void 0!==e&&""!==e&&(t.ads.includedCues[e]=!0)};_.processAdTrack=function(e,r,n,i){e.ads.includedCues={};for(var o=0;o<r.length;o++){var a=r[o],s=this.getSupportedAdCue(e,a);if(!this.isSupportedAdCue(e,a))return void t.log.warn("Skipping as this is not a supported ad cue.",a);var l=this.getCueId(e,a),u=a.startTime;if(T(e,l))return void t.log("Skipping ad already seen with ID "+l);i&&i(e,s,l,u),n(e,s,l,u),E(e,l)}};var w=t.getTech("Html5").Events,S=function(t){var e=t.$(".vjs-tech");e&&e.removeAttribute("poster")},k={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1,stitchedAds:!1},C=function(n){var i=this,o=t.mergeOptions(k,n),a=w.concat(["firstplay","loadedalldata","playing"]);i.on(a,e),i.setTimeout(function(){i.ads._hasThereBeenALoadStartDuringPlayerLife||""===i.src()||t.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see https://github.com/videojs/videojs-contrib-ads#important-note-about-initialization")},5e3),i.on("ended",function(){i.hasClass("vjs-has-started")||i.addClass("vjs-has-started")}),i.on(["addurationchange","adcanplay"],function(){i.ads.snapshot&&i.currentSrc()===i.ads.snapshot.currentSrc||i.ads.isAdPlaying()&&(i.ads.stitchedAds()||i.play())}),i.on("nopreroll",function(){i.ads.nopreroll_=!0}),i.on("nopostroll",function(){i.ads.nopostroll_=!0}),i.on(["ads-ad-started","playing"],function(){i.removeClass("vjs-ad-loading")}),i.on("playing",function(){i.ads._cancelledPlay=!1}),i.one("loadstart",function(){i.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),i.on("loadeddata",function(){i.ads._hasThereBeenALoadedData=!0}),i.on("loadedmetadata",function(){i.ads._hasThereBeenALoadedMetaData=!0}),i.ads={state:"content-set",disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,adType:null,VERSION:"__VERSION__",reset:function(){i.ads.disableNextSnapshotRestore=!1,i.ads._contentEnding=!1,i.ads._contentHasEnded=!1,i.ads.snapshot=null,i.ads.adType=null,i.ads._hasThereBeenALoadedData=!1,i.ads._hasThereBeenALoadedMetaData=!1,i.ads._cancelledPlay=!1,i.ads._stitchedAds=!1},startLinearAdMode:function(){"preroll?"!==i.ads.state&&"content-playback"!==i.ads.state&&"postroll?"!==i.ads.state||(i.ads._inLinearAdMode=!0,i.trigger("adstart"))},endLinearAdMode:function(){"ad-playback"===i.ads.state&&(i.ads._inLinearAdMode=!1,i.trigger("adend"),i.removeClass("vjs-ad-loading"))},skipLinearAdMode:function(){"ad-playback"!==i.ads.state&&i.trigger("adskip")},stitchedAds:function(t){return void 0!==t&&(this._stitchedAds=!!t),this._stitchedAds},videoElementRecycled:function(){if(i.ads.shouldPlayContentBehindAd(i))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=i.tech_.src()!==this.snapshot.src,e=i.currentSrc()!==this.snapshot.currentSrc;return t||e},isLive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return e.duration()===1/0||"8"===t.browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return!t.browser.IS_IOS&&!t.browser.IS_ANDROID&&e.duration()===1/0},shouldUseSnapshots:function(){return!this.shouldPlayContentBehindAd()&&!this.stitchedAds()},isInAdMode:function(){return"ads-ready?"===i.ads.state||"preroll?"===i.ads.state||"ad-playback"===i.ads.state||"content-resuming"===i.ads.state},isContentResuming:function(){return"content-resuming"===i.ads.state},isAdPlaying:function(){return this._inLinearAdMode}},i.ads.stitchedAds(o.stitchedAds),i.ads.cueTextTracks=_,i.ads.adMacroReplacement=function(e,r,n){void 0===r&&(r=!1);var i={};void 0!==n&&(i=n),i["{player.id}"]=this.options_["data-player"],i["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",i["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",i["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"",i["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"",i["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"",i["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",i["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"",i["{player.duration}"]=this.duration(),i["{timestamp}"]=(new Date).getTime(),i["{document.referrer}"]=v.referrer,i["{window.location.href}"]=d.location.href,i["{random}"]=Math.floor(1e12*Math.random()),b(this.mediainfo,i,"custom_fields"),b(this.mediainfo,i,"customFields");for(var o in i)e=e.split(o).join(m(i[o],r));return e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,n){for(var i=void 0,o=d,a=n.split("."),s=0;s<a.length;s++)s===a.length-1?i=o[a[s]]:o=o[a[s]];var l=void 0===i?"undefined":g(i);return null===i?"null":void 0===i?(t.log.warn('Page variable "'+n+'" not found'),""):"string"!==l&&"number"!==l&&"boolean"!==l?(t.log.warn('Page variable "'+n+'" is not a supported type'),""):m(String(i),r)})}.bind(i),function(t){t.ads.contentSrc=t.currentSrc();var e=function(){if("ad-playback"!==t.ads.state){var e=t.currentSrc();e!==t.ads.contentSrc&&(t.trigger({type:"contentupdate",oldValue:t.ads.contentSrc,newValue:e}),t.ads.contentSrc=e)}};t.on("loadstart",e),t.setTimeout(e,1)}(i),i.on("contentupdate",i.ads.reset);var s={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",r(i),S(i)},adserror:function(){this.state="content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?",r(i)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){i.ads.stitchedAds()?i.trigger("readyforpreroll"):i.ads.nopreroll_?(i.trigger("readyforpreroll"),i.setTimeout(function(){i.trigger("nopreroll")},1)):(i.addClass("vjs-ad-loading"),i.ads.adTimeoutTimeout=i.setTimeout(function(){i.trigger("adtimeout")},o.prerollTimeout),i.ads._hasThereBeenALoadStartDuringPlayerLife?i.trigger("readyforpreroll"):i.one("loadstart",function(){i.trigger("readyforpreroll")}))},leave:function(){i.clearTimeout(i.ads.adTimeoutTimeout)},events:{play:function(){r(i)},adstart:function(){this.state="ad-playback",i.ads.adType="preroll"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"},nopreroll:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){i.ads.stitchedAds()||(i.addClass("vjs-ad-loading"),i.ads.adTimeoutTimeout=i.setTimeout(function(){i.trigger("adtimeout")},o.timeout))},leave:function(){i.ads.stitchedAds()||(i.clearTimeout(i.ads.adTimeoutTimeout),i.removeClass("vjs-ad-loading"))},events:{play:function(){r(i)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){i.ads.shouldUseSnapshots()&&(this.snapshot=function(e){var r=void 0;r=t.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),i=e.textTracks?e.textTracks():[],o=[],a={ended:e.ended(),currentSrc:e.currentSrc(),src:e.tech_.src(),currentTime:r,type:e.currentType()};n&&(a.nativePoster=n.poster,a.style=n.getAttribute("style"));for(var s=0;s<i.length;s++){var l=i[s];o.push({track:l,mode:l.mode}),l.mode="disabled"}return a.suppressedTracks=o,a}(i)),i.ads.shouldPlayContentBehindAd(i)&&(this.preAdVolume_=i.volume(),i.volume(0)),i.addClass("vjs-ad-playing"),i.hasClass("vjs-live")&&i.removeClass("vjs-live"),S(i),i.ads.cancelPlayTimeout&&i.setTimeout(function(){i.clearTimeout(i.ads.cancelPlayTimeout),i.ads.cancelPlayTimeout=null},1)},leave:function(){i.removeClass("vjs-ad-playing"),i.ads.isLive(i)&&i.addClass("vjs-live"),i.ads.shouldUseSnapshots()&&function(e,r){if(!0!==e.ads.disableNextSnapshotRestore){var n=e.$(".vjs-tech"),i=20,o=r.suppressedTracks,a=void 0,s=function(){for(var t=0;t<o.length;t++)(a=o[t]).track.mode=a.mode},l=function(){var n=void 0;t.browser.IS_IOS&&e.ads.isLive(e)?r.currentTime<0&&(n=e.seekable().length>0?e.seekable().end(0)+r.currentTime:e.currentTime(),e.currentTime(n)):r.ended?e.currentTime(e.duration()):e.currentTime(r.currentTime),r.ended||e.play(),e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},u=function r(){if(e.off("contentcanplay",r),e.ads.tryToResumeTimeout_&&(e.clearTimeout(e.ads.tryToResumeTimeout_),e.ads.tryToResumeTimeout_=null),(n=e.el().querySelector(".vjs-tech")).readyState>1)return l();if(void 0===n.seekable)return l();if(n.seekable.length>0)return l();if(i--)e.setTimeout(r,50);else try{l()}catch(e){t.log.warn("Failed to resume the content after an advertisement",e)}};r.nativePoster&&(n.poster=r.nativePoster),"style"in r&&n.setAttribute("style",r.style||""),e.ads.videoElementRecycled()?(e.one("contentloadedmetadata",s),t.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src({src:r.currentSrc,type:r.type}),e.one("contentcanplay",u),e.ads.tryToResumeTimeout_=e.setTimeout(u,2e3)):(s(),e.ended()||e.play())}else e.ads.disableNextSnapshotRestore=!1}(i,this.snapshot),i.ads.shouldPlayContentBehindAd(i)&&i.volume(this.preAdVolume_)},events:{adend:function(){this.state="content-resuming",i.ads.adType=null},adserror:function(){i.ads.endLinearAdMode()}}},"content-resuming":{enter:function(){this._contentHasEnded&&(i.clearTimeout(i.ads._fireEndedTimeout),i.ads._fireEndedTimeout=i.setTimeout(function(){i.trigger("ended")},1e3))},leave:function(){i.clearTimeout(i.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){i.ads._contentEnding=!0,i.ads.nopostroll_?i.setTimeout(function(){i.ads.state="content-resuming",i.trigger("ended")},1):i.ads.stitchedAds()||(i.addClass("vjs-ad-loading"),i.ads.adTimeoutTimeout=i.setTimeout(function(){i.trigger("adtimeout")},o.postrollTimeout))},leave:function(){i.ads.stitchedAds()||(i.clearTimeout(i.ads.adTimeoutTimeout),i.removeClass("vjs-ad-loading"))},events:{adstart:function(){this.state="ad-playback",i.ads.adType="postroll"},adskip:function(){this.state="content-resuming",i.setTimeout(function(){i.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming",i.setTimeout(function(){i.trigger("ended")},1)},adserror:function(){this.state="content-resuming",i.setTimeout(function(){i.trigger("ended")},1)},contentupdate:function(){this.state="ads-ready?"}}},"content-playback":{enter:function(){i.ads.cancelPlayTimeout&&(i.clearTimeout(i.ads.cancelPlayTimeout),i.ads.cancelPlayTimeout=null),i.trigger({type:"contentplayback",triggerevent:i.ads.triggerevent}),i.ads._cancelledPlay&&i.paused()&&i.play()},events:{adsready:function(){i.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback","preroll"!==i.ads.adType&&(i.ads.adType="midroll")},contentupdate:function(){i.paused()?this.state="content-set":this.state="ads-ready?"},contentended:function(){this._contentHasEnded?this.state="content-resuming":(this._contentEnding=!1,this._contentHasEnded=!0,this.state="postroll?")}}}},l=function(e){var r=i.ads.state,n=s[r].events;if(n){var a=n[e.type];a&&a.apply(i.ads)}if(r!==i.ads.state){var l=r,u=i.ads.state;i.ads.triggerevent=e.type,s[l].leave&&s[l].leave.apply(i.ads),s[u].enter&&s[u].enter.apply(i.ads),o.debug&&t.log("ads",i.ads.triggerevent+" triggered: "+l+" -> "+u)}},u=function(){var e=i.textTracks();if(!i.ads.shouldPlayContentBehindAd(i)&&i.ads.isAdPlaying()&&i.tech_.featuresNativeTextTracks&&t.browser.IS_IOS&&!Array.isArray(i.textTracks()))for(var r=0;r<e.length;r++){var n=e[r];"showing"===n.mode&&(n.mode="disabled")}};i.ready(function(){i.textTracks().addEventListener("change",u)}),i.on(w.concat(["adtimeout","contentupdate","contentplaying","contentended","contentresumed","adstart","adend","adskip","adsready","adserror","adscanceled","nopreroll"]),l),i.on("dispose",function(){i.textTracks().removeEventListener("change",u)}),i.paused()||l({type:"play"})};return(t.registerPlugin||t.plugin)("ads",C),C}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["videojs-hlsjs-plugin"]=e():t["videojs-hlsjs-plugin"]=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist",e(e.s=0)}([function(t,e,r){"use strict";var n=r(1);window.videojs&&(n.registerConfigPlugin(window.videojs),n.registerSourceHandler(window.videojs)),t.exports={register:n.registerSourceHandler}},function(t,e,r){"use strict";function n(t){var e=this;t&&(e.options_.html5||(e.options_.html5={}),e.options_.html5.hlsjsConfig||(e.options_.html5.hlsjsConfig=t.hlsjsConfig))}var i=r(2),o=function(t){function e(e,n){function o(t){if(void 0!==r[t])for(var e=0;e<r[t].length;e++)r[t][e](g,f)}function a(t){1===y[i.ErrorTypes.MEDIA_ERROR]?f.recoverMediaError():2===y[i.ErrorTypes.MEDIA_ERROR]?(f.swapAudioCodec(),f.recoverMediaError()):y[i.ErrorTypes.MEDIA_ERROR]>2&&(n.error=function(){return t},n.trigger("error"))}function s(t,e){var r={message:"HLS.js error: "+e.type+" - fatal: "+e.fatal+" - "+e.details};if(console.error(r.message),y[e.type]?y[e.type]+=1:y[e.type]=1,e.fatal)switch(e.type){case i.ErrorTypes.NETWORK_ERROR:r.code=2,n.error=function(){return r},n.trigger("error");break;case i.ErrorTypes.MEDIA_ERROR:r.code=3,a(r);break;default:f.destroy(),n.error=function(){return r},n.trigger("error")}}function l(t){f.nextLevel=t}function u(t,e){function r(t){return t.height?t.height+"p":t.width?Math.round(9*t.width/16)+"p":t.bitrate?t.bitrate/1e3+"kbps":0}var i=[];if(e.levels.length>1){var o={id:-1,label:"auto",selected:-1===f.manualLevel};i.push(o)}e.levels.forEach(function(t,e){var n={};n.id=e,n.selected=e===f.manualLevel,n.label=r(t),i.push(n)});var a={qualityData:{video:i},qualitySwitchCallback:l};n.trigger("loadedqualitydata",a)}function c(){f.startLoad(-1),p.removeEventListener("play",c)}function d(t){for(var e={},r=Object.keys(t),n=0;n<r.length;n++)e[r[n]]=t[r[n]];return e}function h(){var t=n.options_.hlsjsConfig,r=t?d(t):{};-1!==["","auto"].indexOf(p.preload)||p.autoplay||void 0!==r.autoStartLoad||(r.autoStartLoad=!1),!1===r.autoStartLoad&&p.addEventListener("play",c),f=new i(r),o("beforeinitialize"),f.on(i.Events.ERROR,function(t,e){s(t,e,n,y)}),f.on(i.Events.MANIFEST_PARSED,u),f.on(i.Events.LEVEL_LOADED,function(t,e){v=e.details.live?1/0:e.details.totalduration}),f.attachMedia(p),f.loadSource(e.src)}n.name_="StreamrootHlsjs";var f,p=n.el(),y={},v=null,g=t(n.options_.playerId);this.duration=function(){return v||p.duration||0},this.dispose=function(){p.removeEventListener("play",c),f.destroy()},p.addEventListener("error",function(t){var e,r=t.currentTarget.error;switch(r.code){case r.MEDIA_ERR_ABORTED:e="You aborted the video playback";break;case r.MEDIA_ERR_DECODE:e="The video playback was aborted due to a corruption problem or because the video used features your browser did not support",a(r);break;case r.MEDIA_ERR_NETWORK:e="A network error caused the video download to fail part-way";break;case r.MEDIA_ERR_SRC_NOT_SUPPORTED:e="The video could not be loaded, either because the server or network failed or because the format is not supported";break;default:e=r.message}console.error("MEDIA_ERROR: ",e)}),function(){h()}()}var r={};if(e.addHook=function(t,e){r[t]=r[t]||[],r[t].push(e)},e.removeHook=function(t,e){if(void 0===r[t])return!1;var n=r[t].indexOf(e);return-1!==n&&(r[t].splice(n,1),!0)},i.isSupported()){var n;if("function"==typeof t.getTech)n=t.getTech("Html5");else{if("function"!=typeof t.getComponent)return void console.error("Not supported version if video.js");n=t.getComponent("Html5")}if(!n)return void console.error("Not supported version if video.js");n.registerSourceHandler({canHandleSource:function(t){var e=/^application\/x-mpegURL$/i,r=/\.m3u8/i;return e.test(t.type)?"probably":r.test(t.src)?"maybe":""},handleSource:function(t,r){return r.hlsProvider&&r.hlsProvider.dispose(),r.hlsProvider=new e(t,r),r.hlsProvider}},0),t.Html5Hlsjs=e}},a=function(t){(t.registerPlugin||t.plugin)("streamrootHls",n)};t.exports={registerSourceHandler:o,registerConfigPlugin:a}},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=8)}([function(t,e,r){"use strict";function n(){}function i(t,e){return e="["+t+"] > "+e}function o(t){var e=self.console[t];return e?function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]&&(n[0]=i(t,n[0])),e.apply(self.console,n)}:n}function a(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach(function(e){u[e]=t[e]?t[e].bind(t):o(e)})}r.d(e,"a",function(){return c}),r.d(e,"b",function(){return d});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=l,c=function(t){if(!0===t||"object"===(void 0===t?"undefined":s(t))){a(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=l}}else u=l},d=u},function(t,e,r){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return i});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"b",function(){return o});var i=function(){function t(){n(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var n=r,i=0;t.isHeader(e,r);)i+=10,i+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(i+=10),r+=i;if(i>0)return e.subarray(n,n+i)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),n=0;n<r.length;n++){var i=r[n];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:r,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var r=0,n=[];t.isHeader(e,r);){var i=t._readSize(e,r+6);r+=10;for(var o=r+i;r+8<o;){var a=t._getFrameData(e.subarray(r)),s=t._decodeFrame(a);s&&n.push(s),r+=a.size+10}t.isFooter(e,r)&&(r+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.length,n=void 0,i=void 0,o=void 0,a="",s=0;s<r;){if(0===(n=t[s++])&&e)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=t[s++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=t[s++],o=t[s++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&o)<<0)}}return a},t}(),o=i._utf8ArrayToStr;e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,r){n(this,t),this.subtle=e,this.aesIV=r}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),l=s,u=function(){function t(e,r){i(this,t),this.subtle=e,this.key=r}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),c=u,d=function(){function t(){o(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,y=0;for(y=0;y<256;y++)h[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[f]=v,e[v]=f;var g=h[f],m=h[g],b=h[m],_=257*h[v]^16843008*v;n[f]=_<<24|_>>>8,i[f]=_<<16|_>>>16,o[f]=_<<8|_>>>24,a[f]=_,_=16843009*b^65537*m^257*g^16843008*f,l[v]=_<<24|_>>>8,u[v]=_<<16|_>>>16,c[v]=_<<8|_>>>24,d[v]=_,f?(f=g^h[h[h[b^g]]],p^=h[h[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],y=h[2],v=h[3],g=void 0,m=void 0;for(a=0;a<o;a++)a<i?g=l[a]=e[a]:(m=g,a%i==0?(m=m<<8|m>>>24,m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m],m^=d[a/i|0]<<24):i>6&&a%i==4&&(m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m]),l[a]=g=(l[a-i]^m)>>>0);for(s=0;s<o;s++)a=o-s,m=3&s?l[a]:l[a-4],u[s]=s<4||a<=4?m:f[c[m>>>24]]^p[c[m>>>16&255]]^y[c[m>>>8&255]]^v[c[255&m]],u[s]=u[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r){for(var n,i,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(r),p=f[0],y=f[1],v=f[2],g=f[3],m=new Int32Array(t),b=new Int32Array(m.length),_=void 0,T=void 0,E=void 0,w=void 0,S=void 0,k=void 0,C=void 0,A=void 0,O=void 0,R=void 0,L=void 0,P=void 0,D=this.networkToHostOrderSwap;e<m.length;){for(O=D(m[e]),R=D(m[e+1]),L=D(m[e+2]),P=D(m[e+3]),S=O^a[0],k=P^a[1],C=L^a[2],A=R^a[3],n=4,i=1;i<o;i++)_=u[S>>>24]^c[k>>16&255]^d[C>>8&255]^h[255&A]^a[n],T=u[k>>>24]^c[C>>16&255]^d[A>>8&255]^h[255&S]^a[n+1],E=u[C>>>24]^c[A>>16&255]^d[S>>8&255]^h[255&k]^a[n+2],w=u[A>>>24]^c[S>>16&255]^d[k>>8&255]^h[255&C]^a[n+3],S=_,k=T,C=E,A=w,n+=4;_=s[S>>>24]<<24^s[k>>16&255]<<16^s[C>>8&255]<<8^s[255&A]^a[n],T=s[k>>>24]<<24^s[C>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^a[n+1],E=s[C>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&k]^a[n+2],w=s[A>>>24]<<24^s[S>>16&255]<<16^s[k>>8&255]<<8^s[255&C]^a[n+3],n+=3,b[e]=D(_^p),b[e+1]=D(w^y),b[e+2]=D(E^v),b[e+3]=D(T^g),p=O,y=R,v=L,g=P,e+=4}return b.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),h=d,f=r(2),p=r(0),y=function(){function t(e,r){a(this,t),this.observer=e,this.config=r,this.logEnabled=!0;try{
var n=crypto||self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,n){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(p.b.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new h),o.expandKey(e),n(o.decrypt(t,0,r))}else{this.logEnabled&&(p.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new c(a,e)),this.fastAesKey.expandKey().then(function(o){new l(a,r).decrypt(t,o).catch(function(o){i.onWebCryptoError(o,t,e,r,n)}).then(function(t){n(t)})}).catch(function(o){i.onWebCryptoError(o,t,e,r,n)})}},t.prototype.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(p.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(p.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=y},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){!function(e){var r=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(d)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},function(t,e,r){"use strict";function n(t,e,r,n){var i,o,a,s,l,u=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&e[r+2])>>>6),(o=(60&e[r+2])>>>2)>d.length-1?void t.trigger(Event.ERROR,{type:k.b.MEDIA_ERROR,details:k.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,A.b.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+d[o]+"Hz],channelConfig:"+s),/firefox/i.test(u)?o>=6?(i=5,l=new Array(4),a=o-3):(i=2,l=new Array(2),a=o):-1!==u.indexOf("android")?(i=2,l=new Array(2),a=o):(i=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&o>=6?a=o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(o>=6&&1===s||/vivaldi/i.test(u))||!n&&1===s)&&(i=2,l=new Array(2)),a=o)),l[0]=i<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===i&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[o],channelCount:s,codec:"mp4a.40."+i,manifestCodec:c})}function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function o(t,e){return 1&t[e+1]?7:9}function a(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&i(t,e))}function l(t,e){if(e+1<t.length&&i(t,e)){var r=o(t,e),n=r;e+5<t.length&&(n=a(t,e));var s=e+n;if(s===t.length||s+1<t.length&&i(t,s))return!0}return!1}function u(t,e,r,i,o){if(!t.samplerate){var a=n(e,r,i,o);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,A.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function c(t){return 9216e4/t}function d(t,e,r,n,i){var s,l,u,c=t.length;if(s=o(t,e),l=a(t,e),(l-=s)>0&&e+s+l<=c)return u=r+n*i,{headerLength:s,frameLength:l,stamp:u}}function h(t,e,r,n,i){var o=c(t.samplerate),a=d(e,r,n,i,o);if(a){var s=a.stamp,l=a.headerLength,u=a.frameLength,h={unit:e.subarray(r+l,r+l+u),pts:s,dts:s};return t.samples.push(h),t.len+=u,{sample:h,length:u+l}}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=r(1),k=r(2),C=r(4),A=r(0),O=r(3),R=function(){function t(e,r,n){f(this,t),this.observer=e,this.config=n,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=O.a.getID3Data(t,0)||[],r=e.length,n=t.length;r<n;r++)if(l(t,r))return A.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,n){for(var i=this._audioTrack,o=O.a.getID3Data(t,0)||[],a=O.a.getTimeStamp(o),l=a?90*a:9e4*e,c=0,d=l,f=t.length,p=o.length,y=[{pts:d,dts:d,data:o}];p<f-1;)if(s(t,p)&&p+5<f){u(i,this.observer,t,p,i.manifestCodec);var v=h(i,t,p,l,c);if(!v){A.b.log("Unable to parse AAC frame");break}p+=v.length,d=v.sample.pts,c++}else O.a.isHeader(t,p)?(o=O.a.getID3Data(t,p),y.push({pts:d,dts:d,data:o}),p+=o.length):p++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},e,r,n)},t.prototype.destroy=function(){},t}(),L=R,P=Math.pow(2,32)-1,D=function(){function t(e,r){p(this,t),this.observer=e,this.remuxer=r}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,n,i){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var a={};o.audio&&o.video?a.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:i?e:null}:(o.audio&&(a.audio={container:"audio/mp4",codec:r,initSegment:i?e:null}),o.video&&(a.video={container:"video/mp4",codec:n,initSegment:i?e:null})),this.observer.trigger(S.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var n,i,o,a,s,l,u,c=[];if(e.data?(l=e.start,a=e.end,e=e.data):(l=0,a=e.byteLength),!r.length)return null;for(n=l;n<a;)i=t.readUint32(e,n),o=t.bin2str(e.subarray(n+4,n+8)),u=i>1?n+i:a,o===r[0]&&(1===r.length?c.push({data:e,start:n+8,end:u}):(s=t.findBox({data:e,start:n+8,end:u},r.slice(1)),s.length&&(c=c.concat(s)))),n=u;return c},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var n=t.findBox(e,["tkhd"])[0];if(n){var i=n.data[n.start],o=0===i?12:20,a=t.readUint32(n,o),s=t.findBox(e,["mdia","mdhd"])[0];if(s){i=s.data[s.start],o=0===i?12:20;var l=t.readUint32(s,o),u=t.findBox(e,["mdia","hdlr"])[0];if(u){var c=t.bin2str(u.data.subarray(u.start+8,u.start+12)),d={soun:"audio",vide:"video"}[c];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));A.b.log("MP4Demuxer:"+d+":"+f+" found")}r[a]={timescale:l,type:d},r[d]={timescale:l,id:a}}}}}}),r},t.getStartDTS=function(e,r){var n,i,o;return n=t.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return t.findBox(r,["tfhd"]).map(function(n){var i,o;return i=t.readUint32(n,4),o=e[i].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r,n;return r=e.data[e.start],n=t.readUint32(e,4),1===r&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},t.offsetStartDTS=function(e,r,n){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var o=t.readUint32(i,4),a=e[o].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],i=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,i-n*a);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=n*a,i=Math.max(i,0);var o=Math.floor(i/(P+1)),s=Math.floor(i%(P+1));t.writeUint32(e,4,o),t.writeUint32(e,8,s)}})})})},t.prototype.append=function(e,r,n,i){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),o=this.initData);var a=void 0,s=this.initPTS;if(void 0===s){var l=t.getStartDTS(o,e);this.initPTS=s=l-r,this.observer.trigger(S.a.INIT_PTS_FOUND,{initPTS:s})}t.offsetStartDTS(o,e,s),a=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,a,n,i,e)},t.prototype.destroy=function(){},t}(),x=D,I={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var o=this.parseHeader(e,r);if(o&&r+o.frameLength<=e.length){var a=9e4*o.samplesPerFrame/o.sampleRate,s=n+i*a,l={unit:e.subarray(r,r+o.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(l),t.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,o=t[e+2]>>2&3,a=t[e+2]>>1&1;if(1!==r&&0!==i&&15!==i&&3!==o){var s=3===r?3-n:3===n?3:4,l=1e3*I.BitratesMap[14*s+i-1],u=3===r?0:2===r?1:2,c=I.SamplingRateMap[3*u+o],d=t[e+3]>>6==3?1:2,h=I.SamplesCoefficients[r][n],f=I.BytesInSlot[n],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+a,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),n=4;r&&r.frameLength&&(n=r.frameLength);var i=e+n;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},M=I,j=function(){function t(e){y(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&A.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,r,n=8,i=8;for(e=0;e<t;e++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.prototype.readSPS=function(){var t,e,r,n,i,o,a,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),y=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(d(),t=d(),h(5),y(3),d(),g(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=f();if(3===b&&y(1),g(),g(),y(1),p())for(o=3!==b?8:12,a=0;a<o;a++)p()&&m(a<6?16:64)}g();var _=f();if(0===_)f();else if(1===_)for(y(1),v(),v(),e=f(),a=0;a<e;a++)v();g(),y(1),r=f(),n=f(),i=h(1),0===i&&y(1),y(1),p()&&(s=f(),l=f(),u=f(),c=f());var T=[1,1];if(p()&&p())switch(d()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),N=j,F=function(){function t(e,r,n,i){v(this,t),this.decryptdata=n,this.discardEPB=i,this.decrypter=new C.a(e,r)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,n){var i=t[e].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},t.prototype.decryptAvcSample=function(t,e,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(t,e,r+1,n)})},t.prototype.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,o,a),!a)return}}}},t}(),B=F,U={video:0,audio:1,id3:2,text:3},G=function(){function t(e,r,n,i){g(this,t),this.observer=e,this.config=n,this.typeSupported=i,this.remuxer=r,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new B(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0||(r&&A.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,n,i){var o,a,s,l,u,c=e.length,d=!1;this.contiguous=n;var h=this.pmtParsed,f=this._avcTrack,p=this._audioTrack,y=this._id3Track,v=f.pid,g=p.pid,m=y.pid,b=this._pmtId,_=f.pesData,T=p.pesData,E=y.pesData,w=this._parsePAT,C=this._parsePMT,O=this._parsePES,R=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),P=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),x=t._syncOffset(e);for(c-=(c+x)%188,o=x;o<c;o+=188)if(71===e[o]){if(a=!!(64&e[o+1]),s=((31&e[o+1])<<8)+e[o+2],(48&e[o+3])>>4>1){if((l=o+5+e[o+4])===o+188)continue}else l=o+4;switch(s){case v:a&&(_&&(u=O(_))&&R(u,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(l,o+188)),_.size+=o+188-l);break;case g:a&&(T&&(u=O(T))&&(p.isAAC?L(u):P(u)),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,o+188)),T.size+=o+188-l);break;case m:a&&(E&&(u=O(E))&&D(u),E={data:[],size:0}),E&&(E.data.push(e.subarray(l,o+188)),E.size+=o+188-l);break;case 0:a&&(l+=e[l]+1),b=this._pmtId=w(e,l);break;case b:a&&(l+=e[l]+1);var I=C(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);v=I.avc,v>0&&(f.pid=v),g=I.audio,g>0&&(p.pid=g,p.isAAC=I.isAAC),m=I.id3,m>0&&(y.pid=m),d&&!h&&(A.b.log("reparse from beginning"),d=!1,o=x-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(S.a.ERROR,{type:k.b.MEDIA_ERROR,details:k.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(u=O(_))?(R(u,!0),f.pesData=null):f.pesData=_,T&&(u=O(T))?(p.isAAC?L(u):P(u),p.pesData=null):(T&&T.size&&A.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=T),E&&(u=O(E))?(D(u),y.pesData=null):y.pesData=E,null==this.sampleAes?this.remuxer.remux(p,f,y,this._txtTrack,r,n,i):this.decryptAndRemux(p,f,y,this._txtTrack,r,n,i)},t.prototype.decryptAndRemux=function(t,e,r,n,i,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,n,i,o,a)})}else this.decryptAndRemuxAvc(t,e,r,n,i,o,a)},t.prototype.decryptAndRemuxAvc=function(t,e,r,n,i,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,n,i,o,a)})}else this.remuxer.remux(t,e,r,n,i,o,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,n){var i,o,a,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&t[e+1])<<8|t[e+2],o=e+3+i-4,a=(15&t[e+10])<<8|t[e+11],e+=12+a;e<o;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){A.b.log("unkown stream type:"+t[e]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!n){A.b.log("unkown stream type:"+t[e]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:r?-1===l.audio&&(l.audio=s,l.isAAC=!1):A.b.log("MPEG audio found, not supported in this browser for now");break;case 36:A.b.warn("HEVC stream type found, not supported for now");break;default:A.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return l},t.prototype._parsePES=function(t){var e,r,n,i,o,a,s,l,u=0,c=t.data;if(!t||0===t.size)return null;for(;c[0].length<19&&c.length>1;){var d=new Uint8Array(c[0].length+c[1].length);d.set(c[0]),d.set(c[1],c[0].length),c[0]=d,c.splice(1,1)}if(e=c[0],1===(e[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;r=e[7],192&r&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,a>4294967295&&(a-=8589934592),64&r?(s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,s>4294967295&&(s-=8589934592),a-s>54e5&&(A.b.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),i=e[8],l=i+9,t.size-=l,o=new Uint8Array(t.size);for(var h=0,f=c.length;h<f;h++){e=c[h];var p=e.byteLength;if(l){if(l>p){l-=p;continue}e=e.subarray(l),p-=l,l=0}o.set(e,u),u+=p}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&A.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r,n,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(t.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}};t.data=null,l&&s.length&&!a.audFound&&(c(l,a),l=this.avcSample=d(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:n=!0,l||(l=o.avcSample=d(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(u&&s.length>4){var h=new N(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=o.avcSample=d(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,r=new N(o.discardEPB(e.data)),r.readUByte();for(var f=0,p=0,y=!1,v=0;!y&&r.bytesAvailable>1;){f=0;do v=r.readUByte(),f+=v;while(255===v);p=0;do v=r.readUByte(),p+=v;while(255===v);if(4===f&&0!==r.bytesAvailable){if(y=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var g=r.readUByte(),m=r.readUByte(),b=31&g,_=[g,m];for(i=0;i<b;i++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:_})}}else if(p<r.bytesAvailable)for(i=0;i<p;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!a.sps){r=new N(e.data);var T=r.readSPS();a.width=T.width,a.height=T.height,a.pixelRatio=T.pixelRatio,a.sps=[e.data],a.duration=o._duration;var E=e.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var S=E[i].toString(16);S.length<2&&(S="0"+S),w+=S}a.codec=w}break;case 8:n=!0,a.pps||(a.pps=[e.data]);break;case 9:n=!1,a.audFound=!0,l&&c(l,a),l=o.avcSample=d(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&n&&l.units.push(e)}),e&&l&&(c(l,a),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,r,n,i,o,a=0,s=t.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],h=-1;for(-1===u&&(h=0,o=31&t[0],u=0,a=1);a<s;)if(e=t[a++],u)if(1!==u)if(e)if(1===e){if(h>=0)n={data:t.subarray(h,a-u-1),type:o},d.push(n);else{var f=this._getLastNalUnit();if(f&&(c&&a<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),(r=a-u-1)>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(t.subarray(0,r),f.data.byteLength),f.data=p}}a<s?(i=31&t[a],h=a,o=i,u=0):u=-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(h>=0&&u>=0&&(n={data:t.subarray(h,s),type:o,state:u},d.push(n)),0===d.length){var y=this._getLastNalUnit();if(y){var v=new Uint8Array(y.data.byteLength+t.byteLength);v.set(y.data,0),v.set(t,y.data.byteLength),y.data=v}}return l.naluState=u,d},t.prototype.discardEPB=function(t){for(var e,r,n=t.byteLength,i=[],o=1;o<n-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=t[a];return r},t.prototype._parseAACPES=function(t){var e,r,n,i,o,a=this._audioTrack,l=t.data,d=t.pts,f=this.aacOverFlow,p=this.aacLastPTS;if(f){var y=new Uint8Array(f.byteLength+l.byteLength);y.set(f,0),y.set(l,f.byteLength),l=y}for(n=0,o=l.length;n<o-1&&!s(l,n);n++);if(n){var v,g;if(n<o-1?(v="AAC PES did not start with ADTS header,offset:"+n,g=!1):(v="no ADTS header found in AAC PES",g=!0),A.b.warn("parsing error:"+v),this.observer.trigger(S.a.ERROR,{type:k.b.MEDIA_ERROR,details:k.a.FRAG_PARSING_ERROR,fatal:g,reason:v}),g)return}if(u(a,this.observer,l,n,this.audioCodec),r=0,e=c(a.samplerate),f&&p){var m=p+e;Math.abs(m-d)>1&&(A.b.log("AAC: align PTS for overlapping frames by "+Math.round((m-d)/90)),d=m)}for(;n<o;)if(s(l,n)&&n+5<o){var b=h(a,l,n,d,r);if(!b)break;n+=b.length,i=b.sample.pts,r++}else n++;f=n<o?l.subarray(n,o):null,this.aacOverFlow=f,this.aacLastPTS=i},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,i=0,o=t.pts;i<r;)if(M.isHeader(e,i)){var a=M.appendFrame(this._audioTrack,e,i,o,n);if(!a)break;i+=a.length,n++}else i++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),H=G,V=function(){function t(e,r,n){m(this,t),this.observer=e,this.config=n,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,r,n=O.a.getID3Data(t,0);if(n&&void 0!==O.a.getTimeStamp(n))for(e=n.length,r=Math.min(t.length-1,e+100);e<r;e++)if(M.probe(t,e))return A.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,n){for(var i=O.a.getID3Data(t,0),o=O.a.getTimeStamp(i),a=o?90*o:9e4*e,s=i.length,l=t.length,u=0,c=0,d=this._audioTrack,h=[{pts:a,dts:a,data:i}];s<l;)if(M.isHeader(t,s)){var f=M.appendFrame(d,t,s,a,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else O.a.isHeader(t,s)?(i=O.a.getID3Data(t,s),h.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,r,n)},t.prototype.destroy=function(){},t}(),W=V,K=function(){function t(){b(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);
if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),z=K,q=Math.pow(2,32)-1,Y=function(){function t(){_(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,l,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for(e=new Uint8Array(n),e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;i<o;i++)e.set(r[i],n),n+=r[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var n=Math.floor(r/(q+1)),i=Math.floor(r%(q+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var n=Math.floor(r/(q+1)),i=Math.floor(r%(q+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var r,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,o)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,n,i,o=[],a=[];for(r=0;r<e.sps.length;r++)n=e.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)n=e.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,n=e.duration*e.timescale,i=e.width,o=e.height,a=Math.floor(n/(q+1)),s=Math.floor(n%(q+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,r){var n=t.sdtp(e),i=e.id,o=Math.floor(r/(q+1)),a=Math.floor(r%(q+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n,i,o,a,s,l,u=e.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=u[n],o=i.duration,a=i.size,s=i.flags,l=i.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r,n=t.moov(e);return r=new Uint8Array(t.FTYP.byteLength+n.byteLength),r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}(),X=Y,$=function(){function t(e,r,n,i){T(this,t),this.observer=e,this.config=r,this.typeSupported=n;var o=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,n,i,o,a){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var s=t.samples.length,l=e.samples.length,u=i,c=i;if(s&&l){var d=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;u+=Math.max(0,d),c+=Math.max(0,-d)}if(s){t.timescale||(A.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var h=this.remuxAudio(t,u,o,a);if(l){var f=void 0;h&&(f=h.endPTS-h.startPTS),e.timescale||(A.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,c,o,f,a)}}else{var p=void 0;l&&(p=this.remuxVideo(e,c,o,a)),p&&t.codec&&this.remuxEmptyAudio(t,u,o,p)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(S.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var n,i,o=this.observer,a=t.samples,s=e.samples,l=this.typeSupported,u="audio/mp4",c={},d={tracks:c},h=void 0===this._initPTS;if(h&&(n=i=1/0),t.config&&a.length&&(t.timescale=t.samplerate,A.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(u="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),c.audio={container:u,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:X.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(n=i=a[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&s.length){var f=e.inputTimeScale;e.timescale=f,c.video={container:"video/mp4",codec:e.codec,initSegment:X.initSegment([e]),metadata:{width:e.width,height:e.height}},h&&(n=Math.min(n,s[0].pts-f*r),i=Math.min(i,s[0].dts-f*r),this.observer.trigger(S.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(c).length?(o.trigger(S.a.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=i)):o.trigger(S.a.ERROR,{type:k.b.MEDIA_ERROR,details:k.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,n,i){var o,a,s,l,u,c,d,h=8,f=t.timescale,p=t.samples,y=[],v=p.length,g=this._PTSNormalize,m=this._initDTS,b=this.nextAvcDts,_=this.isSafari;_&&(r|=p.length&&b&&(i&&Math.abs(e-b/f)<.1||Math.abs(p[0].pts-b-m)<f/5)),r||(b=e*f),p.forEach(function(t){t.pts=g(t.pts-m,b),t.dts=g(t.dts-m,b)}),p.sort(function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n||t.id-e.id});var T=p.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(T<0){A.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var E=0;E<p.length;E++)p[E].dts+=T}var w=p[0];u=Math.max(w.dts,0),l=Math.max(w.pts,0);var C=Math.round((u-b)/90);r&&C&&(C>1?A.b.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&A.b.log("AVC:"+-C+" ms overlapping between fragments detected"),u=b,p[0].dts=u,l=Math.max(l-C,b),p[0].pts=l,A.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(u/90)+",delta:"+C+" ms")),w=p[p.length-1],d=Math.max(w.dts,0),c=Math.max(w.pts,0,d),_&&(o=Math.round((d-u)/(p.length-1)));for(var O=0,R=0,L=0;L<v;L++){for(var P=p[L],D=P.units,x=D.length,I=0,M=0;M<x;M++)I+=D[M].data.length;R+=I,O+=x,P.length=I,P.dts=_?u+L*o:Math.max(P.dts,u),P.pts=Math.max(P.pts,P.dts)}var j=R+4*O+8;try{a=new Uint8Array(j)}catch(t){return void this.observer.trigger(S.a.ERROR,{type:k.b.MUX_ERROR,details:k.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var N=new DataView(a.buffer);N.setUint32(0,j),a.set(X.types.mdat,4);for(var F=0;F<v;F++){for(var B=p[F],U=B.units,G=0,H=void 0,V=0,W=U.length;V<W;V++){var K=U[V],z=K.data,q=K.data.byteLength;N.setUint32(h,q),h+=4,a.set(z,h),h+=q,G+=4+q}if(_)H=Math.max(0,o*Math.round((B.pts-B.dts)/o));else{if(F<v-1)o=p[F+1].dts-B.dts;else{var Y=this.config,$=B.dts-p[F>0?F-1:F].dts;if(Y.stretchShortVideoTrack){var J=Y.maxBufferHole,Q=Y.maxSeekHole,Z=Math.floor(Math.min(J,Q)*f),tt=(n?l+n*f:this.nextAudioPts)-B.pts;tt>Z?(o=tt-$,o<0&&(o=$),A.b.log("It is approximately "+tt/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=$}else o=$}H=Math.round(B.pts-B.dts)}y.push({size:G,duration:o,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=d+o;var et=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var rt=y[0].flags;rt.dependsOn=2,rt.isNonSync=0}t.samples=y,s=X.moof(t.sequenceNumber++,u,t),t.samples=[];var nt={data1:s,data2:a,startPTS:l/f,endPTS:(c+o)/f,startDTS:u/f,endDTS:this.nextAvcDts/f,type:"video",nb:y.length,dropped:et};return this.observer.trigger(S.a.FRAG_PARSING_DATA,nt),nt},t.prototype.remuxAudio=function(t,e,r,n){var i,o,a,s,l,u,c,d=t.inputTimeScale,h=t.timescale,f=d/h,p=t.isAAC?1024:1152,y=p*f,v=this._PTSNormalize,g=this._initDTS,m=!t.isAAC&&this.typeSupported.mpeg,b=t.samples,_=[],T=this.nextAudioPts;if(r|=b.length&&T&&(n&&Math.abs(e-T/d)<.1||Math.abs(b[0].pts-T-g)<20*y),b.forEach(function(t){t.pts=t.dts=v(t.pts-g,e*d)}),b=b.filter(function(t){return t.pts>=0}),0!==b.length){if(r||(T=n?e*d:b[0].pts),t.isAAC)for(var E=this.config.maxAudioFramesDrift,w=0,C=T;w<b.length;){var O,R=b[w],L=R.pts;O=L-C;var P=Math.abs(1e3*O/d);if(O<=-E*y)A.b.warn("Dropping 1 audio frame @ "+(C/d).toFixed(3)+"s due to "+Math.round(P)+" ms overlap."),b.splice(w,1),t.len-=R.unit.length;else if(O>=E*y&&P<1e4&&C){var D=Math.round(O/y);A.b.warn("Injecting "+D+" audio frame @ "+(C/d).toFixed(3)+"s due to "+Math.round(1e3*O/d)+" ms gap.");for(var x=0;x<D;x++){var I=Math.max(C,0);a=z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=R.unit.subarray()),b.splice(w,0,{unit:a,pts:I,dts:I}),t.len+=a.length,C+=y,w++}R.pts=R.dts=C,C+=y,w++}else Math.abs(O),R.pts=R.dts=C,C+=y,w++}for(var M=0,j=b.length;M<j;M++){var N=b[M],F=N.unit,B=N.pts;if(void 0!==c)o.duration=Math.round((B-c)/f);else{var U=Math.round(1e3*(B-T)/d),G=0;if(r&&t.isAAC&&U){if(U>0&&U<1e4)G=Math.round((B-T)/y),A.b.log(U+" ms hole between AAC samples detected,filling it"),G>0&&(a=z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(a=F.subarray()),t.len+=G*a.length);else if(U<-12){A.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/d).toFixed(3)+"s/"+(B/d).toFixed(3)+"s/"+-U+"ms"),t.len-=F.byteLength;continue}B=T}if(u=B,!(t.len>0))return;var H=m?t.len:t.len+8;i=m?0:8;try{s=new Uint8Array(H)}catch(t){return void this.observer.trigger(S.a.ERROR,{type:k.b.MUX_ERROR,details:k.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}m||(new DataView(s.buffer).setUint32(0,H),s.set(X.types.mdat,4));for(var V=0;V<G;V++)a=z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=F.subarray()),s.set(a,i),i+=a.byteLength,o={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o)}s.set(F,i);var W=F.byteLength;i+=W,o={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o),c=B}var K=0,q=_.length;if(q>=2&&(K=_[q-2].duration,o.duration=K),q){this.nextAudioPts=T=c+f*K,t.len=0,t.samples=_,l=m?new Uint8Array:X.moof(t.sequenceNumber++,u/f,t),t.samples=[];var Y=u/d,$=T/d,J={data1:l,data2:s,startPTS:Y,endPTS:$,startDTS:Y,endDTS:$,type:"audio",nb:q};return this.observer.trigger(S.a.FRAG_PARSING_DATA,J),J}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,n){var i=t.inputTimeScale,o=t.samplerate?t.samplerate:i,a=i/o,s=this.nextAudioPts,l=(void 0!==s?s:n.startDTS*i)+this._initDTS,u=n.endDTS*i+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(A.b.warn("remux empty Audio"),!h)return void A.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var f=[],p=0;p<d;p++){var y=l+p*c;f.push({unit:h,pts:y,dts:y}),t.len+=h.length}t.samples=f,this.remuxAudio(t,e,r)},t.prototype.remuxID3=function(t,e){var r,n=t.samples.length,i=t.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)r=t.samples[s],r.pts=(r.pts-o)/i,r.dts=(r.dts-a)/i;this.observer.trigger(S.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r,n=t.samples.length,i=t.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)r=t.samples[a],r.pts=(r.pts-o)/i;this.observer.trigger(S.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}(),J=$,Q=function(){function t(e){E(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,n,i,o,a,s){var l=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),l.trigger(S.a.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:u,nb:1,dropped:0}),l.trigger(S.a.FRAG_PARSED)},t}(),Z=Q,tt=function(){function t(e,r,n,i){w(this,t),this.observer=e,this.typeSupported=r,this.config=n,this.vendor=i}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,n,i,o,a,s,l,u,c,d){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var h=this.decrypter;null==h&&(h=this.decrypter=new C.a(this.observer,this.config));var f,p=this;try{f=performance.now()}catch(t){f=Date.now()}h.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var h;try{h=performance.now()}catch(t){h=Date.now()}p.observer.trigger(S.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:h}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),n,i,o,a,s,l,u,c,d)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),n,i,o,a,s,l,u,c,d)},t.prototype.pushDecrypted=function(t,e,r,n,i,o,a,s,l,u,c,d){var h=this.demuxer;if(!h||a&&!this.probe(t)){for(var f=this.observer,p=this.typeSupported,y=this.config,v=[{demux:H,remux:J},{demux:x,remux:Z},{demux:L,remux:J},{demux:W,remux:J}],g=0,m=v.length;g<m;g++){var b=v[g],_=b.demux.probe;if(_(t)){var T=this.remuxer=new b.remux(f,y,p,this.vendor);h=new b.demux(f,T,y,p),this.probe=_;break}}if(!h)return void f.trigger(S.a.ERROR,{type:k.b.MEDIA_ERROR,details:k.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var E=this.remuxer;(a||s)&&(h.resetInitSegment(r,n,i,u),E.resetInitSegment()),a&&(h.resetTimeStamp(d),E.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,o,l,c)},t}();e.a=tt},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=Gt[e];return!!r&&!0===r[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)return null;for(var r=null,n=0;n<t.length;n++){var i=t[n];i.id===e&&(r=i)}return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function g(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e,r){var n=t[e],i=t[r],o=i.startPTS;isNaN(o)?i.start=r>e?n.start+n.duration:Math.max(n.start-i.duration,0):r>e?(n.duration=o-n.start,n.duration<0&&xt.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-o,i.duration<0&&xt.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function _(t,e,r,n,i,o){var a=r;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-r);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),a=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),n=Math.max(n,e.endPTS),i=Math.min(i,e.startDTS),o=Math.max(o,e.endDTS)}var l=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=a,e.endPTS=n,e.startDTS=i,e.endDTS=o,e.duration=n-r;var u=e.sn;if(!t||u<t.startSN||u>t.endSN)return 0;var c,d,h;for(c=u-t.startSN,d=t.fragments,d[c]=e,h=c;h>0;h--)b(d,h,h-1);for(h=c;h<d.length-1;h++)b(d,h,h+1);return t.PTSKnown=!0,l}function T(t,e){var r,n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,o=e.startSN-t.startSN,a=t.fragments,s=e.fragments,l=0;if(i<n)return void(e.PTSKnown=!1);for(var u=n;u<=i;u++){var c=a[o+u],d=s[u];d&&c&&(l=c.cc-d.cc,isNaN(c.startPTS)||(d.start=d.startPTS=c.startPTS,d.endPTS=c.endPTS,d.duration=c.duration,d.backtracked=c.backtracked,d.dropped=c.dropped,r=d))}if(l)for(xt.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<s.length;u++)s[u].cc+=l;if(r)_(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(o>=0&&o<a.length){var h=a[o].start;for(u=0;u<s.length;u++)s[u].start+=h}e.PTSKnown=t.PTSKnown}function E(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}function w(t,e){return re.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function S(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}function k(t,e){var r=t.fragments,n=e.fragments;if(!n.length||!r.length)return void xt.b.log("No fragments to align");var i=E(r,n[0].cc);return!i||i&&!i.startPTS?void xt.b.log("No frag in previous level to align on"):i}function C(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function A(t,e,r){if(S(t,e,r)){var n=k(e.details,r);n&&(xt.b.log("Adjusting PTS using last level due to CC increase within current level"),C(n.start,r))}if(!1===r.PTSKnown&&e&&e.details){var i=e.details.programDateTime,o=r.programDateTime,a=(o-i)/1e3+e.details.fragments[0].start;isNaN(a)||(xt.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),C(a,r))}}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function L(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function N(){var t=g(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!n}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function H(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function K(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function J(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function it(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ot(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new $e,this.regionList=[]}function at(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function st(){this.values=Object.create(null)}function lt(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],l=a[1];e(s,l)}}}function ut(t,e,r){function n(){var e=at(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}var o=t;if(i(),e.startTime=n(),i(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);t=t.substr(3),i(),e.endTime=n(),i(),function(t,e){var n=new st;lt(t,function(t,e){switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){n.set(t,r[i].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",Qe,"end"]);break;case"position":o=e.split(","),n.percent(t,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",Qe,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",Qe,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===Je.line&&(i=-1),e.line=i,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",Qe);var o=n.get("position","auto");"auto"===o&&50===Je.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}(t,e)}function ct(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function dt(t,e,r,n){for(var i,o,a,s,l,u=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(i=n.rows[c],a=!0,s=0,l="",!i.isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&a?s++:(l+=i.chars[d].uchar,a=!1);i.cueStartTime=e,e===r&&(r+=1e-4),o=new u(e,r,ct(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=c>7?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function vt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{
value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function gt(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function mt(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function bt(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wt(t){for(var e=[],r=0;r<t.length;r++)"subtitles"===t[r].kind&&e.push(t[r]);return e}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var Ot={};r.d(Ot,"newCue",function(){return dt});var Rt=r(6),Lt=r.n(Rt),Pt=r(1),Dt=r(2),xt=r(0),It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt=function(){function t(e){n(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===It(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var r=function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)};try{r.call(this,t,e).call()}catch(e){xt.b.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),jt=Mt,Nt=/^(\d+)x(\d+)$/,Ft=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Bt=function(){function t(e){i(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=Nt.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(Ft.lastIndex=0;null!==(e=Ft.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[e[1]]=n}return r},t}(),Ut=Bt,Gt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Ht=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Vt=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Wt=/#EXT-X-MEDIA:(.*)/g,Kt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),zt=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,qt=function(){function t(){u(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return Ht(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Lt.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),Yt=function(){function t(){u(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new qt,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},Ht(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Lt.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),Xt=function(t){function e(r){u(this,e);var n=s(this,t.call(this,r,Pt.a.MANIFEST_LOADING,Pt.a.LEVEL_LOADING,Pt.a.AUDIO_TRACK_LOADING,Pt.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return l(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},jt.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var r=this.loaders[e.type];if(void 0!==r){var n=r.context;if(n&&n.url===t)return void xt.b.trace("playlist request ongoing");xt.b.warn("abort previous loader for type:"+e.type),r.abort()}var i=this.hls.config,o=void 0,a=void 0,s=void 0,l=void 0;"manifest"===e.type?(o=i.manifestLoadingMaxRetry,a=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,l=i.manifestLoadingMaxRetryTimeout):"level"===e.type?(o=0,a=i.levelLoadingTimeOut):(o=i.levelLoadingMaxRetry,a=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,l=i.levelLoadingMaxRetryTimeout,xt.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),r=this.loaders[e.type]=e.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),e.url=t,e.responseType="";var u=void 0,c=void 0;u={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(e,u,c)},e.prototype.resolve=function(t,e){return Lt.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){var r=[],n=void 0;for(Vt.lastIndex=0;null!=(n=Vt.exec(t));){var i={},a=i.attrs=new Ut(n[1]);i.url=this.resolve(n[2],e);var s=a.decimalResolution("RESOLUTION");s&&(i.width=s.width,i.height=s.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,function(t,e){["video","audio"].forEach(function(r){var n=t.filter(function(t){return o(t,r)});if(n.length){var i=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}([].concat((a.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=this.avc1toavcoti(i.videoCodec)),r.push(i)}return r},e.prototype.parseMasterPlaylistMedia=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=void 0,o=[],a=0;for(Wt.lastIndex=0;null!==(i=Wt.exec(t));){var s={},l=new Ut(i[1]);if(l.TYPE===r){if(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=r,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,e)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),n.length){var u=c(n,s.groupId);s.audioCodec=u?u.codec:n[0].codec}s.id=a++,o.push(s)}}return o},e.prototype.avc1toavcoti=function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,r,n){var i,o,a=0,s=0,l={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},u=new qt,c=0,d=null,h=new Yt;for(Kt.lastIndex=0;null!==(i=Kt.exec(t));){var f=i[1];if(f){h.duration=parseFloat(f);var p=(" "+i[2]).slice(1);h.title=p||null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(i[3]){if(!isNaN(h.duration)){var y=a++;h.type=n,h.start=s,h.levelkey=u,h.sn=y,h.level=r,h.cc=c,h.baseurl=e,h.relurl=(" "+i[3]).slice(1),l.fragments.push(h),d=h,s+=h.duration,h=new Yt}}else if(i[4]){if(h.rawByteRange=(" "+i[4]).slice(1),d){var v=d.byteRangeEndOffset;v&&(h.lastByteRangeEndOffset=v)}}else if(i[5])h.rawProgramDateTime=(" "+i[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(i[5]))-1e3*s));else{for(i=i[0].match(zt),o=1;o<i.length&&void 0===i[o];o++);var g=(" "+i[o+1]).slice(1),m=(" "+i[o+2]).slice(1);switch(i[o]){case"#":h.tagList.push(m?[g,m]:[g]);break;case"PLAYLIST-TYPE":l.type=g.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(g);break;case"TARGETDURATION":l.targetduration=parseFloat(g);break;case"VERSION":l.version=parseInt(g);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(g);break;case"KEY":var b=g,_=new Ut(b),T=_.enumeratedString("METHOD"),E=_.URI,w=_.hexadecimalInteger("IV");T&&(u=new qt,E&&["AES-128","SAMPLE-AES"].indexOf(T)>=0&&(u.method=T,u.baseuri=e,u.reluri=E,u.key=null,u.iv=w));break;case"START":var S=g,k=new Ut(S),C=k.decimalFloatingPoint("TIME-OFFSET");isNaN(C)||(l.startTimeOffset=C);break;case"MAP":var A=new Ut(g);h.relurl=A.URI,h.rawByteRange=A.BYTERANGE,h.baseurl=e,h.level=r,h.type=n,h.sn="initSegment",l.initSegment=h,h=new Yt;break;default:xt.b.warn("line parsed but not handled: "+i)}}}return h=d,h&&!h.relurl&&(l.fragments.pop(),s-=h.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=c,l},e.prototype.loadsuccess=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.data,o=t.url,a=r.type,s=r.id,l=r.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=r.url),e.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var c="audioTrack"!==a&&"subtitleTrack"!==a,d=isNaN(l)?isNaN(s)?0:s:l,h=this.parseLevelPlaylist(i,o,d,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");h.tload=e.tload,"manifest"===a&&u.trigger(Pt.a.MANIFEST_LOADED,{levels:[{url:o,details:h}],audioTracks:[],url:o,stats:e,networkDetails:n}),e.tparsed=performance.now(),h.targetduration?c?u.trigger(Pt.a.LEVEL_LOADED,{details:h,level:l||0,id:s||0,stats:e,networkDetails:n}):"audioTrack"===a?u.trigger(Pt.a.AUDIO_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):"subtitleTrack"===a&&u.trigger(Pt.a.SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):u.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:n})}else{var f=this.parseMasterPlaylist(i,o);if(f.length){var p=f.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),y=this.parseMasterPlaylistMedia(i,o,"AUDIO",p),v=this.parseMasterPlaylistMedia(i,o,"SUBTITLES");if(y.length){var g=!1;y.forEach(function(t){t.url||(g=!0)}),!1===g&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(xt.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main"}))}u.trigger(Pt.a.MANIFEST_LOADED,{levels:f,audioTracks:y,subtitles:v,url:o,stats:e,networkDetails:n})}else u.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:n})}else u.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:n})},e.prototype.loaderror=function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":r=Dt.a.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=Dt.a.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=Dt.a.AUDIO_TRACK_LOAD_ERROR,n=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:r,fatal:n,url:o.url,loader:o,response:t,context:e,networkDetails:i})},e.prototype.loadtimeout=function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":r=Dt.a.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=Dt.a.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=Dt.a.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:r,fatal:n,url:o.url,loader:o,context:e,networkDetails:i})},e}(jt),$t=Xt,Jt=function(t){function e(r){d(this,e);var n=h(this,t.call(this,r,Pt.a.FRAG_LOADING));return n.loaders={},n}return f(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var r=t[e];r&&r.destroy()}this.loaders={},jt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=this.hls.config;e.loaded=0,n&&(xt.b.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=e.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var o=void 0,a=void 0,s=void 0;o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var l=e.byteRangeStartOffset,u=e.byteRangeEndOffset;isNaN(l)||isNaN(u)||(o.rangeStart=l,o.rangeEnd=u),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,s)},e.prototype.loadsuccess=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.data,o=r.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(Pt.a.FRAG_LOADED,{payload:i,frag:o,stats:e,networkDetails:n})},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},e.prototype.loadprogress=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.frag;i.loaded=t.loaded,this.hls.trigger(Pt.a.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:n})},e}(jt),Qt=Jt,Zt=function(t){function e(r){p(this,e);var n=y(this,t.call(this,r,Pt.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return v(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},jt.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=e.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;n&&(xt.b.warn("abort previous key loader for type:"+r),n.abort()),e.loader=this.loaders[r]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,u=void 0;s={url:o,frag:e,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(Pt.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(Pt.a.KEY_LOADED,{frag:n})},e.prototype.loaderror=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Pt.a.ERROR,{type:Dt.b.NETWORK_ERROR,details:Dt.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(jt),te=Zt,ee={search:function(t,e){for(var r=0,n=t.length-1,i=null,o=null;r<=n;){i=(r+n)/2|0,o=t[i];var a=e(o);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}},re=ee,ne={isBuffered:function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(t){}return!1},bufferInfo:function(t,e,r){try{if(t){var n,i=t.buffered,o=[];for(n=0;n<i.length;n++)o.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(o,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,r){var n,i,o,a,s,l=[];for(t.sort(function(t,e){var r=t.start-e.start;return r||e.end-t.end}),s=0;s<t.length;s++){var u=l.length;if(u){var c=l[u-1].end;t[s].start-c<r?t[s].end>c&&(l[u-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,n=0,i=o=e;s<l.length;s++){var d=l[s].start,h=l[s].end;if(e+r>=d&&e<h)i=d,o=h,n=o-e;else if(e+r<d){a=d;break}}return{len:n,start:i,end:o,nextStart:a}}},ie=ne,oe=r(7),ae=r(5),se=r.n(ae),le=r(9),ue=r.n(le),ce=g(),de=function(){function t(e,r){m(this,t),this.hls=e,this.id=r;var n=this.observer=new se.a,i=e.config;n.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.emit.apply(n,[t,t].concat(r))},n.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[t].concat(r))};var o=function(t,r){r=r||{},r.frag=this.frag,r.id=this.id,e.trigger(t,r)}.bind(this);n.on(Pt.a.FRAG_DECRYPTED,o),n.on(Pt.a.FRAG_PARSING_INIT_SEGMENT,o),n.on(Pt.a.FRAG_PARSING_DATA,o),n.on(Pt.a.FRAG_PARSED,o),n.on(Pt.a.ERROR,o),n.on(Pt.a.FRAG_PARSING_METADATA,o),n.on(Pt.a.FRAG_PARSING_USERDATA,o),n.on(Pt.a.INIT_PTS_FOUND,o);var a={mp4:ce.isTypeSupported("video/mp4"),mpeg:ce.isTypeSupported("audio/mpeg"),mp3:ce.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){xt.b.log("demuxing in webworker");var l=void 0;try{l=this.w=ue()(10),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(t){e.trigger(Pt.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:a,vendor:s,id:r,config:JSON.stringify(i)})}catch(t){xt.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new oe.a(n,a,i,s),this.w=void 0}}else this.demuxer=new oe.a(n,a,i,s)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,r,n,i,o,a,s){var l=this.w,u=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,d=this.frag,h=!(d&&i.cc===d.cc),f=!(d&&i.level===d.level),p=d&&i.sn===d.sn+1,y=!f&&p;if(h&&xt.b.log(this.id+":discontinuity detected"),f&&xt.b.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:r,videoCodec:n,timeOffset:u,discontinuity:h,trackSwitch:f,contiguous:y,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var v=this.demuxer;v&&v.push(t,c,e,r,n,u,h,f,y,o,a,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case Pt.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}(),he=de,fe={toString:function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}},pe=fe,ye=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ve={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},ge=function(t){function e(r){O(this,e);var n=R(this,t.call(this,r,Pt.a.MEDIA_ATTACHED,Pt.a.MEDIA_DETACHING,Pt.a.MANIFEST_LOADING,Pt.a.MANIFEST_PARSED,Pt.a.LEVEL_LOADED,Pt.a.KEY_LOADED,Pt.a.FRAG_LOADED,Pt.a.FRAG_LOAD_EMERGENCY_ABORTED,Pt.a.FRAG_PARSING_INIT_SEGMENT,Pt.a.FRAG_PARSING_DATA,Pt.a.FRAG_PARSED,Pt.a.ERROR,Pt.a.AUDIO_TRACK_SWITCHING,Pt.a.AUDIO_TRACK_SWITCHED,Pt.a.BUFFER_CREATED,Pt.a.BUFFER_APPENDED,Pt.a.BUFFER_FLUSHED));return n.config=r.config,n.audioCodecSwap=!1,n.ticks=0,n._state=ve.STOPPED,n.ontick=n.tick.bind(n),n}return L(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),jt.prototype.destroy.call(this),this.state=ve.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(xt.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=ve.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ve.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ve.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case ve.ERROR:break;case ve.BUFFER_FLUSHING:this.fragLoadError=0;break;case ve.IDLE:this._doTickIdle();break;case ve.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ve.IDLE);break;case ve.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(xt.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ve.IDLE);break;case ve.ERROR:case ve.STOPPED:case ve.FRAG_LOADING:case ve.PARSING:case ve.PARSED:case ve.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,o=this.levels[i];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=ie.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,e.maxBufferHole),u=l.len;if(!(u>=s)){xt.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var c=o.details;if(void 0===c||!0===c.live&&this.levelLastLoaded!==i)return void(this.state=ve.WAITING_LEVEL);var d=this.fragPrevious;if(!c.live&&d&&!d.backtracked&&d.sn===c.endSN&&!l.nextStart&&Math.min(r.duration,d.start+d.duration)-Math.max(l.end,d.start)<=Math.max(.2,d.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(Pt.a.BUFFER_EOS,h),void(this.state=ve.ENDED)}this._fetchPayloadOrEos(n,l,c)}}}},e.prototype._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,u=e.end,c=void 0;if(r.initSegment&&!r.initSegment.data)c=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void xt.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(c=this._ensureFragmentAtLivePoint(r,u,s,l,n,o,a)))return}else u<s&&(c=o[0]);c||(c=this._findFragment(s,n,a,o,u,l,r)),c&&this._loadFragmentOrKey(c,i,r,t,u)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,r,n,i,o,a){var s=this.hls.config,l=this.media,u=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-s.maxFragLookUpTolerance,n-c)){var d=this.liveSyncPosition=this.computeLivePosition(r,t);xt.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&e>n&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(i){var h=i.sn+1;if(h>=t.startSN&&h<=t.endSN){var f=o[h-t.startSN];i.cc===f.cc&&(u=f,xt.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=re.search(o,function(t){return i.cc-t.cc}))&&xt.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=o[Math.min(a-1,Math.round(a/2))],xt.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},e.prototype._findFragment=function(t,e,r,n,i,o,a){var s=this.hls.config,l=void 0,u=void 0,c=s.maxFragLookUpTolerance,d=e?n[e.sn-n[0].sn+1]:void 0,h=function(t){var e=Math.min(c,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=i?1:t.start-e>i&&t.start?-1:0};if(i<o?(i>o-c&&(c=0),u=d&&!h(d)?d:re.search(n,h)):u=n[r-1],u){l=u;var f=l.sn-a.startSN,p=e&&l.level===e.level,y=n[f-1],v=n[f+1];if(e&&l.sn===e.sn)if(p&&!l.backtracked)if(l.sn<a.endSN){var g=e.deltaPTS;g&&g>s.maxBufferHole&&e.dropped&&f?(l=y,xt.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(l=v,xt.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(v&&v.backtracked?(xt.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+v.sn),l=v):(xt.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,y?(y.loadCounter&&y.loadCounter--,l=y,l.backtracked=!0):f&&(l=null)))}return l},e.prototype._loadFragmentOrKey=function(t,e,r,n,i){var o=this.hls,a=o.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(xt.b.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=a.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return void o.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),o.trigger(Pt.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new he(o,"main")),void(this.state=ve.FRAG_LOADING)}xt.b.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e),this.state=ve.KEY_LOADING,o.trigger(Pt.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return re.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(e=r.currentTime,e>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),ie.isBuffered(r,e)?t=this.getBufferedFrag(e):ie.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(Pt.a.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(Pt.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},e.prototype.immediateLevelSwitch=function(){if(xt.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),
this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,ie.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,r=void 0,n=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),r=this.getBufferedFrag(t.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((n=this.getBufferedFrag(t.currentTime+e))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=ve.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(Pt.a.BUFFER_FLUSHING,r)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(xt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;isNaN(e)||xt.b.log("media seeking to "+e.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:t,i=ie.bufferInfo(n,e,this.config.maxBufferHole);if(this.state===ve.FRAG_LOADING){var o=this.fragCurrent;if(0===i.len&&o){var a=r.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;e<s||e>l?(o.loader&&(xt.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ve.IDLE):xt.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ve.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=ve.IDLE);t&&(this.lastCurrentTime=e),this.state!==ve.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||xt.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){xt.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){xt.b.log("trigger BUFFER_RESET"),this.hls.trigger(Pt.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&xt.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],o=e.totalduration,a=0;if(xt.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var s=i.details;s&&e.fragments.length>0?(T(s,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),e.PTSKnown&&!isNaN(a)?xt.b.log("live playlist sliding:"+a.toFixed(3)):(xt.b.log("live playlist - outdated PTS, unknown sliding"),A(this.fragPrevious,n,e))):(xt.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,A(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=r,this.hls.trigger(Pt.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(a,e),xt.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(xt.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+o+l),xt.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ve.WAITING_LEVEL&&(this.state=ve.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ve.KEY_LOADING&&(this.state=ve.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===ve.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var n=t.stats,i=this.levels[e.level],o=i.details;if(xt.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=n,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=ve.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(Pt.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=ve.IDLE,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(Pt.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=ve.PARSING;var a=o.totalduration,s=e.level,l=e.sn,u=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(xt.b.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,xt.b.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+e.cc);var c=this.demuxer;c||(c=this.demuxer=new he(this.hls,"main"));var d=this.media,h=d&&d.seeking,f=!h&&(o.PTSKnown||!o.live),p=o.initSegment?o.initSegment.data:[];c.push(t.payload,p,u,i.videoCodec,e,a,f,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ve.PARSING){var n,i,o=t.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(xt.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",xt.b.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=t.id}i=o.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(Pt.a.BUFFER_CODECS,o);for(n in o){i=o[n],xt.b.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Pt.a.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,n=t.frag;if(r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===ve.PARSING){var i=this.levels[this.level],o=r;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),xt.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped)if(o.backtracked)xt.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=i.details;if(!a||o.sn!==a.startSN)return xt.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ve.IDLE,this.fragPrevious=o,void this.tick();xt.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var s=_(i.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(Pt.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(r){r&&r.length&&e.state===ve.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(Pt.a.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ve.PARSING&&(this.stats.tparsed=performance.now(),this.state=ve.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){xt.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(xt.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ve.IDLE}var i=this.hls;i.trigger(Pt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(Pt.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(xt.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,n=void 0,i=!1;for(var o in e){var a=e[o];"main"===a.id?(n=o,r=a,"video"===o&&(this.videoBuffer=e[o].buffer)):i=!0}i&&r?(xt.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ve.PARSING&&e!==ve.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ve.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;xt.b.log("main buffered : "+pe.toString(e.buffered));var r=this._bufferedFrags.filter(function(t){return ie.isBuffered(e,(t.startPTS+t.endPTS)/2)});r.push(t),this._bufferedFrags=r.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(Pt.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=ve.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&ie.isBuffered(this.media,this.media.currentTime)&&ie.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,xt.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ve.FRAG_LOADING_WAITING_RETRY}else xt.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ve.ERROR;break;case Dt.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(r?(this._reduceMaxBufferLength(e.duration),this.state=ve.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=ve.ERROR));break;case Dt.a.LEVEL_LOAD_ERROR:case Dt.a.LEVEL_LOAD_TIMEOUT:this.state!==ve.ERROR&&(t.fatal?(this.state=ve.ERROR,xt.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ve.WAITING_LEVEL||(this.state=ve.IDLE));break;case Dt.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ve.PARSING&&this.state!==ve.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ve.IDLE):(xt.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,xt.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var r=t.currentTime,n=this.mediaBuffer?this.mediaBuffer:t,i=n.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var o=t.seeking?r:this.startPosition,a=ie.isBuffered(n,o),s=i.start(0),l=!a&&Math.abs(o-s)<e.maxSeekHole;(r!==o||l)&&(xt.b.log("target start position:"+o),l&&(o=s,xt.b.log("target start position not buffered, seek to buffered.start(0) "+o)),xt.b.log("adjust currentTime from "+r+" to "+o),t.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=ie.bufferInfo(t,r,0),c=!(t.paused||t.ended||0===t.buffered.length),d=r!==this.lastCurrentTime;if(d)this.stallReported&&(xt.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(c){var h=performance.now(),f=this.hls;if(this.stalled){var p=h-this.stalled,y=u.len,v=this.nudgeRetry||0;if(y<=.5&&p>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,xt.b.warn("playback stalling in low buffer @"+r),f.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:y}));var g=u.nextStart,m=g-r;if(g&&m<e.maxSeekHole&&m>0){this.nudgeRetry=++v;var b=v*e.nudgeOffset;xt.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+g+" + nudge "+b),t.currentTime=g+b,this.stalled=void 0,f.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:g+b-r})}}else if(y>.5&&p>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,xt.b.warn("playback stalling in high buffer @"+r),f.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:y})),this.stalled=void 0,this.nudgeRetry=++v,v<e.nudgeMaxRetry){var _=t.currentTime,T=_+v*e.nudgeOffset;xt.b.log("adjust currentTime from "+_+" to "+T),t.currentTime=T,f.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else xt.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),f.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=ve.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return ie.isBuffered(t,(e.startPTS+e.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=ve.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},ye(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,xt.b.log("main stream:"+e+"->"+t),this.hls.trigger(Pt.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(jt),me=ge,be=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_e=function(t){function e(r){P(this,e);var n=D(this,t.call(this,r,Pt.a.MANIFEST_LOADED,Pt.a.LEVEL_LOADED,Pt.a.FRAG_LOADED,Pt.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return x(e,t),e.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],r=void 0,n={},i=null,o=!1,s=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===l&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),i=n[t.bitrate],void 0===i?(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)):i.url.push(t.url)}),!0===o&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||a(e))&&(!r||a(r))}),t.audioTracks&&(u=t.audioTracks.filter(function(t){return!t.audioCodec||a(t.audioCodec,"audio")})),e.length>0){r=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var c=0;c<e.length;c++)if(e[c].bitrate===r){this._firstLevel=c,xt.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(Pt.a.MANIFEST_PARSED,{levels:e,audioTracks:u,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:u.length>0})}else this.hls.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){xt.b.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,r.trigger(Pt.a.LEVEL_SWITCH,n),r.trigger(Pt.a.LEVEL_SWITCHING,n)}var i=e[t],o=i.details;if(!o||!0===o.live){var a=i.urlId;r.trigger(Pt.a.LEVEL_LOADING,{url:i.url[a],level:t,id:a})}}else r.trigger(Pt.a.ERROR,{type:Dt.b.OTHER_ERROR,details:Dt.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(!0===t.fatal)return void(t.type===Dt.b.NETWORK_ERROR&&this.cleanTimer());var e=!1,r=!1,n=void 0;switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:case Dt.a.FRAG_LOOP_LOADING_ERROR:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:n=t.frag.level,r=!0;break;case Dt.a.LEVEL_LOAD_ERROR:case Dt.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case Dt.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,r)},e.prototype.recoverLevel=function(t,e,r,n){var i=this,o=this.hls.config,a=t.details,s=this._levels[e],l=void 0,u=void 0,c=void 0;if(s.loadError++,s.fragmentError=n,!0===r){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return xt.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},u),t.levelRetry=!0,this.levelRetryCount++,xt.b.warn("level controller, "+a+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}!0!==r&&!0!==n||(l=s.url.length,l>1&&s.loadError<l?(xt.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(c=0===e?this._levels.length-1:e-1,xt.b.warn("level controller, "+a+": switch to "+c),this.hls.nextAutoLevel=this.currentLevelIndex=c):!0===n&&(xt.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var n=this._levels[r];!1===n.fragmentError&&(n.loadError=0,this.levelRetryCount=0);var i=t.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=n.details;a&&i.endSN===a.endSN&&(o/=2,xt.b.log("same live playlist, reload twice faster")),o-=performance.now()-t.stats.trequest,o=Math.max(1e3,Math.round(o)),xt.b.log("live playlist, reload in "+o+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},o)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&t.url.length>0&&(e=t.urlId,this.hls.trigger(Pt.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},be(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(jt),Te=_e,Ee=r(3),we=function(t){function e(r){I(this,e);var n=M(this,t.call(this,r,Pt.a.MEDIA_ATTACHED,Pt.a.MEDIA_DETACHING,Pt.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return j(e,t),e.prototype.destroy=function(){jt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=Ee.a.getID3Frames(r[i].data);if(o){var a=r[i].pts,s=i<r.length-1?r[i+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var l=0;l<o.length;l++){var u=o[l];if(!Ee.a.isTimeStampFrame(u)){var c=new n(a,s,"");c.value=u,this.id3Track.addCue(c)}}}}},e}(jt),Se=we,ke=function(){function t(e){F(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Ce=ke,Ae=function(){function t(e,r,n,i){B(this,t),this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ce(r),this.fast_=new Ce(n)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var r=8e3*e/t,n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),Oe=Ae,Re=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Le=function(t){function e(r){U(this,e);var n=G(this,t.call(this,r,Pt.a.FRAG_LOADING,Pt.a.FRAG_LOADED,Pt.a.FRAG_BUFFERED,Pt.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=r,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return H(e,t),e.prototype.destroy=function(){this.clearTimer(),jt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,n=t.frag.level,i=r.levels[n].details.live,o=r.config,a=void 0,s=void 0;i?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new Oe(r,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent,n=r.loader,i=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return xt.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=n.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*r.duration/s){var l=t.levels,u=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),c=l[r.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,h=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*d/8)),f=e.currentTime,p=(h-o.loaded)/u,y=(ie.bufferInfo(e,f,t.config.maxBufferHole).end-f)/s;if(y<2*r.duration/s&&p>y){var v=void 0,g=void 0;for(g=r.level-1;g>i;g--){var m=l[g].realBitrate?Math.max(l[g].realBitrate,l[g].bitrate):l[g].bitrate;if((v=r.duration*m/(6.4*u))<y)break}v<p&&(xt.b.warn("loading too slow, abort fragment loading and switch to level "+g+":fragLoadedDelay["+g+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+p.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=g,this._bwEstimator.sample(a,o.loaded),n.abort(),this.clearTimer(),t.trigger(Pt.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],n=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,i=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!(!0===e.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&e.tload!==e.tbuffered)){var n=e.tparsed-e.trequest;xt.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,r,n,i,o,a,s,l){for(var u=i;u>=n;u--){var c=l[u],d=c.details,h=d?d.totalduration/d.fragments.length:e,f=!!d&&d.live,p=void 0;p=u<=t?a*r:s*r;var y=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=y*h/p;if(xt.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+y+"/"+h+"/"+o+"/"+v),p>y&&(!v||f&&!this.bitrateTestDelay||v<o))return u}return-1},Re(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(ie.bufferInfo(o,l,n.maxBufferHole).end-l)/u,h=this._findBestLevel(a,s,c,i,e,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;xt.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,p=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(0===d){var v=this.bitrateTestDelay;v&&(f=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-v,xt.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=y=1)}return h=this._findBestLevel(a,s,c,i,e,d+f,p,y,r),Math.max(h,0)}}]),e}(jt),Pe=Le,De=g(),xe=function(t){function e(r){V(this,e);var n=W(this,t.call(this,r,Pt.a.MEDIA_ATTACHING,Pt.a.MEDIA_DETACHING,Pt.a.MANIFEST_PARSED,Pt.a.BUFFER_RESET,Pt.a.BUFFER_APPENDING,Pt.a.BUFFER_CODECS,Pt.a.BUFFER_EOS,Pt.a.BUFFER_FLUSHING,Pt.a.LEVEL_PTS_UPDATED,Pt.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return K(e,t),e.prototype.destroy=function(){jt.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-t.start)>.1){var i=n.updating;try{n.abort()}catch(t){i=!0,xt.b.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(xt.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.audio,n=0;t.altAudio&&(e||r)&&(n=(e?1:0)+(r?1:0),xt.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new De;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),
this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(r),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){xt.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){xt.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):xt.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(Pt.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){xt.b.log("media source opened"),this.hls.trigger(Pt.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){xt.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){xt.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;xt.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0);this.hls.trigger(Pt.a.BUFFER_APPENDED,{parent:e,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){xt.b.error("sourceBuffer error:",t),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var n in t)if(!e[n]){var i=t[n],o=i.levelCodec||i.codec,a=i.container+";codecs="+o;xt.b.log("creating sourceBuffer("+a+")");try{var s=e[n]=r.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:i.container},i.buffer=s}catch(t){xt.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(Pt.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){xt.b.error("sourceBuffer error:",t.event),this.hls.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,xt.b.log(n+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var r in t){var n=t[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}xt.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){xt.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(xt.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(xt.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var n in r)e+=r[n].buffered.length}catch(t){xt.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(Pt.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void xt.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var i=n.type,o=e[i];o?o.updating?r.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){xt.b.error("error while trying to append buffer:"+e.message),r.unshift(n);var a={type:Dt.b.MEDIA_ERROR,parent:n.parent};if(22===e.code)return this.segments=[],a.details=Dt.a.BUFFER_FULL_ERROR,a.fatal=!1,void t.trigger(Pt.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=Dt.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return xt.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],a.fatal=!0,void t.trigger(Pt.a.ERROR,a);a.fatal=!1,t.trigger(Pt.a.ERROR,a)}}}},e.prototype.flushBuffer=function(t,e,r){var n,i,o,a,s,l,u=this.sourceBuffer;if(Object.keys(u).length){if(xt.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in u)if(!r||c===r){if(n=u[c],n.ended=!1,n.updating)return xt.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(o=n.buffered.start(i),a=n.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(o,t),l=Math.min(a,e)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,xt.b.log("flush "+c+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),n.remove(s,l),!1}catch(t){xt.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else xt.b.warn("abort flushing too many retries");xt.b.log("buffer flushed")}return!0},e}(jt),Ie=xe,Me=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),je=function(t){function e(r){return z(this,e),q(this,t.call(this,r,Pt.a.FPS_DROP_LEVEL_CAPPING,Pt.a.MEDIA_ATTACHING,Pt.a.MANIFEST_PARSED))}return Y(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var r=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return e.isLevelAllowed(i,r.restrictedLevels)&&i<=t});return e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n=t.length-1,i=0;i<t.length;i+=1){var o=t[i];if((o.width>=e||o.height>=r)&&function(t,e){return!e||t.width!==e.width||t.height!==e.height}(o,t[i+1])){n=i;break}}return n},Me(e,[{key:"mediaWidth",get:function(){var t=void 0,r=this.media;return r&&(t=r.width||r.clientWidth||r.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,r=this.media;return r&&(t=r.height||r.clientHeight||r.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(jt),Ne=je,Fe=function(t){function e(r){return X(this,e),$(this,t.call(this,r,Pt.a.MEDIA_ATTACHING))}return J(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,r){var n=performance.now();if(e){if(this.lastTime){var i=n-this.lastTime,o=r-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/i,l=this.hls;if(l.trigger(Pt.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),s>0&&o>l.config.fpsDroppedMonitoringThreshold*a){var u=l.currentLevel;xt.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(Pt.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(jt),Be=Fe,Ue=function(){function t(e){Q(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,n=this.stats,i=this.context,o=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===r){var a=e.status;if(a>=200&&a<300){n.tload=Math.max(n.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===i.responseType?(s=e.response,l=s.byteLength):(s=e.responseText,l=s.length),n.loaded=n.total=l;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,n,i,e)}else n.retry>=o.maxRetry||a>=400&&a<499?(xt.b.error(a+" while loading "+i.url),this.callbacks.onError({code:a,text:e.statusText},i,e)):(xt.b.warn(a+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.prototype.loadtimeout=function(){xt.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},t}(),Ge=Ue,He=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Ve=function(t){function e(r){Z(this,e);var n=tt(this,t.call(this,r,Pt.a.MANIFEST_LOADING,Pt.a.MANIFEST_PARSED,Pt.a.AUDIO_TRACK_LOADED,Pt.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return et(e,t),e.prototype.destroy=function(){this.cleanTimer(),jt.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===Dt.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestParsed=function(t){var e=this,r=t.audioTracks||[],n=!1;this.tracks=r,this.hls.trigger(Pt.a.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(t){return t.default&&!n?(e.audioTrack=i,void(n=!0)):void i++}),!1===n&&r.length&&(xt.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(xt.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,xt.b.log("switching to audioTrack "+t);var e=this.tracks[t],r=this.hls,n=e.type,i=e.url,o={id:t,type:n,url:i};r.trigger(Pt.a.AUDIO_TRACK_SWITCH,o),r.trigger(Pt.a.AUDIO_TRACK_SWITCHING,o);var a=e.details;!i||void 0!==a&&!0!==a.live||(xt.b.log("(re)loading playlist for audioTrack "+t),r.trigger(Pt.a.AUDIO_TRACK_LOADING,{url:i,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,xt.b.log("updating audioTrack "+t);var e=this.tracks[t],r=e.url,n=e.details;!r||void 0!==n&&!0!==n.live||(xt.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(Pt.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},He(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(jt),We=Ve,Ke=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ze={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},qe=function(t){function e(r){rt(this,e);var n=nt(this,t.call(this,r,Pt.a.MEDIA_ATTACHED,Pt.a.MEDIA_DETACHING,Pt.a.AUDIO_TRACKS_UPDATED,Pt.a.AUDIO_TRACK_SWITCHING,Pt.a.AUDIO_TRACK_LOADED,Pt.a.KEY_LOADED,Pt.a.FRAG_LOADED,Pt.a.FRAG_PARSING_INIT_SEGMENT,Pt.a.FRAG_PARSING_DATA,Pt.a.FRAG_PARSED,Pt.a.ERROR,Pt.a.BUFFER_RESET,Pt.a.BUFFER_CREATED,Pt.a.BUFFER_APPENDED,Pt.a.BUFFER_FLUSHED,Pt.a.INIT_PTS_FOUND));return n.config=r.config,n.audioCodecSwap=!1,n.ticks=0,n._state=ze.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return it(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),jt.prototype.destroy.call(this),this.state=ze.STOPPED},e.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[r]=n,this.videoTrackCC=r,xt.b.log("InitPTS for cc:"+r+" found from video track:"+n),this.state===ze.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&-1===t?(xt.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=ze.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=ze.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=ze.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ze.STOPPED},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){var t,e,r,n=this.hls,i=n.config;switch(this.state){case ze.ERROR:case ze.PAUSED:case ze.BUFFER_FLUSHING:break;case ze.STARTING:this.state=ze.WAITING_TRACK,this.loadedmetadata=!1;break;case ze.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=ie.bufferInfo(a,t,i.maxBufferHole),u=ie.bufferInfo(s,t,i.maxBufferHole),c=l.len,d=l.end,h=this.fragPrevious,f=Math.max(i.maxBufferLength,u.len),p=this.audioSwitch,y=this.trackId;if((c<f||p)&&y<o.length){if(void 0===(r=o[y].details)){this.state=ze.WAITING_TRACK;break}if(!p&&!r.live&&h&&h.sn===r.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-d<h.duration/2)){this.hls.trigger(Pt.a.BUFFER_EOS,{type:"audio"}),this.state=ze.ENDED;break}var v=r.fragments,g=v.length,m=v[0].start,b=v[g-1].start+v[g-1].duration,_=void 0;if(p)if(r.live&&!r.PTSKnown)xt.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=t,r.PTSKnown&&t<m){if(!(l.end>m||l.nextStart))return;xt.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=m+.05}if(r.initSegment&&!r.initSegment.data)_=r.initSegment;else if(d<=m){if(_=v[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=w(v,this.videoTrackCC)),r.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var T=l.nextStart?l.nextStart:m;return xt.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var E=void 0,S=i.maxFragLookUpTolerance,k=h?v[h.sn-v[0].sn+1]:void 0,C=function(t){var e=Math.min(S,t.duration);return t.start+t.duration-e<=d?1:t.start-e>d&&t.start?-1:0};d<b?(d>b-S&&(S=0),E=k&&!C(k)?k:re.search(v,C)):E=v[g-1],E&&(_=E,m=E.start,h&&_.level===h.level&&_.sn===h.sn&&(_.sn<r.endSN?(_=v[_.sn+1-r.startSN],xt.b.log("SN just loaded, load next one: "+_.sn)):_=null))}if(_)if(_.decryptdata&&null!=_.decryptdata.uri&&null==_.decryptdata.key)xt.b.log("Loading key for "+_.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+y),this.state=ze.KEY_LOADING,n.trigger(Pt.a.KEY_LOADING,{frag:_});else{if(xt.b.log("Loading "+_.sn+", cc: "+_.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+y+", currentTime:"+t+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,_.loadCounter){_.loadCounter++;var A=i.fragLoadingLoopThreshold;if(_.loadCounter>A&&Math.abs(this.fragLoadIdx-_.loadIdx)<A)return void n.trigger(Pt.a.ERROR,{type:Dt.b.MEDIA_ERROR,details:Dt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:_})}else _.loadCounter=1;_.loadIdx=this.fragLoadIdx,this.fragCurrent=_,this.startFragRequested=!0,isNaN(_.sn)||(this.nextLoadPosition=_.start+_.duration),n.trigger(Pt.a.FRAG_LOADING,{frag:_}),this.state=ze.FRAG_LOADING}}break;case ze.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=ze.IDLE);break;case ze.FRAG_LOADING_WAITING_RETRY:var O=performance.now(),R=this.retryDate;a=this.media;var L=a&&a.seeking;(!R||O>=R||L)&&(xt.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ze.IDLE);break;case ze.WAITING_INIT_PTS:var P=this.videoTrackCC;if(void 0===this.initPTS[P])break;var D=this.waitingFragment;if(D){var x=D.frag.cc;P!==x?(e=this.tracks[this.trackId],e.details&&e.details.live&&(xt.b.warn("Waiting fragment CC ("+x+") does not match video track CC ("+P+")"),this.waitingFragment=null,this.state=ze.IDLE)):(this.state=ze.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ze.IDLE;break;case ze.STOPPED:case ze.FRAG_LOADING:case ze.PARSING:case ze.PARSED:case ze.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(xt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===ze.ENDED&&(this.state=ze.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){xt.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=ze.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=ze.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,r=t.id,n=this.tracks[r],i=e.totalduration,o=0;if(xt.b.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var a=n.details;a&&e.fragments.length>0?(T(a,e),o=e.fragments[0].start,e.PTSKnown?xt.b.log("live audio playlist sliding:"+o.toFixed(3)):xt.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,xt.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(xt.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===ze.WAITING_TRACK&&(this.state=ze.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ze.KEY_LOADING&&(this.state=ze.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===ze.FRAG_LOADING&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,a=e.level,s=e.sn,l=e.cc,u=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=ze.IDLE,c.tparsed=c.tbuffered=performance.now(),i.initSegment.data=t.payload,this.hls.trigger(Pt.a.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=ze.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new he(this.hls,"audio"));var d=this.initPTS[l],h=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==d?(this.pendingBuffering=!0,xt.b.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.demuxer.push(t.payload,h,u,null,e,o,!1,d)):(xt.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=t,this.state=ze.WAITING_INIT_PTS)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ze.PARSING){var n=t.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(Pt.a.BUFFER_CODECS,n),xt.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Pt.a.BUFFER_APPENDING,a))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,n=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&n.sn===r.sn&&n.level===r.level&&this.state===ze.PARSING){var i=this.trackId,o=this.tracks[i],a=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),xt.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),_(o.details,r,t.startPTS,t.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s&&l)if(l.readyState){var c=l.currentTime;xt.b.log("switching audio track : currentTime:"+c),c>=t.startPTS&&(xt.b.log("switching audio track : flushing all audio"),this.state=ze.BUFFER_FLUSHING,a.trigger(Pt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,a.trigger(Pt.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(Pt.a.AUDIO_TRACK_SWITCHED,{id:i});var d=this.pendingData;this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&d.push({type:t.type,data:e,parent:"audio",content:"data"})}),!u&&d.length&&(d.forEach(function(t){e.state===ze.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(Pt.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===ze.PARSING&&(this.stats.tparsed=performance.now(),this.state=ze.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==ze.PARSING&&e!==ze.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ze.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),r.trigger(Pt.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;xt.b.log("audio buffered : "+pe.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(Pt.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ze.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Dt.a.FRAG_LOAD_ERROR:case Dt.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r,e.loadCounter=0;var i=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);xt.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=ze.FRAG_LOADING_WAITING_RETRY}else xt.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ze.ERROR}break;case Dt.a.FRAG_LOOP_LOADING_ERROR:case Dt.a.AUDIO_TRACK_LOAD_ERROR:case Dt.a.AUDIO_TRACK_LOAD_TIMEOUT:case Dt.a.KEY_LOAD_ERROR:case Dt.a.KEY_LOAD_TIMEOUT:this.state!==ze.ERROR&&(this.state=t.fatal?ze.ERROR:ze.IDLE,xt.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case Dt.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===ze.PARSING||this.state===ze.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime;if(o&&ie.isBuffered(o,a)&&ie.isBuffered(o,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,xt.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=ze.IDLE}else xt.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ze.BUFFER_FLUSHING,this.hls.trigger(Pt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(xt.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(Pt.a.BUFFER_APPENDING,e)}),this.appended=!0,
this.pendingData=[],this.state=ze.PARSED):(this.state=ze.IDLE,this.fragPrevious=null,this.tick())},Ke(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,xt.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(jt),Ye=qe,Xe=function(){function t(t){return"string"==typeof t&&!!o[t.toLowerCase()]&&t.toLowerCase()}function e(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function n(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,h=n,f=o,p=a,y=null,v="",g=!0,m="auto",b="start",_=50,T="middle",E=50,w="middle";if(Object.defineProperty(s,"id",r({},u,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",r({},u,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",r({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},u,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},u,{get:function(){return y},set:function(t){y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},u,{get:function(){return v},set:function(e){var r=t(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");v=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},u,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},u,{get:function(){return b},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");b=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},u,{get:function(){return T},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},u,{get:function(){return w},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");w=r,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),$e=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};st.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Je=new Xe(0,0,0),Qe="middle"===Je.align?"middle":"center";ot.prototype={parse:function(t){function e(){var t=r.buffer,e=0;for(t=ct(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,r.buffer=t.substr(e),n}var r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var n;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;n=e();var i=n.match(/^()?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var o=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:n=e(),r.state){case"HEADER":/:/.test(n)?function(t){lt(t,function(t,e){},/:/)}(n):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new Xe(0,0,""),r.state="CUE",-1===n.indexOf("-->")){r.cue.id=n;continue}case"CUE":try{ut(n,r.cue,r.regionList)}catch(t){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("-->");if(!n||a&&(o=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(t){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var Ze=ot,tr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},er=function(t){var e=t;return tr.hasOwnProperty(t)&&(e=tr[t]),String.fromCharCode(e)},rr=15,nr=100,ir={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},or={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ar={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},sr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},lr=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ur={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r&&this.time}},cr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},dr=function(){function t(e,r,n,i,o){ht(this,t),this.foreground=e||"white",this.underline=r||!1,this.italics=n||!1,this.background=i||"black",this.flash=o||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),hr=function(){function t(e,r,n,i,o,a){ht(this,t),this.uchar=e||" ",this.penState=new dr(r,n,i,o,a)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),fr=function(){function t(){ht(this,t),this.chars=[];for(var e=0;e<nr;e++)this.chars.push(new hr);this.pos=0,this.currPenState=new dr}return t.prototype.equals=function(t){for(var e=!0,r=0;r<nr;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<nr;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<nr;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(ur.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>nr&&(ur.log("ERROR","Too large cursor position "+this.pos),this.pos=nr)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=er(t);return this.pos>=nr?void ur.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e;for(e=t;e<nr;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<nr;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),pr=function(){function t(){ht(this,t),this.rows=[];for(var e=0;e<rr;e++)this.rows.push(new fr);this.currRow=rr-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<rr;t++)this.rows[t].clear();this.currRow=rr-1},t.prototype.equals=function(t){for(var e=!0,r=0;r<rr;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<rr;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<rr;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){ur.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){ur.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<rr;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[n].cueStartTime;if(o&&o<ur.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(i.rows[n+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,u=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[u].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},t.prototype.setBkgData=function(t){ur.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void ur.log("DEBUG","roll_up but nrRollUpRows not set yet");ur.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),ur.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;i<rr;i++){var o=this.rows[i].getTextString();o&&(n=i+1,t?e.push("Row "+n+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},t.prototype.getTextAndFormat=function(){return this.rows},t}(),yr=function(){function t(e,r){ht(this,t),this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new pr,this.nonDisplayedMemory=new pr,this.lastOutputScreen=new pr,this.currRollUpRow=this.displayedMemory.rows[rr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[rr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,ur.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";ur.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(ur.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){ur.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){ur.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){ur.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){ur.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){ur.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){ur.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){ur.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){ur.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){ur.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){ur.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){ur.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(ur.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,ur.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){ur.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=n[r]}ur.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=ur.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),vr=function(){function t(e,r,n){ht(this,t),this.field=e||1,this.outputs=[r,n],this.channels=[new yr(1,r),new yr(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var r,n,i,o=!1;this.lastTime=t,ur.setTime(t);for(var a=0;a<e.length;a+=2)if(n=127&e[a],i=127&e[a+1],0!==n||0!==i){if(ur.log("DATA","["+cr([e[a],e[a+1]])+"] -> ("+cr([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(o=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else ur.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,ur.log("WARNING","Couldn't parse cleaned data "+cr([n,i])+" orig: "+cr([e[a],e[a+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var r=null,n=(20===t||28===t)&&32<=e&&e<=47,i=(23===t||31===t)&&33<=e&&e<=35;if(!n&&!i)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,ur.log("DEBUG","Repeated command ("+cr([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var o=this.channels[r-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.parseMidrow=function(t,e){var r=null;return(17===t||25===t)&&32<=e&&e<=47&&((r=17===t?1:2)!==this.currChNr?(ur.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(e),ur.log("DEBUG","MIDROW ("+cr([t,e])+")"),!0))},t.prototype.parsePAC=function(t,e){var r=null,n=null,i=(17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127,o=(16===t||24===t)&&64<=e&&e<=95;if(!i&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=t<=23?1:2,n=64<=e&&e<=95?1===r?ir[t]:ar[t]:1===r?or[t]:sr[t];var a=this.interpretPAC(n,e);return this.channels[r-1].setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.interpretPAC=function(t,e){var r=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.prototype.parseChars=function(t,e){var r=null,n=null,i=null;if(t>=25?(r=2,i=t-8):(r=1,i=t),17<=i&&i<=19){var o=e;o=17===i?e+80:18===i?e+112:e+144,ur.log("INFO","Special char '"+er(o)+"' in channel "+r),n=[o]}else 32<=t&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var a=cr(n);ur.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.prototype.parseBackgroundAttributes=function(t,e){var r,n,i,o,a=(16===t||24===t)&&32<=e&&e<=47,s=(23===t||31===t)&&45<=e&&e<=47;return!(!a&&!s||(r={},16===t||24===t?(n=Math.floor((e-32)/2),r.background=lr[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),i=t<24?1:2,o=this.channels[i-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,0))},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),gr=vr,mr=function(){function t(e,r){ft(this,t),this.timelineController=e,this.track=r,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.track)},t}(),br=mr,_r=function(t,e,r){return t.substr(r||0,e.length)===e},Tr=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),n=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)?-1:(e+=1e3*r,e+=6e4*n,e+=36e5*i)},Er=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},wr=function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)t.ccOffset+=n.start-i.start,n.new=!1,n=i,i=t[n.prevCC];t.presentationOffset=r},Sr={parse:function(t,e,r,n,i,o){var a=/\r\n|\n\r|\n|\r/g,s=Object(Ee.b)(new Uint8Array(t)).trim().replace(a,"\n").split("\n"),l="00:00.000",u=0,c=0,d=0,h=[],f=void 0,p=!0,y=new Ze;y.oncue=function(t){var e=r[n],i=r.ccOffset;e&&e.new&&(void 0!==c?i=r.ccOffset=e.start:wr(r,n,d)),d&&(i=d+r.ccOffset-r.presentationOffset),t.startTime+=i-c,t.endTime+=i-c,t.id=Er(t.startTime.toString())+Er(t.endTime.toString())+Er(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},y.onparsingerror=function(t){f=t},y.onflush=function(){return f&&o?void o(f):void i(h)},s.forEach(function(t){if(p){if(_r(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){_r(t,"LOCAL:")?l=t.substr(6):_r(t,"MPEGTS:")&&(u=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,u-=e,c=Tr(l)/1e3,d=u/9e4,-1===c&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}y.parse(t+"\n")}),y.flush()}},kr=Sr,Cr=function(t){function e(r){pt(this,e);var n=yt(this,t.call(this,r,Pt.a.MEDIA_ATTACHING,Pt.a.MEDIA_DETACHING,Pt.a.FRAG_PARSING_USERDATA,Pt.a.FRAG_DECRYPTED,Pt.a.MANIFEST_LOADING,Pt.a.MANIFEST_LOADED,Pt.a.FRAG_LOADED,Pt.a.LEVEL_SWITCHING,Pt.a.INIT_PTS_FOUND));if(n.hls=r,n.config=r.config,n.enabled=!0,n.Cues=r.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var i=new br(n,1),o=new br(n,2);n.cea608Parser=new gr(0,i,o)}return n}return vt(e,t),e.prototype.addCues=function(t,e,r,n){for(var i=this.cueRanges,o=!1,a=i.length;a--;){var s=i[a],l=bt(s[0],s[1],e,r);if(l>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],r),o=!0,l/(r-e)>.5))return}o||i.push([e,r]),this.Cues.newCue(this[t],e,r,n)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r],i="textTrack"+t;if(!0===n[i])return n}return null},e.prototype.sendAddTrackEvent=function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)},e.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var r=this.getExistingTrack(t);if(r)this[e]=r,gt(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var n=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1LanguageCode);n&&(n[e]=!0,this[e]=n)}}},e.prototype.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},e.prototype.destroy=function(){jt.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){gt(this.textTrack1),gt(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)gt(e[r])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,n){var i=void 0;if(n<r.length){var o=r[n];mt(o,t)&&(i=o)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),i.mode=t.default?"showing":"hidden",e.textTracks.push(i)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,r=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=n}else if("subtitle"===e.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,r)}else this.hls.trigger(Pt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,i=this.hls;kr.parse(e,this.initPTS,r,t.cc,function(e){var r=n[t.trackId];e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}),i.trigger(Pt.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){xt.b.log("Failed to parse VTT cue: "+e),i.trigger(Pt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;if("subtitle"===r.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(r,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},e.prototype.extractCea608Data=function(t){for(var e,r,n,i,o,a=31&t[0],s=2,l=[],u=0;u<a;u++)e=t[s++],r=127&t[s++],n=127&t[s++],i=0!=(4&e),o=3&e,0===r&&0===n||i&&0===o&&(l.push(r),l.push(n));return l},e}(jt),Ar=Cr,Or=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Rr=function(t){function e(r){_t(this,e);var n=Tt(this,t.call(this,r,Pt.a.MEDIA_ATTACHED,Pt.a.MEDIA_DETACHING,Pt.a.MANIFEST_LOADING,Pt.a.MANIFEST_LOADED,Pt.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n.subtitleDisplay=!1,n}return Et(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=wt(this.media.textTracks),r=0;r<e.length;r++)"showing"===e[r].mode&&(t=r);this.subtitleTrack=t}},e.prototype.destroy=function(){jt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(Pt.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var r=e.details;void 0!==r&&!0!==r.live||(xt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Pt.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(xt.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=wt(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(e[this.trackId].mode="hidden"),this.trackId=t,xt.b.log("switching to subtitle track "+t),this.hls.trigger(Pt.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var r=this.tracks[t];this.subtitleDisplay&&(e[t].mode="showing");var n=r.details;void 0!==n&&!0!==n.live||(xt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Pt.a.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))}}},Or(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(jt),Lr=Rr,Pr=r(4),Dr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},xr=function(t){function e(r){St(this,e);var n=kt(this,t.call(this,r,Pt.a.MEDIA_ATTACHED,Pt.a.ERROR,Pt.a.KEY_LOADED,Pt.a.FRAG_LOADED,Pt.a.SUBTITLE_TRACKS_UPDATED,Pt.a.SUBTITLE_TRACK_SWITCH,Pt.a.SUBTITLE_TRACK_LOADED,Pt.a.SUBTITLE_FRAG_PROCESSED));return n.config=r.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=Dr.STOPPED,n.currentTrackId=-1,n.ticks=0,n.decrypter=new Pr.a(r.observer,r.config),n}return Ct(e,t),e.prototype.destroy=function(){jt.prototype.destroy.call(this),this.state=Dr.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();
this.fragCurrent=t,this.hls.trigger(Pt.a.FRAG_LOADING,{frag:t}),this.state=Dr.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=Dr.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=Dr.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.tick=function(){var t=this;1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){t.tick()},1),this.ticks=0)},e.prototype.doTick=function(){var t=this;switch(this.state){case Dr.IDLE:var e=this.tracks,r=this.currentTrackId,n=this.vttFragSNsProcessed[r],i=this.vttFragQueues[r],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1,a=function(t){return n.indexOf(t.sn)>-1},s=function(t){return i.some(function(e){return e.sn===t.sn})};if(!e)break;var l;if(r<e.length&&(l=e[r].details),void 0===l)break;l.fragments.forEach(function(e){a(e)||e.sn===o||s(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(xt.b.log("Loading key for "+e.sn),t.state=Dr.KEY_LOADING,t.hls.trigger(Pt.a.KEY_LOADING,{frag:e})):(e.trackId=r,i.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;xt.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===Dr.KEY_LOADING&&(this.state=Dr.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,n=t.frag,i=this.hls;if(this.state===Dr.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var o;try{o=performance.now()}catch(t){o=Date.now()}this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e;try{e=performance.now()}catch(t){e=Date.now()}i.trigger(Pt.a.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:o,tdecrypt:e}})})}},e}(jt),Ir=xr,Mr={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ge,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Pe,bufferController:Ie,capLevelController:Ne,fpsController:Be,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Mr.subtitleStreamController=Ir,Mr.subtitleTrackController=Lr,Mr.timelineController=Ar,Mr.cueHandler=Ot,Mr.enableCEA708Captions=!0,Mr.enableWebVTT=!0,Mr.captionsTextTrack1Label="English",Mr.captionsTextTrack1LanguageCode="en",Mr.captionsTextTrack2Label="Spanish",Mr.captionsTextTrack2LanguageCode="es",Mr.audioStreamController=Ye,Mr.audioTrackController=We;var jr=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Nr=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At(this,t);var n=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in n)i in r||(r[i]=n[i]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(xt.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var o=this.observer=new se.a;o.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.emit.apply(o,[t,t].concat(r))},o.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[t].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new r.abrController(this),s=new r.bufferController(this),l=new r.capLevelController(this),u=new r.fpsController(this),c=new $t(this),d=new Qt(this),h=new te(this),f=new Se(this),p=this.levelController=new Te(this),y=this.streamController=new me(this),v=[p,y],g=r.audioStreamController;g&&v.push(new g(this)),this.networkControllers=v;var m=[c,d,h,a,s,l,u,f];if(g=r.audioTrackController){var b=new g(this);this.audioTrackController=b,m.push(b)}if(g=r.subtitleTrackController){var _=new g(this);this.subtitleTrackController=_,m.push(_)}[r.subtitleStreamController,r.timelineController].forEach(function(t){t&&m.push(new t(e))}),this.coreComponents=m}return t.isSupported=function(){return N()},jr(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return Pt.a}},{key:"ErrorTypes",get:function(){return Dt.b}},{key:"ErrorDetails",get:function(){return Dt.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Mr},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){xt.b.log("destroy"),this.trigger(Pt.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){xt.b.log("attachMedia"),this.media=t,this.trigger(Pt.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){xt.b.log("detachMedia"),this.trigger(Pt.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=Lt.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),xt.b.log("loadSource:"+t),this.url=t,this.trigger(Pt.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;xt.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){xt.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){xt.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){xt.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},jr(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){xt.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){xt.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){xt.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){xt.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){xt.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){xt.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,r=t.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>r)return i;return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,r=t.autoLevelCapping;return-1===r&&e&&e.length?e.length-1:r}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=Nr},function(t,e,r){function n(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var n=e(e.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){var e=[],r=t.toString(),n=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return e;for(var o,a=n[1],s=new RegExp("(\\\\n|\\W)"+i(a)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");o=s.exec(r);)e.push(o[3]);return e}function a(t,e){for(var r=[e],n=[],i={};r.length;){var a=r.pop();if(!i[a]&&t[a]){i[a]=!0,n.push(a);var s=o(t[a]);r=r.concat(s)}}return n}t.exports=function(t,e){e=e||{};var i=r.m,o=e.all?Object.keys(i):a(i,t),s="("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.map(function(t){return JSON.stringify(t)+": "+i[t].toString()}).join(",")+"})(self);",l=new window.Blob([s],{type:"text/javascript"});if(e.bare)return l;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=u.createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),i=r(1),o=r(0),a=r(5),s=r.n(a),l=function(t){var e=new s.a;e.trigger=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(n))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new n.a(e,a.typeSupported,s,a.vendor);try{Object(o.a)(!0===s.debug)}catch(t){}r("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(i.a.FRAG_DECRYPTED,r),e.on(i.a.FRAG_PARSING_INIT_SEGMENT,r),e.on(i.a.FRAG_PARSED,r),e.on(i.a.ERROR,r),e.on(i.a.FRAG_PARSING_METADATA,r),e.on(i.a.FRAG_PARSING_USERDATA,r),e.on(i.a.INIT_PTS_FOUND,r),e.on(i.a.FRAG_PARSING_DATA,function(e,r){var n=[],i={event:e,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),t.postMessage(i,n)})};e.default=l}]).default})}])}),!function(t){if("function"==typeof define&&define.amd)define(["video.js","videojs-contrib-ads"],function(e){t(window,document,e)});else if("object"==typeof exports&&"object"==typeof module){var e=require("video.js");require("videojs-contrib-ads"),t(window,document,e)}else t(window,document,videojs)}(function(t,e,r){"use strict";var n=function(t){var e,r,n;for(r=1;r<arguments.length;r++){e=arguments[r];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t},i={debug:!1,timeout:5e3,prerollTimeout:100,adLabel:"Advertisement",showControlsForJSAds:!0},o=function(r,o,a){this.player=r;var s=function(t,e){t.id=this.controlPrefix+e,t.className=this.controlPrefix+e+" "+e}.bind(this),l=function(t){return new RegExp("(^|[^A-Za-z-])"+t+"((?![A-Za-z-])|$)","gi")},u=function(t,e){return l(e).test(t.className)?t:t.className=t.className.trim()+" "+e},c=function(t,e){var r=l(e);return r.test(t.className)?t.className=t.className.trim().replace(r,""):t},d=function(){this.vjsControls=this.player.getChild("controlBar"),this.adContainerDiv=this.vjsControls.el().parentNode.appendChild(e.createElement("div")),s(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",S,!1),this.adContainerDiv.addEventListener("mouseleave",w,!1),h(),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainerDiv,this.contentPlayer)}.bind(this),h=function(){this.controlsDiv=e.createElement("div"),s(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.countdownDiv=e.createElement("div"),s(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.settings.adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none",this.seekBarDiv=e.createElement("div"),s(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.progressDiv=e.createElement("div"),s(this.progressDiv,"ima-progress-div"),this.playPauseDiv=e.createElement("div"),s(this.playPauseDiv,"ima-play-pause-div"),u(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",A,!1),this.muteDiv=e.createElement("div"),s(this.muteDiv,"ima-mute-div"),u(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",O,!1),this.sliderDiv=e.createElement("div"),s(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",R,!1),this.sliderLevelDiv=e.createElement("div"),s(this.sliderLevelDiv,"ima-slider-level-div"),this.fullscreenDiv=e.createElement("div"),s(this.fullscreenDiv,"ima-fullscreen-div"),u(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",x,!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)}.bind(this);this.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()}.bind(this),this.requestAds=function(){this.adDisplayContainerInitialized||this.adDisplayContainer.initialize();var t=new google.ima.AdsRequest;this.settings.adTagUrl?t.adTagUrl=this.settings.adTagUrl:t.adsResponse=this.settings.adsResponse,this.settings.forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),t.linearAdSlotWidth=this.getPlayerWidth(),t.linearAdSlotHeight=this.getPlayerHeight(),t.nonLinearAdSlotWidth=this.settings.nonLinearWidth||this.getPlayerWidth(),t.nonLinearAdSlotHeight=this.settings.nonLinearHeight||this.getPlayerHeight()/3,t.setAdWillAutoPlay(this.settings.adWillAutoPlay),this.adsLoader.requestAds(t)}.bind(this);var f=function(t){if(this.adsManager=t.getAdsManager(this.contentPlayheadTracker,this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,y),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,v),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,g),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,m),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,b),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,A),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete_),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete_),this.isMobile&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,_),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,T)),!this.autoPlayAdBreaks)try{var e=this.getPlayerWidth(),r=this.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=r,this.adsManager.init(e,r,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.player.muted()?0:this.player.volume())}catch(t){y(t)}this.player.trigger("adsready")}.bind(this);this.start=function(){t.console.log("WARNING: player.ima.start is deprecated. Use player.ima.startFromReadyCallback instead.")},this.startFromReadyCallback=function(){if(this.autoPlayAdBreaks)try{this.adsManager.init(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.player.muted()?0:this.player.volume()),this.adsManager.start()}catch(t){y(t)}}.bind(this);var p=function(e){t.console.log("AdsLoader error: "+e.getError()),this.adContainerDiv.style.display="none",this.adsManager&&this.adsManager.destroy(),this.player.trigger({type:"adserror",data:{AdError:e.getError(),AdErrorEvent:e}})}.bind(this),y=function(e){var r=void 0!==e.getError?e.getError():e.stack;t.console.log("Ad error: "+r),this.vjsControls.show(),this.adsManager.destroy(),this.adContainerDiv.style.display="none",this.player.trigger({type:"adserror",data:{AdError:r,AdErrorEvent:e}})}.bind(this),v=function(t){this.adBreakReadyListener(t)}.bind(this);this.playAdBreak=function(){this.autoPlayAdBreaks||this.adsManager.start()}.bind(this),this.onContentPauseRequested_=function(t){this.adsActive=!0,this.adPlaying=!0,this.contentSource=this.player.currentSrc(),this.contentSourceType=this.player.currentType(),this.player.off("ended",this.localContentEndedListener),-1!=t.getAd().getAdPodInfo().getPodIndex()&&this.player.ads.startLinearAdMode(),this.adContainerDiv.style.display="block","application/javascript"!==t.getAd().getContentType()||this.settings.showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.vjsControls.hide(),C(),this.player.pause(),w()}.bind(this),this.onContentResumeRequested_=function(t){this.adsActive=!1,this.adPlaying=!1,this.player.on("ended",this.localContentEndedListener),(null==this.currentAd||this.currentAd.isLinear())&&(this.adContainerDiv.style.display="none"),this.vjsControls.show(),this.currentAd?this.contentComplete||-1==this.currentAd.getAdPodInfo().getPodIndex()||this.player.ads.endLinearAdMode():this.player.ads.endLinearAdMode(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""}.bind(this);var g=function(t){if(this.allAdsCompleted=!0,this.adContainerDiv.style.display="none",1==this.contentComplete){this.contentPlayer.src!=this.contentSource&&(this.player.autoplay(!1),this.player.src({src:this.contentSource,type:this.contentSourceType}));for(var e in this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[e]()}}.bind(this),m=function(t){t.getAd().isLinear()||this.player.play()}.bind(this),b=function(t){this.currentAd=t.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(E,250),c(this.adContainerDiv,"bumpable-ima-ad-container")):u(this.adContainerDiv,"bumpable-ima-ad-container"),this.adContainerDiv.style.display="block",this.player.trigger("ads-ad-started")}.bind(this),_=function(t){k(),S(),this.adPlaying=!1}.bind(this),T=function(t){C(),w(),this.adPlaying=!0}.bind(this);this.onAdComplete_=function(t){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)}.bind(this);var E=function(){var t=this.adsManager.getRemainingTime(),e=this.currentAd.getDuration(),r=e-t;r=r>0?r:0;var n,i=!1,o=0;this.currentAd.getAdPodInfo()&&(i=!0,n=this.currentAd.getAdPodInfo().getAdPosition(),o=this.currentAd.getAdPodInfo().getTotalAds());var a=Math.floor(t/60),s=Math.floor(t%60);s.toString().length<2&&(s="0"+s);var l=": ";i&&o>1&&(l=" ("+n+" of "+o+"): "),this.countdownDiv.innerHTML=this.settings.adLabel+l+a+":"+s;var u=100*(r/e);this.progressDiv.style.width=u+"%"}.bind(this);this.getPlayerWidth=function(){var t=this.player.el().getBoundingClientRect()||{};return parseInt(t.width,10)||this.player.width()}.bind(this),this.getPlayerHeight=function(){var t=this.player.el().getBoundingClientRect()||{};return parseInt(t.height,10)||this.player.height()}.bind(this);var w=function(){this.controlsDiv.style.height="14px",this.playPauseDiv.style.display="none",this.muteDiv.style.display="none",this.sliderDiv.style.display="none",this.fullscreenDiv.style.display="none"}.bind(this),S=function(){this.controlsDiv.style.height="37px",this.playPauseDiv.style.display="block",this.muteDiv.style.display="block",this.sliderDiv.style.display="block",this.fullscreenDiv.style.display="block"}.bind(this),k=function(){u(this.playPauseDiv,"ima-paused"),c(this.playPauseDiv,"ima-playing")}.bind(this),C=function(){u(this.playPauseDiv,"ima-playing"),c(this.playPauseDiv,"ima-paused")}.bind(this),A=function(){this.adPlaying?(k(),this.adsManager.pause(),this.adPlaying=!1):(C(),this.adsManager.resume(),this.adPlaying=!0)}.bind(this),O=function(){this.adMuted?(u(this.muteDiv,"ima-non-muted"),c(this.muteDiv,"ima-muted"),this.adsManager.setVolume(1),this.player.muted(!1),this.adMuted=!1,this.sliderLevelDiv.style.width=100*this.player.volume()+"%"):(u(this.muteDiv,"ima-muted"),c(this.muteDiv,"ima-non-muted"),this.adsManager.setVolume(0),this.player.muted(!0),this.adMuted=!0,this.sliderLevelDiv.style.width="0%")}.bind(this),R=function(){e.addEventListener("mouseup",P,!1),e.addEventListener("mousemove",L,!1)},L=function(t){D(t)},P=function(t){D(t),e.removeEventListener("mousemove",L),e.removeEventListener("mouseup",P)},D=function(t){var e=(t.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;e*=100,e=Math.min(Math.max(e,0),100),this.sliderLevelDiv.style.width=e+"%",this.player.volume(e/100),this.adsManager.setVolume(e/100),0==this.player.volume()?(u(this.muteDiv,"ima-muted"),c(this.muteDiv,"ima-non-muted"),this.player.muted(!0),this.adMuted=!0):(u(this.muteDiv,"ima-non-muted"),c(this.muteDiv,"ima-muted"),this.player.muted(!1),this.adMuted=!1)}.bind(this),x=function(){this.player.isFullscreen()?this.player.exitFullscreen():this.player.requestFullscreen()}.bind(this),I=function(){this.player.isFullscreen()?(u(this.fullscreenDiv,"ima-fullscreen"),c(this.fullscreenDiv,"ima-non-fullscreen"),this.adsManager&&this.adsManager.resize(t.screen.width,t.screen.height,google.ima.ViewMode.FULLSCREEN)):(u(this.fullscreenDiv,"ima-non-fullscreen"),c(this.fullscreenDiv,"ima-fullscreen"),this.adsManager&&this.adsManager.resize(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL))}.bind(this),M=function(){var t=this.player.muted()?0:this.player.volume();this.adsManager&&this.adsManager.setVolume(t),0==t?(this.adMuted=!0,u(this.muteDiv,"ima-muted"),c(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.adMuted=!1,u(this.muteDiv,"ima-non-muted"),c(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*t+"%")}.bind(this),j=function(){this.player.off("loadedmetadata",j),this.player.currentTime(0)}.bind(this),N=function(){this.player.off("loadedmetadata",N),this.player.currentTime(0),this.player.play()}.bind(this),F=function(){this.adsActive=!1,this.adPlaying=!1,this.player.on("ended",this.localContentEndedListener),this.vjsControls.show(),this.player.ads.endLinearAdMode(),this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.contentPlayheadTracker.currentTime=0,this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentComplete&&this.adsLoader.contentComplete(),this.contentComplete=!1,this.allAdsCompleted=!1}.bind(this);this.addEventListener=function(t,e){this.adsManager&&this.adsManager.addEventListener(t,e)}.bind(this),this.getAdsManager=function(){return this.adsManager}.bind(this),this.setContent=function(e,r,n){t.console.log("WARNING: player.ima.setContent is deprecated. Use player.ima.setContentWithAdTag instead."),this.setContentWithAdTag(e,r,n)}.bind(this),this.setContentWithAdTag=function(t,e,r){F(),this.settings.adTagUrl=e||this.settings.adTagUrl,B(t,r)}.bind(this),this.setContentWithAdsResponse=function(t,e,r){F(),this.settings.adsResponse=e||this.settings.adsResponse,B(t,r)}.bind(this),this.changeAdTag=function(t){F(),this.settings.adTagUrl=t}.bind(this);var B=function(t,e){this.player.currentSrc()&&(this.player.currentTime(0),this.player.pause()),t&&this.player.src(t),e?this.player.on("loadedmetadata",N):this.player.on("loadedmetadata",j)}.bind(this);this.addContentEndedListener=function(t){this.contentEndedListeners.push(t)}.bind(this),this.addContentAndAdsEndedListener=function(t){this.contentAndAdsEndedListeners.push(t)}.bind(this),this.setAdBreakReadyListener=function(t){this.adBreakReadyListener=t}.bind(this),this.pauseAd=function(){this.adsActive&&this.adPlaying&&(k(),this.adsManager.pause(),this.adPlaying=!1)}.bind(this),this.resumeAd=function(){this.adsActive&&!this.adPlaying&&(C(),this.adsManager.resume(),this.adPlaying=!0)}.bind(this);var U=function(){this.updateTimeIntervalHandle=setInterval(G,this.seekCheckInterval),this.seekCheckIntervalHandle=setInterval(H,this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(V,this.resizeCheckInterval)}.bind(this),G=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.player.currentTime())}.bind(this),H=function(){var t=1e3*(this.player.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(t)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.player.currentTime()}.bind(this),V=function(){var t=this.getPlayerWidth(),e=this.getPlayerHeight();!this.adsManager||t==this.adsManagerDimensions.width&&e==this.adsManagerDimensions.height||(this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.resize(t,e,google.ima.ViewMode.NORMAL))}.bind(this);if(this.setShowCountdown=function(t){this.showCountdown=t,this.countdownDiv.style.display=this.showCountdown?"block":"none"}.bind(this),this.VERSION="0.7.0",this.settings,this.controlPrefix,this.contentPlayer,this.showCountdown,this.autoPlayAdBreaks,this.vjsControls,this.adContainerDiv,this.controlsDiv,this.countdownDiv,this.seekBarDiv,this.progressDiv,this.playPauseDiv,this.muteDiv,this.sliderDiv,this.sliderLevelDiv,this.fullscreenDiv,this.adDisplayContainer,this.adDisplayContainerInitialized=!1,this.adsLoader,this.adsManager,this.adsRenderingSettings=null,this.adTagUrl,this.adsResponse,this.currentAd,this.contentTrackingTimer,this.adTrackingTimer,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.contentComplete=!1,this.allAdsCompleted=!1,this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle,this.resizeCheckInterval=250,this.seekThreshold=100,this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.adsManagerDimensions={width:0,height:0},this.contentEndedListeners=[],this.contentAndAdsEndedListeners=[],this.adBreakReadyListener=void 0,this.contentSource="",this.contentSourceType="",this.localContentEndedListener=function(){this.adsLoader&&!this.contentComplete&&(this.adsLoader.contentComplete(),this.contentComplete=!0);for(var t in this.contentEndedListeners)this.contentEndedListeners[t]();if(this.allAdsCompleted)for(var t in this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[t]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.player.el()&&this.player.one("play",U)}.bind(this),this.playerDisposedListener=function(){this.contentEndedListeners=[],this.contentAndAdsEndedListeners=[],this.contentComplete=!0,this.player.off("ended",this.localContentEndedListener),this.player.ads.adTimeoutTimeout&&clearTimeout(this.player.ads.adTimeoutTimeout);var t=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.adTrackingTimer,this.resizeCheckIntervalHandle];for(var e in t){var r=t[e];r&&clearInterval(r)}this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)}.bind(this),this.settings=n({},i,o||{}),this.settings.id){this.controlPrefix=this.settings.id+"_"||"",this.contentPlayer=e.getElementById(this.settings.id).getElementsByClassName("vjs-tech")[0],this.contentPlayer.hasAttribute("autoplay")&&(this.settings.adWillAutoPlay=this.settings.adWillAutoPlay||!0),this.showCountdown=!0,0==this.settings.showCountdown&&(this.showCountdown=!1),this.autoPlayAdBreaks=!0,0==this.settings.autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),r.one("play",U),r.on("ended",this.localContentEndedListener),r.on("dispose",this.playerDisposedListener);var W={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},K=n({},W,o.contribAdsSettings||{});if(r.ads(K),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.settings.adsRenderingSettings)for(var z in this.settings.adsRenderingSettings)this.adsRenderingSettings[z]=this.settings.adsRenderingSettings[z];this.settings.locale&&google.ima.settings.setLocale(this.settings.locale),this.settings.disableFlashAds&&google.ima.settings.setDisableFlashAds(this.settings.disableFlashAds),this.settings.disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.settings.disableCustomPlaybackForIOS10Plus),
d(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.settings.vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.settings.vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.settings.vpaidMode),this.settings.locale&&this.adsLoader.getSettings().setLocale(this.settings.locale),this.settings.numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.settings.numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(this.VERSION),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,f,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,p,!1),a||(a=this.startFromReadyCallback),r.on("readyforpreroll",a),r.ready(function(){M(),r.on("fullscreenchange",I),r.on("volumechange",M)})}else t.console.log("Error: must provide id of video.js div")};((r=r.default||r).registerPlugin||r.plugin)("ima",function(t,e){this.ima=new o(this,t,e)})}),/**
 * videojs-contextmenu
 * @version 1.2.0
 * @copyright 2016 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojsContextmenu=t()}}(function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(t.contextmenu.options.disabled)return t;var r={target:t,type:f};return["clientX","clientY","pageX","pageY","screenX","screenY"].forEach(function(t){r[t]=e[t]}),t.trigger(r)}function o(t){var e=this.contextmenu.current;if(e){var r=this.contextmenu.options.wait;"touchend"===t.type&&Number(new Date)-e.time>=r&&i(this,t),this.contextmenu.current=null}}function a(t){var e=this.contextmenu.current;if(e){var r=t.touches[0],n=this.contextmenu.options.sensitivity;(r.screenX-e.screenX>n||r.screenY-e.screenY>n)&&(this.contextmenu.current=null)}}function s(t){if(!this.contextmenu.current){var e=t.touches[0];this.contextmenu.current={screenX:e.screenX,screenY:e.screenY,time:Number(new Date)}}}function l(t){this.contextmenu.options.cancel&&!this.contextmenu.options.disabled&&t.preventDefault(),i(this,t).off(["touchcancel","touchend"],o).off("touchmove",a).off("touchstart",s)}function u(t){var e=this,r=this.contextmenu===u;r&&(this.contextmenu=function(){u.apply(this,arguments)},this.contextmenu.VERSION="1.2.0"),this.contextmenu.options=d.default.mergeOptions(h,t),r&&(this.on("contextmenu",l).on(["touchcancel","touchend"],o).on("touchmove",a).on("touchstart",s),this.ready(function(){return e.addClass(f)}))}Object.defineProperty(r,"__esModule",{value:!0});var c="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,d=n(c),h={cancel:!0,sensitivity:10,wait:500,disabled:!1},f="vjs-contextmenu";d.default.plugin("contextmenu",u),u.VERSION="1.2.0",r.default=u,e.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),/**
 * videojs-contextmenu-ui
 * @version 3.0.3
 * @copyright 2016 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojsContextmenuUi=t()}}(function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=o,r=a,n=!0,s=u=void 0}},u=t("global/window"),c=i(u),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,h=i(d),f=h.default.getComponent("MenuItem"),p=function(t){function e(){o(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),s(e,[{key:"handleClick",value:function(t){var r=this;l(Object.getPrototypeOf(e.prototype),"handleClick",this).call(this),this.options_.listener(),c.default.setTimeout(function(){r.player().contextmenuUI.menu.dispose()},1)}}]),e}(f);r.default=p,e.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":6}],2:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=o,r=a,n=!0,s=u=void 0}},u=t("global/window"),c=i(u),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,h=i(d),f=t("./context-menu-item"),p=i(f),y=h.default.getComponent("Menu"),v=function(t){function e(t,r){var n=this;o(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r),this.dispose=h.default.bind(this,this.dispose),r.content.forEach(function(e){var r=function(){};"function"==typeof e.listener?r=e.listener:"string"==typeof e.href&&(r=function(){return c.default.open(e.href)}),n.addItem(new p.default(t,{label:e.label,listener:h.default.bind(t,r)}))})}return a(e,t),s(e,[{key:"createEl",value:function(){var t=l(Object.getPrototypeOf(e.prototype),"createEl",this).call(this);return h.default.addClass(t,"vjs-contextmenu-ui-menu"),t.style.left=this.options_.position.left+"px",t.style.top=this.options_.position.top+"px",t}}]),e}(y);r.default=v,e.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./context-menu-item":1,"global/window":6}],3:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var r=s.default.documentElement,n=s.default.body,i=r.clientLeft||n.clientLeft||0,o=u.default.pageXOffset||n.scrollLeft,a=e.left+o-i,l=r.clientTop||n.clientTop||0,c=u.default.pageYOffset||n.scrollTop,d=e.top+c-l;return{left:Math.round(a),top:Math.round(d)}}function o(t,e){var r={},n=i(t),o=t.offsetWidth,a=t.offsetHeight,s=n.top,l=n.left,u=e.pageY,c=e.pageX;return e.changedTouches&&(c=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-u+a)/a)),r.x=Math.max(0,Math.min(1,(c-l)/o)),r}Object.defineProperty(r,"__esModule",{value:!0}),r.findElPosition=i,r.getPointerPosition=o;var a=t("global/document"),s=n(a),l=t("global/window"),u=n(l)},{"global/document":5,"global/window":6}],4:[function(t,e,r){},{}],5:[function(t,e,r){(function(r){var n="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":4}],6:[function(t,e,r){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.hasOwnProperty("contextmenuUI")&&t.contextmenuUI.hasOwnProperty("menu")&&t.contextmenuUI.menu.el()}function a(t,e){return{left:Math.round(e.width*t.x),top:Math.round(e.height-e.height*t.y)}}function s(t){var e=this;if(o(this))return h.default.log("contextmenu-ui: saw vjs-contextmenu, but menu open"),void this.contextmenuUI.menu.dispose();this.contextmenu.options.cancel=!1;var r=(0,y.getPointerPosition)(this.el(),t),n=this.el().getBoundingClientRect(),i=a(r,n);t.preventDefault(),h.default.log("contextmenu-ui: saw vjs-contextmenu",t,r,n,i);var s=this.contextmenuUI.menu=new p.default(this,{content:this.contextmenuUI.content,position:i});this.contextmenuUI.closeMenu=function(){h.default.warn("player.contextmenuUI.closeMenu() is deprecated, please use player.contextmenuUI.menu.dispose() instead!"),s.dispose()},s.on("dispose",function(){h.default.log("contextmenu-ui: disposed menu"),e.contextmenu.options.cancel=!0,h.default.off(c.default,["click","tap"],s.dispose),e.removeChild(s),delete e.contextmenuUI.menu}),this.addChild(s),h.default.on(c.default,["click","tap"],s.dispose)}function l(t){var e=this;if(!Array.isArray(t.content))throw new Error('"content" required');o(this)&&(this.contextmenuUI.menu.dispose(),this.off("vjs-contextmenu",this.contextmenuUI.onVjsContextMenu),delete this.contextmenuUI),this.contextmenu();var r=this.contextmenuUI=function(){l.apply(this,arguments)};r.onVjsContextMenu=h.default.bind(this,s),r.content=t.content,r.VERSION="3.0.3",this.on("vjs-contextmenu",r.onVjsContextMenu).ready(function(){return e.addClass("vjs-contextmenu-ui")})}Object.defineProperty(r,"__esModule",{value:!0});var u=t("global/document"),c=i(u),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,h=i(d),f=t("./context-menu"),p=i(f),y=t("./util");h.default.plugin("contextmenuUI",l),l.VERSION="3.0.3",r.default=l,e.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./context-menu":2,"./util":3,"global/document":5}]},{},[7])(7)}),/**
 * videojs-replay
 * @version 1.1.0
 * @copyright 2016 Derk-Jan Hartman
 * @license (MIT OR Apache-2.0)
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojsReplay=t()}}(function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(r,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=n(i),a={},s=function(t){t.duration()!==1/0&&t.addClass("vjs-replay").getChild("controlBar").getChild("playToggle").controlText(t.localize("Replay"))},l=function(t){var e=void 0;t.hasClass("vjs-replay")&&(e=t.paused()?t.localize("Play"):t.localize("Pause"),t.removeClass("vjs-replay").getChild("controlBar").getChild("playToggle").controlText(e))},u=function(t,e){t.on("ended",function(){s(t)}),t.on("play",function(){l(t)}),t.on("seeking",function(){l(t)})},c=function(t){var e=this;this.ready(function(){u(e,o.default.mergeOptions(a,t))})};o.default.plugin("replayButton",c),c.VERSION="1.1.0",r.default=c,e.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n,i=r(1),o=(n=i)&&n.__esModule?n:{default:n};(videojs.registerPlugin||videojs.plugin)("qualityPickerPlugin",function(){function t(t,n){var i=n.qualityData,a=n.qualitySwitchCallback,s=e.controlBar.getChild("fullscreenToggle");e.controlBar.removeChild(s);for(var l=0;l<r.length;l++){var u=r[l],c=u+"PickerButton";c=c.charAt(0).toUpperCase()+c.slice(1);var d=e.controlBar.getChild(c);d&&(d.dispose(),e.controlBar.removeChild(d)),i[u]&&i[u].length>1&&(d=new o.default(e,{name:c,qualityList:i[u],qualitySwitchCallback:a,trackType:u}),e.controlBar.addChild(d))}s&&e.controlBar.addChild(s)}var e=this,r=["video","audio","subtitle"];e.tech_?e.tech_.on("loadedqualitydata",t):e.ready(function(){e.tech_.on("loadedqualitydata",t)},!0)})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=n(r(2)),s=n(r(3)),l=videojs.getComponent("MenuButton"),u={video:"vjs-icon-hd",audio:"vjs-icon-cog",subtitle:"vjs-icon-subtitles"},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l),o(e,[{key:"createMenu",value:function(){for(var t,e,r=new a.default(this.player,this.options_),n=0;n<this.options_.qualityList.length;n++){var o=this.options_.qualityList[n],l=this.options_,u=l.qualitySwitchCallback,c=l.trackType;e=i({qualitySwitchCallback:u,trackType:c},o,{selectable:!0}),t=new s.default(this.player,e),r.addItem(t)}return r}},{key:"buildCSSClass",value:function(){return u[this.options_.trackType]+" vjs-icon-placeholder "+function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildCSSClass",this).call(this)}}]),e}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=videojs.getComponent("Menu"),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),n(e,[{key:"addItem",value:function(t){var r=this;(function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addItem",this).call(this,t),t.on("click",function(){for(var e=r.children(),n=0;n<e.length;n++){var i=e[n];t!==i&&i.selected(!1)}})}}]),e}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=videojs.getComponent("MenuItem"),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),n(e,[{key:"handleClick",value:function(){(function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handleClick",this).call(this),this.options_.qualitySwitchCallback(this.options_.id,this.options_.trackType)}}]),e}();e.default=o}]),/**
 * em-utils
 * @version 0.0.1
 * @copyright 2017 blogg.no
 * @license (MIT OR Apache-2.0)
 */
function(t){"use strict";var e={CLOSE_SHARE:{en:"Close share box",no:"kk del boks"},CLOSE_PLAYLIST:{en:"Close playlist box",no:"Lukk spilleliste boksen"},ADVERTISEMENT:{en:"Advertisement",no:"Annonse"},COPY_SCRIPT:{en:"Copy embed script code",no:"Kopier skriptkode"},COPY_EMBED:{en:"Copy embed iframe code",no:"Kopier embed iframe-koden"}},r="en",n={ajaxGet:function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){if(n.status>=200&&n.status<400){var t=n.responseText;try{"string"==typeof t&&(t=JSON.parse(t))}catch(t){}e&&e(t)}else r&&r()},n.onerror=function(){console.log("Connection error")},n.send()},detectmob:function(){return!!t.navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)},detectIPmob:function(){return!!t.navigator.userAgent.match(/iPhone|iPad|iPod/i)},extend:function(t){var e,r,n;for(r=1;r<arguments.length;r++){e=arguments[r];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t},serializeUrl:function(t){var e=[];for(var r in t)e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},getLocation:function(t){try{return new URL(t)}catch(r){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e&&{href:t,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}||{}}},searchParams:function(e,r){var n=this.getLocation(e),i="",o=!1;if(n.searchParams)i=n.searchParams.get(r),o=n.searchParams.has(r);else{r=r.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),s=a.exec(e);s&&(o=!0,s[2]&&(i=s[2].replace(/\+/g," ")))}return null===i&&(i=""),o?t.decodeURIComponent(i):null},$:function(t){var e=[t],r=function(r){return e=t.querySelectorAll(r),this.elements=e,this},n=function(t,r){for(var n=e.length,i=0;i<n;i++)e[i].addEventListener(t,r.bind(e[i]));return this.elements=e,this},i=function(t){for(var r=e.length,n=0;n<r;n++)e[n].classList.add(t);return this.elements=e,this},o=function(t){for(var r=e.length,n=0;n<r;n++)e[n].classList.remove(t);return this.elements=e,this},a=function(t){for(var r=e.length,n=0;n<r;n++)e[n].insertBefore(t,e[n].firstElementChild);return this.elements=e,this};return{find:r,on:n,elements:e,addClass:i,removeClass:o,prepend:a}},createElement:function(t,e){if(!t)throw new SyntaxError("element tag name not defined");var r,n,i=document.createElement(t);if(e)for(r in e)if("style"===r)for(n in e.style)i.style[n]=e.style[n];else i.setAttribute(r,e[r]);return i},insertAfter:function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},prependChild:function(t,e){t.insertBefore(e,t.firstElementChild)},openWindow:function(e,r,n){var i=n.width,o=n.height,a=n.scrollbars||"yes",s=n.resizable||"yes",l=n.toolbar||"no",u=(t.screenY||t.screenTop||0)+t.outerHeight/2-o/2,c=(t.screenX||t.screenLeft||0)+t.outerWidth/2-i/2;t.chrome&&t.navigator.userAgent.toLowerCase().indexOf("mac os x")!==-1&&(o+=27),t.safari&&(o+=47);var d="width="+i+",height="+o+",left="+c+",top="+u+",scrollbars="+a+",resizable="+s+",toolbar="+l;return t.open(e,r,d)}},i=function(t){return e[t][r]},o=function(t){r=t},a={mediaLang:i,helpers:n,setCulture:o};t.emUtils=a||{}}(window),/**
 * b-media
 * @version 0.1.0
 * @copyright 2018 blogg.no
 * @license (MIT OR Apache-2.0)
 */
function(t,e,r){"use strict";var n=e.helpers,i=e.mediaLang,o={vplays:function(t,e,r){n.ajaxGet("//hits.blogsoft.org?id="+e+"&vid="+t+"&callback=?",r)},vtrack:function(t,e,r,i){n.ajaxGet("//hits.blogsoft.org/track?e="+t+"&id="+r+"&vid="+e+"&callback=?",i)},aplays:function(t,e,r){n.ajaxGet("//hits.blogsoft.org?id="+e+"&aid="+t+"&callback=?",r)}},a={ADS_READY:"adReady",AD_STARTED:"adStarted",AD_ENDED:"adEnded",ADS_ERROR:"adError",AD_BLOCKED:"adBlocked",AD_SKIP:"adCanceled",ADS_CRITICAL:"adCriticalError",PLAYS:"play",PAUSED:"paused",ENDED:"ended",REPLAYS:"replay"},s=function(s,l){var u=s;if("string"==typeof u&&(u=document.querySelector(s)),!u)return console.log(s+" element not found"),!1;var c=n.detectmob(),d=n.detectIPmob(),h={element:u,type:u.tagName.toLowerCase(),player:null,plugins:null,playsCounter:0};l=n.extend({},{blogId:0,mediaId:0,postAd:!0,debug:!1,setup:{},plugins:{}},l||{}),l.debug||e.setCulture("no");var f=function(){var t={controls:!0,autoplay:!1,loop:!1,preload:"none",html5:{hlsjsConfig:{}},inactivityTimeout:500,controlBar:{fullscreenToggle:!0}};switch(h.type){case"audio":t.preload="metadata",t.height=50,t.controlBar.fullscreenToggle=!1;break;default:t.controlBar.volumeMenuButton={inline:!1,vertical:!0},d&&(t.nativeControlsForTouch=!1)}return t},p=function(){var t={ima:{id:h.player.id(),showControlsForJSAds:!1,adLabel:i("ADVERTISEMENT"),adTagUrl:"",prerollTimeout:5e3,debug:l.debug},replayButton:{},qualityPickerPlugin:{}},e={},r={video:["ima","replayButton","qualityPickerPlugin"],audio:["replayButton"]};for(var n in r[h.type]){var o=r[h.type][n];e[o]=t[o]}return e},y=function(t){var e=n.extend({frameid:r.name?r.name.replace("em-iframe-",""):""},t);r.parent.postMessage("em|"+JSON.stringify(e)+"|media","*"),l.debug&&console.log("Post Message: ","em|"+JSON.stringify(e)+"|media")},v="",g=function(e,r){l.debug&&t.log("Event",e+":",r),v=e},m=function(t,e){t&&v!=t&&(g(t,e),l.debug&&console.log("API: Events Track"),"video"==h.type&&l.mediaId&&o.vtrack(t,l.mediaId,l.blogId))},b=function(){if(T&&h.player.off(_,w),l.debug&&console.log("API: Plays Count"),l.mediaId)switch(h.type){case"video":o.vplays(l.mediaId,l.blogId,function(t){h.playsCounter++});break;case"audio":o.aplays(l.mediaId,l.blogId,function(t){h.playsCounter++})}},_=c?"touchend":"click",T=!1,E=function(){h.player.ima&&(T||(h.player.ima.initializeAdDisplayContainer(),h.player.ima.requestAds()),T=!0)},w=function(){E(),h.player.play()},S=function(){T&&(T=!1,h.player.ima.getAdsManager()&&h.player.ima.getAdsManager().discardAdBreak(),h.player.ima.adContainerDiv&&h.player.ima.adContainerDiv.remove(),u.classList.remove("vjs-ad-loading","vjs-ad-playing"))},k=function(t){if(t.adTagUrl)try{if(!r.google||!r.google.ima)throw new Error(a.AD_BLOCKED);h.player.ima(t),h.player.autoplay()?E():h.player.on(_,w);var e="preroll";h.player.one("adsready",function(){y({emmethod:"adsready"}),m(a.ADS_READY,"Trigger this event after to signal that your integration is ready to play ads."),h.player.ima.addEventListener(google.ima.AdEvent.Type.STARTED,function(){g(a.AD_STARTED,"Google"),e="postroll"}),h.player.ima.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){g("AdCompleted","Google"),l.postAd&&S()}),h.player.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){g("VideoPauseReq","Google"),!c&&l.postAd&&(h.player.ima.contentSource=h.player.src())}),h.player.ima.addEventListener(google.ima.AdEvent.Type.LOG,function(t){if(t=t.getAdData(),t.adError)switch(g("InvalidAd","Non-fatal error occurred: "+t.adError.getMessage()),e){case"preroll":h.player.trigger("nopreroll"),e="postroll";break;case"postroll":h.player.trigger("nopostroll"),e="nopostroll"}}),h.player.one("contentended",function(){y({emmethod:"contentended"}),g("ContentEnded"),l.postAd||S()})})}catch(t){t.message==a.AD_BLOCKED?(h.player.trigger("nopreroll"),h.player.trigger("nopostroll"),m(a.AD_BLOCKED,"Ad Blocked by AdBlocker plugins or Google ima not loaded"),y({emmethod:"adblocked"})):console.log(t.name+": "+t.message)}},C=function(t){if(!h.player)return this;h.plugins||(h.plugins={});var e=p();for(var r in e)if(r in h.player){if(h.plugins[r]=n.extend({},e[r],t[r]),"ima"==r){k(h.plugins[r]);continue}"function"==typeof h.player[r]&&h.player[r](h.plugins[r])}return this},A=function(t){switch(y({emmethod:"play",playerid:h.player.id()}),v){case a.ENDED:h.playsCounter=0,m(a.REPLAYS,"Clicked on replay button");break;case a.ADS_READY:case a.AD_STARTED:c||m(a.ADS_CRITICAL,"Something error in desktop version media after AdReady or AdStarted and Ad not playing")}g(a.PLAYS,"The media plays"),h.playsCounter++,1===h.playsCounter&&b()},O=function(t){y({emmethod:"paused"}),g(a.PAUSED,"The element has been paused. Fired after the pause() method has returned.")},R=function(t){y({emmethod:"ended"}),m(a.ENDED,"Playback has stopped because the end of the media resource was reached.")},L=function(t){y({emmethod:"adstart"}),h.player.ima.getAdsManager().setVolume(1)},P=function(t){y({emmethod:"adend"}),m(a.AD_ENDED,"The player has returned from linear ad playback mode. Note that multiple ads may have played back between adstart and adend."),1===h.playsCounter&&y({emmethod:"videostart"})},D=function(t){m(a.AD_SKIP,"The player is skipping a linear ad opportunity and content-playback should resume immediately.")},x=function(t){y({emmethod:"adserror"}),m(a.ADS_ERROR,"Trigger this event to indicate that an error in the ad integration has ocurred and any ad states should abort so that content can resume."),S(h.player)},I=function(){h.player.on("play",A),h.player.on("pause",O),h.player.on("ended",R),h.player.on("adstart",L),h.player.on("adend",P),h.player.on("adskip",D),h.player.on("adserror",x),h.player.on("adplaying",g.bind(this,"AdPlaying","Trigger this event when an ads starts playing. If your integration triggers playing event when an ad begins, it will automatically be redispatched as adplaying.")),h.player.on("ads-ad-started",g.bind(this,"AdsAdStarted","Trigger this when each individual ad begins.")),h.player.on("contentresumed",g.bind(this,"ContentResumed",' If your integration does not result in a "playing" event when resuming content after an ad, send this event to signal that content can resume. This was added to support stitched ads and is not normally necessary.')),h.player.on("error",g.bind(this,"Error","An error occurs while fetching the media data.")),h.player.on("loadeddata",g.bind(this,"LoadedData","The user agent can render the media data at the current playback position for the first time.")),h.player.on("loadedmetadata",g.bind(this,"LoadedMetaData","The user agent has just determined the duration and dimensions of the media resource and the text tracks are ready.")),h.player.on("canplay",g.bind(this,"CanPlay","The user agent can resume playback of the media data, but estimates that if playback were to be started now, the media resource could not be rendered at the current playback rate up to its end without having to stop for further buffering of content.")),h.player.on("canplaythrough",g.bind(this,"CanPlayThrough","\tThe user agent estimates that if playback were to be started now, the media resource could be rendered at the current playback rate all the way to its end without having to stop for further buffering.")),h.player.on("playing",g.bind(this,"Playing","Playback is ready to start after having been paused or delayed due to lack of media data."))},M=function(e,r){var i=f(),o=n.extend({},i,e);c&&(o.autoplay=!1),o.autoplay&&(o.muted=!0),h.playsCounter=0,h.plugins=null,h.player=t(u,o,r),h.element=u.parentElement||document.querySelector("#"+h.player.id()),C(l.plugins),I()};return r.addEventListener("message",function(t){var e=t.data;if(e&&"string"==typeof e&&"undefined"!=e&&!(e.indexOf("ima://")>-1)){var r=e.split("|");if("em"==r[0])switch(l.debug&&console.log("Post Message: ",e),e=JSON.parse(r[1]),e.emmethod){case"pause":if("script"==r[2])switch(v){case a.ADS_READY:case a.AD_STARTED:break;default:h.player.pause()}break;case"play":if("media"==r[2])e.playerid!=h.player.id()&&(h.player.pause(),h.player.currentTime(0),h.playsCounter=0);else switch(v){case a.ADS_READY:case a.AD_STARTED:break;default:h.player.play()}}}},!1),M(l.setup),{createPlayer:M,option:h,playsAPICall:b,initAds:E,removeAds:S}};r.bMedia=s||{}}(videojs,emUtils,window),/**
 * b-media-xtend
 * @version 0.1.0
 * @copyright 2018 blogg.no
 * @license (MIT OR Apache-2.0)
 */
function(t,e,r){"use strict";var n=e.mediaLang,i=e.helpers,o=function(t,e){if(t.option.player){var o={nexMediaUrl:"",listLength:0,currentMediaIndex:0},a=0,s=function(t,e){var r=i.createElement("a",{title:e,href:"javascript:void(0)",class:"media-icon"});r.addEventListener("click",function(e){e.stopPropagation(),i.$(document).find(t+".drawer").removeClass("open")}),r.innerHTML="&times;";var n=i.createElement("div",{class:"media-close text-muted"});n.appendChild(r),i.$(document).find(t).prepend(n).on("click",function(t){t.stopPropagation()})},l=function(){var t=document.querySelector("#shareBtn");t&&(t.style.display="inline-block",s(".media-share",n("CLOSE_SHARE")),i.$(document).find("#inputEmbedScript, #inputEmbedIframe").on("focus",function(){var t=this;t.previousElementSibling.style.display="none",r.setTimeout(function(){t.setSelectionRange(0,t.value.length)})}).on("blur",function(){this.previousElementSibling.removeAttribute("style")}))},u=function(e){i.$(e).find(".media-title a, .media-playlist__header__title a").on("click",function(e){e.stopPropagation(),t.option.player.pause()})},c=function(){var e=t.option.element.nextElementSibling;e&&(t.option.element.appendChild(e),u(e))},d=function(){var e=i.$(document);e.find("[data-embutton]").on("click",function(r){switch(r.stopPropagation(),this.id){case"downloadBtn":return t.playsAPICall(),!0;default:var n=e.find(".drawer[data-btnid="+this.id+"]");this.id&&n.elements.length>0&&(n.addClass("open"),t.option.player.pause())}return!1})},h=function(){t.option.element.parentElement&&(i.$(t.option.element.parentElement).find(".media-share .buttons a").on("click",function(t){return t.stopPropagation(),!!this.classList.contains("email")||(i.openWindow(this.href,this.class,{width:500,height:400}),!1)}),l())},f=function(e){for(var n=0;n<e.length;n++)if(r.location.href.indexOf(e[n].href)>-1){var a=e[n].parentElement;a.classList.add("currently-playing"),o.currentMediaIndex=n+1,a.parentElement.scrollTop=a.offsetTop-a.scrollHeight/2,n>0&&!i.detectmob()&&(t.initAds(),t.option.player.autoplay(!0));break}o.listLength=e.length,!o.currentMediaIndex&&e.length&&(o.currentMediaIndex=1,e[0].parentElement.classList.add("currently-playing")),o.currentMediaIndex<o.listLength&&(o.nexMediaUrl=e[o.currentMediaIndex].href)},p=function(){var t=document.querySelector(".media-playlist__header__info span");t.innerHTML=o.currentMediaIndex+"/"+o.listLength},y=function(){var t=document.querySelector("#playListBtn");t&&(t.style.display="inline-block",s(".media-playlist",n("CLOSE_PLAYLIST")))},v=function(){if(void 0!==typeof localStorage&&void 0!==localStorage.autoplayPlaylist){var t=JSON.parse(localStorage.autoplayPlaylist);return document.querySelector("#mediaAutoplay").checked=t,t}return document.querySelector("#mediaAutoplay").checked},g=function(){var t=document.querySelector("#mediaAutoplay");if(t)if(void 0!==typeof localStorage){var e=v();localStorage.setItem("autoplayPlaylist",e),t.addEventListener("change",function(){localStorage.setItem("autoplayPlaylist",t.checked)})}else console.log("Sorry! No Web Storage support..")},m=function(){var r=i.$(document).find(".media-playlist__tracks li .media-playlist__"+t.option.type).elements;r.length>0&&(f(r),"video"==t.option.type&&(e?y():g()),p())},b=function(t){if("string"==typeof t){var e=i.createElement("textarea",{style:{position:"absolute",left:"-9999px",top:"0"}});e.value=t,document.body.appendChild(e),e.focus(),e.setSelectionRange(0,e.value.length);try{var r=document.execCommand("copy"),n=r?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(t){console.log("Oops, unable to copy")}e.parentNode.removeChild(e)}},_=function(){r.clearTimeout(a);var t=document.querySelector("#circulerTimer");t&&(t.parentNode.removeChild(t),document.querySelector(".vjs-big-play-button").removeAttribute("style"))},T=function(){var e='<div id="circulerTimer" class="radial-timer s-animate"><div class="radial-timer-half"></div><div class="radial-timer-half"></div></div>',r=document.createElement("div");r.innerHTML=e,t.option.element.appendChild(r.children.circulerTimer);var n=document.querySelector(".vjs-big-play-button");n.style.zIndex=1112,n.style.backgroundColor="transparent"},E=function(){_()},w=function(){_();var n=3e3;if(o.nexMediaUrl){if(i.detectmob()||"video"==t.option.type&&!e&&!v())return;"video"==t.option.type&&(t.removeAds(),T()),a=r.setTimeout(function(){r.location.href=o.nexMediaUrl}.bind(this),n)}};"video"==t.option.type&&(e&&c(),t.option.player.contextmenuUI({content:[{label:n("COPY_SCRIPT"),listener:function(){b(document.querySelector("#inputEmbedScript").value)}},{label:n("COPY_EMBED"),listener:function(){b(document.querySelector("#inputEmbedIframe").value)}}]})),t.option.player.on("play",E),t.option.player.on("ended",w),e&&d(),e&&h(),m()}};r.bMediaXtend=o||{}}(videojs,emUtils,window);