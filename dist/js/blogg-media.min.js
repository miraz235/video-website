!function(e,t,i){"use strict";var a={plays:function(t,i){return e.getJSON("http://hits.blogsoft.org?callback=?",{id:i,vid:t})},track:function(t,i,a){return e.getJSON("http://hits.blogsoft.org/track?callback=?",{e:t,id:a,vid:i})}},n=function(n,r,o){var s="click";(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(s="touchend");var l={ADVERTISEMENT:{en:"Advertisement",no:"Annonse"}},d={ADS_READY:"adsReady",AD_STARTED:"adStarted",AD_ENDED:"adEnded",ADS_ERROR:"adsError",AD_BLOCKED:"adBlocked",AD_SKIP:"adCanceled",ADS_CRITICAL:"adsCriticalError",PLAYS:"plays",PAUSED:"paused",ENDED:"ended",REPLAYS:"replays"},u=JSON.parse("false"),c=[],p=[],f={type:n,id:0,bid:o||0,vid:r||0,player:null,plugins:null,src:"",playsCounter:0,index:-1},v="#embedMedia",y=0,g="no",h="",m=function(){var e={controls:!0,autoplay:!1,loop:!1,preload:"none",html5:{hlsjsConfig:{}},inactivityTimeout:500,controlBar:{fullscreenToggle:!0}};switch(f.type){case"audio":e.height=100,e.controlBar.fullscreenToggle=!1;break;default:e.controlBar.volumeMenuButton={inline:!1,vertical:!0}}return e},A=function(e){var t={watermark:{position:"bottom-right",url:"",image:"",fadeTime:null},ima:{id:e,showControlsForJSAds:!1,adLabel:l.ADVERTISEMENT[g],adTagUrl:"",prerollTimeout:5e3},replayButton:{}},i={},a={video:["watermark","ima","replayButton"],audio:["replayButton"]};for(var n in a[f.type]){var r=a[f.type][n];i[r]=t[r]}return i},D=function(){return u||"audio"==f.type||!f.vid?0:void a.plays(f.vid,f.bid).done(function(e){f.playsCounter++})},S=function(e){return e&&h!=e?(console.log("Track:",e),h=e,u||!f.vid?0:void a.track(e,f.vid,f.bid).done(function(t){console.log(e,t)})):0},E=function(t){var i={};return e.each(t.split("&"),function(e,t){var a=t.split("=");2==a.length&&(i[a[0].toString()]=a[1].toString())}),i},b=function(){c=[i.location.href],f.index=0;var e=E(document.location.search.substr(1));f.id="video"==f.type?e.v:e.id},T=function(e){e.ima.initializeAdDisplayContainer(),e.ima.requestAds(),e.play()},P=function(t){t.ima.getAdsManager()&&t.ima.getAdsManager().discardAdBreak(),t.ima.adContainerDiv&&t.ima.adContainerDiv.remove(),e("#"+t.id()).removeClass("vjs-ad-loading vjs-ad-playing")},C=function(e,t){for(var a in t)switch(a){case"ima":if(t.ima.adTagUrl)try{e.ima(t.ima),e.autoplay()?setTimeout(function(){T(e)}.bind(this),100):e.one(s,function(){T(e)}),e.one("adsready",function(){S(d.ADS_READY)}),e.one("contentended",function(){P(e)})}catch(e){i.google||S(d.AD_BLOCKED)}break;default:"function"==typeof e[a]&&e[a](t[a])}},k=function(e){var t=null,i=e.find("source");return i.length&&(t=i.attr("src")),t},_=function(){var t=e(v)[0];(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&t.hasAttribute("controls")&&t.removeAttribute("controls")},R=function(i,a,n){var r=m();v=i||v;var o=e.extend({},r,a),s=k(e(v));_();var l=function(){switch(f.type){case"video":u&&f.id&&(this.src([{type:"video/mp4",src:"resources/videos/"+f.id+".mp4"}]),this.poster("resources/videos/posters/"+f.id+".jpg"));break;case"audio":if(c.wavesurfer)break;u&&f.id?c.wavesurfer?c.wavesurfer.src="resources/audios/"+f.id+".mp3":this.src([{type:"audio/mp3",src:"resources/audios/"+f.id+".mp3"}]):s&&c.wavesurfer&&(c.wavesurfer.src=s)}n&&n(),C(this,e.extend({},c,f.plugins))},d=t(v,o,l),c=A(d.id());return d.on("play",B.bind(this)),d.on("pause",L.bind(this)),d.on("ended",x.bind(this)),d.on("adstart",I.bind(this)),d.on("adend",M.bind(this)),d.on("adskip",O.bind(this)),d.on("adserror",Y.bind(this)),f.player=d,d},N=function(){i.clearTimeout(y),e("#circulerTimer").remove()},w=function(){var t='<div id="circulerTimer" class="radial-timer s-animate"><div class="radial-timer-half"></div><div class="radial-timer-half"></div></div>';e(t).appendTo(v)},B=function(t){switch(N(),h){case d.ENDED:S(d.REPLAYS);break;case d.ADS_READY:case d.AD_STARTED:S(d.ADS_CRITICAL)}h=d.PLAYS,console.log("Track:",d.PLAYS);for(var i=0;i<p.length;i++)p[i].id()!=t.target.id&&(p[i].paused()||(p[i].pause(),p[i].currentTime(0),f.playsCounter=0));if(f.playsCounter++,1===f.playsCounter){var a=e("#"+t.target.id),n=a.attr("data-"+f.type+"-id");n&&(f.id=n,a.attr("data-"+f.type+"-id","")),f.id&&D()}},L=function(e){h&&S(d.PAUSED)},x=function(){S(d.ENDED);var e=3e3,t=c[f.index+1];t&&("video"==f.type&&Q()||"video"!=f.type)?(N(),w(),y=i.setTimeout(function(){i.location.href=t}.bind(this),e)):f.playsCounter=0},I=function(e){S(d.AD_STARTED)},M=function(e){S(d.AD_ENDED)},O=function(e){S(d.AD_SKIP)},Y=function(e){f.plugins.ima.error=!0,S(d.ADS_ERROR)},j=function(t,i,a){if(!t||!e(t).length)return console.log("No Player"),this;var n=R(t,i,a);return p.push(n),this},J=function(t,i,a){return"undefined"==typeof t||t&&e(t).length?p.length?(console.log("Already Initialize"),this):(b(),j(t,i,a),f.player=p[0],f.playsCounter=0,this):(console.log("Not found"),this)},K=function(t){if(!f.player||!t)return this;var i=A(f.player.id());f.plugins||(f.plugins=i);for(var a in t)a in f.player&&(f.plugins[a]=e.extend({},i[a],t[a]));return this},U=function(){return f.player},z=function(){return p.length},V=function(e){e.dispose()},W=function(e){!e&&f.player&&(e=f.player.id());for(var t=0;t<_totalPlayers();t++)"all"!=e&&e!=p[t].id()||V(p[t])},q=function(t){var a=[];return t.each(function(t){var n=E(this.href.split("?")[1]),r=e(this).parent();n&&(a[t]=this.href,i.location.href.indexOf(this.href)>-1&&(r.addClass("currently-playing"),f.index=t,t>0&&f.player.autoplay(!0),r.parent().animate({scrollTop:t*r.outerHeight()+1},500)))}),a},F=function(){var t=e(".media-playlist__header__info span");t.text(f.index+1+"/"+c.length)},H=function(e){void 0!==typeof localStorage?localStorage.setItem("autoplayPlaylist",e):console.log("Sorry! No Web Storage support..")},Q=function(){if(void 0!==typeof localStorage&&void 0!==localStorage.autoplayPlaylist){var t=JSON.parse(localStorage.autoplayPlaylist);return e("#mediaAutoplay").prop("checked",t),t}return console.log("Sorry! No Web Storage support.."),e("#mediaAutoplay").is(":checked")},G=function(){var t=Q();H(t),e("#mediaAutoplay").change(function(t){H(e(this).is(":checked"))})},X=function(t){if(f.player){var i=e(t);return i.length>0&&(c=q(i),F(),"video"==f.type&&G()),this}};return{createPlayer:R,setMediaPlayer:J,getMediaPlayer:U,setPlayList:X,setPlugins:K,addMediaPlayer:j,totalPlayers:z,removePlayer:W}};i.bloggMedia=n||{}}(jQuery,videojs,window);