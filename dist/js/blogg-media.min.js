!function(e,t,i){"use strict";var a={plays:function(t,i){return e.getJSON("http://hits.blogsoft.org?callback=?",{id:i,vid:t})},track:function(t,i,a){return e.getJSON("http://hits.blogsoft.org/track?callback=?",{e:t,id:a,vid:i})}},n=function(n,r,o){var s="click";(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(s="touchend");var l={ADVERTISEMENT:{en:"Advertisement",no:"Annonse"}},d={ADS_READY:"adsReady",AD_STARTED:"adStarted",AD_ENDED:"adEnded",ADS_ERROR:"adsError",AD_BLOCKED:"adBlocked",AD_SKIP:"adCanceled",ADS_CRITICAL:"adsCriticalError",PLAYS:"plays",PAUSED:"paused",ENDED:"ended",REPLAYS:"replays"},u=JSON.parse("false"),c=[],p=[],f={type:n,id:0,bid:o||0,vid:r||0,player:null,plugins:null,src:"",playsCounter:0,index:-1},v="#embedMedia",y=0,h="no",g="",m=function(){var e={controls:!0,autoplay:!1,loop:!1,preload:"none",html5:{hlsjsConfig:{}},inactivityTimeout:500,controlBar:{fullscreenToggle:!0}};switch(f.type){case"audio":e.height=100,e.controlBar.fullscreenToggle=!1;break;default:e.controlBar.volumeMenuButton={inline:!1,vertical:!0}}return e},A=function(e){var t={watermark:{position:"bottom-right",url:"",image:"",fadeTime:null},ima:{id:e,showControlsForJSAds:!1,adLabel:l.ADVERTISEMENT[h],adTagUrl:"",prerollTimeout:5e3},replayButton:{}},i={},a={video:["watermark","ima","replayButton"],audio:["replayButton"]};for(var n in a[f.type]){var r=a[f.type][n];i[r]=t[r]}return i},D=function(){return u||"audio"==f.type||!f.vid?0:void a.plays(f.vid,f.bid).done(function(e){f.playsCounter++})},S=function(e){console.log("Track:",e),g=e},E=function(e){return e&&g!=e?(S(e),u||!f.vid?0:void a.track(e,f.vid,f.bid).done(function(t){console.log(e,t)})):0},b=function(t){var i={};return e.each(t.split("&"),function(e,t){var a=t.split("=");2==a.length&&(i[a[0].toString()]=a[1].toString())}),i},T=function(){c=[i.location.href],f.index=0;var e=b(document.location.search.substr(1));f.id="video"==f.type?e.v:e.id},P=function(e){e.ima.initializeAdDisplayContainer(),e.ima.requestAds(),e.play()},C=function(t){t.ima.getAdsManager()&&t.ima.getAdsManager().discardAdBreak(),t.ima.adContainerDiv&&t.ima.adContainerDiv.remove(),e("#"+t.id()).removeClass("vjs-ad-loading vjs-ad-playing")},_=function(e,t){for(var a in t)switch(a){case"ima":if(t.ima.adTagUrl)try{e.ima(t.ima),e.autoplay()?setTimeout(function(){P(e)}.bind(this),100):e.one(s,function(){P(e)}),e.one("adsready",function(){E(d.ADS_READY)}),e.one("contentended",function(){C(e)})}catch(e){i.google||E(d.AD_BLOCKED)}break;default:"function"==typeof e[a]&&e[a](t[a])}},k=function(e){var t=null,i=e.find("source");return i.length&&(t=i.attr("src")),t},R=function(){var t=e(v)[0];(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&t.hasAttribute("controls")&&t.removeAttribute("controls")},N=function(i,a,n){var r=m();v=i||v;var o=e.extend({},r,a),s=k(e(v));R();var l=function(){switch(f.type){case"video":u&&f.id&&(this.src([{type:"video/mp4",src:"resources/videos/"+f.id+".mp4"}]),this.poster("resources/videos/posters/"+f.id+".jpg"));break;case"audio":if(c.wavesurfer)break;u&&f.id?c.wavesurfer?c.wavesurfer.src="resources/audios/"+f.id+".mp3":this.src([{type:"audio/mp3",src:"resources/audios/"+f.id+".mp3"}]):s&&c.wavesurfer&&(c.wavesurfer.src=s)}n&&n(),_(this,e.extend({},c,f.plugins))},d=t(v,o,l),c=A(d.id());return d.on("play",x.bind(this)),d.on("pause",I.bind(this)),d.on("ended",L.bind(this)),d.on("adstart",M.bind(this)),d.on("adend",O.bind(this)),d.on("adskip",Y.bind(this)),d.on("adserror",j.bind(this)),f.player=d,d},w=function(){i.clearTimeout(y),e("#circulerTimer").remove()},B=function(){var t='<div id="circulerTimer" class="radial-timer s-animate"><div class="radial-timer-half"></div><div class="radial-timer-half"></div></div>';e(t).appendTo(v)},x=function(t){switch(w(),g){case d.ENDED:E(d.REPLAYS);break;case d.ADS_READY:case d.AD_STARTED:E(d.ADS_CRITICAL)}S(d.PLAYS);for(var i=0;i<p.length;i++)p[i].id()!=t.target.id&&(p[i].paused()||(p[i].pause(),p[i].currentTime(0),f.playsCounter=0));if(f.playsCounter++,1===f.playsCounter){var a=e("#"+t.target.id),n=a.attr("data-"+f.type+"-id");n&&(f.id=n,a.attr("data-"+f.type+"-id","")),f.id&&D()}},I=function(e){S(d.PAUSED)},L=function(){E(d.ENDED);var e=3e3,t=c[f.index+1];t&&("video"==f.type&&G()||"video"!=f.type)?(w(),B(),y=i.setTimeout(function(){i.location.href=t}.bind(this),e)):f.playsCounter=0},M=function(e){E(d.AD_STARTED)},O=function(e){E(d.AD_ENDED)},Y=function(e){E(d.AD_SKIP)},j=function(e){f.plugins.ima.error=!0,E(d.ADS_ERROR)},J=function(t,i,a){if(!t||!e(t).length)return console.log("No Player"),this;var n=N(t,i,a);return p.push(n),this},K=function(t,i,a){return"undefined"==typeof t||t&&e(t).length?p.length?(console.log("Already Initialize"),this):(T(),J(t,i,a),f.player=p[0],f.playsCounter=0,this):(console.log("Not found"),this)},U=function(t){if(!f.player||!t)return this;var i=A(f.player.id());f.plugins||(f.plugins=i);for(var a in t)a in f.player&&(f.plugins[a]=e.extend({},i[a],t[a]));return this},z=function(){return f.player},V=function(){return p.length},W=function(e){e.dispose()},q=function(e){!e&&f.player&&(e=f.player.id());for(var t=0;t<_totalPlayers();t++)"all"!=e&&e!=p[t].id()||W(p[t])},F=function(t){var a=[];return t.each(function(t){var n=b(this.href.split("?")[1]),r=e(this).parent();n&&(a[t]=this.href,i.location.href.indexOf(this.href)>-1&&(r.addClass("currently-playing"),f.index=t,t>0&&f.player.autoplay(!0),r.parent().animate({scrollTop:t*r.outerHeight()+1},500)))}),a},H=function(){var t=e(".media-playlist__header__info span");t.text(f.index+1+"/"+c.length)},Q=function(e){void 0!==typeof localStorage?localStorage.setItem("autoplayPlaylist",e):console.log("Sorry! No Web Storage support..")},G=function(){if(void 0!==typeof localStorage&&void 0!==localStorage.autoplayPlaylist){var t=JSON.parse(localStorage.autoplayPlaylist);return e("#mediaAutoplay").prop("checked",t),t}return console.log("Sorry! No Web Storage support.."),e("#mediaAutoplay").is(":checked")},X=function(){var t=G();Q(t),e("#mediaAutoplay").change(function(t){Q(e(this).is(":checked"))})},Z=function(t){if(f.player){var i=e(t);return i.length>0&&(c=F(i),H(),"video"==f.type&&X()),this}};return{createPlayer:N,setMediaPlayer:K,getMediaPlayer:z,setPlayList:Z,setPlugins:U,addMediaPlayer:J,totalPlayers:V,removePlayer:q}};i.bloggMedia=n||{}}(jQuery,videojs,window);