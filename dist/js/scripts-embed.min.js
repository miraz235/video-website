!function(e,i){"use strict";i.options.flash.swf="http://static.blogg.no/video/vendors/video.js/video-js.swf";var t=function(t){var a=JSON.parse("false"),o=[],n={type:t,id:0,settings:{},player:null,src:"",playsCounter:0,index:0},r={watermark:{url:"http://blogg.no",image:"http://static.blogg.no/blogs/image/NA_negativ_small.png",fadeTime:1e3},wavesurfer:{msDisplayMax:10,debug:a,waveColor:"grey",progressColor:"#0092f5",cursorColor:"white",hideScrollbar:!0}},s=function(i,t,o){return a?0:void e.getJSON("http://blogsoft.local/index.bd?fa=public.updateMediaInfo&callback=?",{blogId:i,mediaId:t,mediaType:o}).done(function(e){console.log(e)})},l=function(i){var t={};return e.each(i.split("&"),function(e,i){var a=i.split("=");2==a.length&&(t[a[0].toString()]=a[1].toString())}),t},d=function(){if(o=[],o.push(window.location.href),a){var e=l(document.location.search.substr(1));n.id="video"==n.type?e.v:e.id}else n.id=getEmbedVideoId()},c=function(){var e={controls:!0,autoplay:!1,loop:!1,preload:"none",controlBar:{fullscreenToggle:!0}};switch(n.type){case"audio":e.height=100,e.controlBar.fullscreenToggle=!1}return e},p=function(t,a,o){var n=i(t,a,o);return n.on("play",e.proxy(f,this)),n.on("ended",e.proxy(y,this)),n},u=function(i,t){if(!i||!e("#"+i).length)return console.log("Not found"),this;d();var o=c();n.settings=e.extend({},o,t);var s=function(){switch(n.type){case"video":a&&n.id&&(this.src([{type:"video/mp4",src:"resources/videos/"+n.id+".mp4"}]),this.poster("resources/videos/posters/"+n.id+".jpg")),this.watermark(r.watermark);break;case"audio":a&&n.id&&this.src([{type:"audio/mp3",src:"resources/audios/"+n.id+".mp3"}]),r.wavesurfer.src=this.src(),this.wavesurfer(r.wavesurfer)}};return n.player=p(i,n.settings,s),n.playsCounter=0,this},f=function(e){n.playsCounter++,1===n.playsCounter&&s("",n.id,n.type)},y=function(){var e=1500,i=o[n.index+1];i&&setTimeout(function(){window.location.href=i},e)},h=function(i){var t=[];return i.each(function(i){var a=l(this.href.split("?")[1]),o=e(this).parent();a&&(t[i]=this.href,window.location.href.indexOf(this.href)>-1&&(o.addClass("currently-playing"),n.index=i,i>0&&n.player.autoplay(!0),o.parent().animate({scrollTop:i*o.outerHeight()+1},500)))}),t},g=function(){var i=e(".media-playlist__header__info span");i.text(n.index+1+"/"+o.length)},v=function(){var i=e("<a>",{title:"Open",href:"#",class:"media-playlist__icon",click:function(i){return i.stopPropagation(),e(".media-playlist").toggleClass("open"),!1}}),t=i.clone(!0,!0);i.html('<span class="vjs-icon-chapters"></span>').wrap('<div class="drawer-handle text-nowrap"></div>').parent().append('<span class="media-playlist__header__info"><span></span> videos</span>').prependTo(".media-playlist"),t.attr("title","Close").html("&times;").wrap('<div class="pull-right text-center text-muted"></div>').parent().prependTo(".media-playlist__header"),e(".media-playlist").on("click",function(e){e.stopPropagation()}),i.on("click",function(){e("body").on("click",function(){e(".drawer").toggleClass("open"),e(this).off("click")})}),t.on("click",function(){e("body").off("click")})},m=function(i){if(n.player){var t=e(i);t.length>0&&(o=h(t),"video"==n.type&&v(),g())}};return{createPlayer:p,setMediaPlayer:u,setPlayList:m}};window.embedMedia=t||{},e(function(){var e=(t("video").setMediaPlayer("videoSingle"),t("video").setMediaPlayer("videoMediaPlayer").setPlayList(".media-playlist__tracks li .media-playlist__video"),t("audio"));e.setMediaPlayer("audioSingle");t("audio").setMediaPlayer("audioMediaPlayer").setPlayList(".media-playlist__tracks li .media-playlist__audio")})}(jQuery,videojs);