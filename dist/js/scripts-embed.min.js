!function(t,e){"use strict";e.options.flash.swf="http://static.blogg.no/video/vendors/video.js/video-js.swf";var i=JSON.parse("false"),s=function(e){var i={};return t.each(e.split("&"),function(t,e){var s=e.split("=");2==s.length&&(i[s[0].toString()]=s[1].toString())}),i},a={watermark:{url:"http://blogg.no",image:"http://static.blogg.no/blogs/image/NA_negativ_small.png",fadeTime:1e3}},n={init:function(e){e&&t("#"+e).length&&(this.vPlayerId=e,this.setVideoPlayer(),t(".media-playlist").remove())},setVideoPlayer:function(){var i=this,s={controls:!0,preload:"auto"};i.playsCounter=0;var n=e(i.vPlayerId,s);n.watermark(a.watermark),n.on("play",t.proxy(i.setVideoPlayEvent,i))},setVideoPlayEvent:function(t){this.playsCounter++,console.log("Plays "+this.playsCounter)}},o={init:function(e){e&&t("#"+e).length&&(this.vPlayerId=e,this.currentIndex=-1,this.videoList=[],this.setVideoList(),this.setMediaId(),this.setVideoNumber(),this.setVideoPlayer())},setMediaId:function(){if(i){var t=s(document.location.search.substr(1));this.mediaId=t.v,!this.mediaId&&this.videoList[0]&&window.location.replace(this.videoList[0])}},setPlaylistDrawer:function(){var e=t("<a>",{title:"Open",href:"#",class:"media-playlist__icon",click:function(e){return e.stopPropagation(),t(".media-playlist").toggleClass("open"),!1}}),i=e.clone(!0,!0);e.html('<span class="vjs-icon-chapters"></span>').wrap('<div class="playlist-drawyer text-nowrap"></div>').parent().append('<span class="media-playlist__header__info"><span></span> videos</span>').prependTo(".media-playlist"),i.attr("title","Close").html("&times;").wrap('<div class="pull-right text-center text-muted"></div>').parent().prependTo(".media-playlist__header"),t(".media-playlist").on("click",function(t){t.stopPropagation()}),e.on("click",function(){t("body").on("click",function(){t(".media-playlist").toggleClass("open"),t(this).off("click")})})},setVideoList:function(){var e=this,i=t(".media-playlist__tracks li .media-playlist__video");i.each(function(i){var a=s(this.href.split("?")[1]),n=t(this).parent();if(a){a.v;e.videoList[i]=this.href,window.location.href.indexOf(this.href)>-1&&(n.addClass("currently-playing"),e.currentIndex=i,n.parent().animate({scrollTop:i*n.outerHeight()+1},500))}}),e.setPlaylistDrawer()},setVideoNumber:function(){var e=t(".media-playlist__header__info span");e.text(this.currentIndex+1+"/"+this.videoList.length)},setVideoPlayer:function(){var s=this,n=!1;s.currentIndex>0&&(n=!0);var o=e(s.vPlayerId,{controls:!0,autoplay:n,preload:"none"},function(){i&&s.mediaId&&(this.src([{type:"video/mp4",src:"resources/videos/"+s.mediaId+".mp4"}]),this.poster("resources/videos/posters/"+s.mediaId+".jpg"))});o.watermark(a.watermark),s.playsCounter=0,o.on("ended",t.proxy(s.setVideoEndEvent,s)),o.on("play",t.proxy(s.setVideoPlayEvent,s))},setVideoPlayEvent:function(t){this.playsCounter++,console.log("Plays "+this.playsCounter)},setVideoEndEvent:function(t){var e=this.videoList[this.currentIndex+1];e&&setTimeout(function(){window.location.href=e},1500)}};t(function(){n.init("videoSingle"),o.init("videoMediaPlayer")})}(jQuery,videojs);