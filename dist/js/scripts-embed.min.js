!function(e,t,i){"use strict";t.options.flash.swf="http://static.blogg.no/video/vendors/video.js/video-js.swf";var o=function(o){var n=JSON.parse("false"),a=[],r={type:o,id:0,settings:{},player:null,src:"",playsCounter:0,index:0},s={watermark:{url:"http://blogg.no",image:"http://static.blogg.no/blogs/image/NA_negativ_small.png",fadeTime:1e3},wavesurfer:{msDisplayMax:10,debug:n,waveColor:"grey",progressColor:"#0092f5",cursorColor:"white",hideScrollbar:!0}},l=function(t,i,o){return n?0:void e.getJSON("http://blogsoft.local/index.bd?fa=public.updateMediaInfo&callback=?",{blogId:t,mediaId:i,mediaType:o}).done(function(e){console.log(e)})},c=function(t){var i={};return e.each(t.split("&"),function(e,t){var o=t.split("=");2==o.length&&(i[o[0].toString()]=o[1].toString())}),i},p=function(){if(a=[],a.push(i.location.href),n){var e=c(document.location.search.substr(1));r.id="video"==r.type?e.v:e.id}else r.id=getEmbedVideoId()},d=function(){var e={controls:!0,autoplay:!1,loop:!1,preload:"none",controlBar:{fullscreenToggle:!0}};switch(r.type){case"audio":e.height=100,e.controlBar.fullscreenToggle=!1}return e},u=function(i,o,n){var a=t(i,o,n);return a.on("play",e.proxy(h,this)),a.on("ended",e.proxy(g,this)),a},f=function(t,i){if(!t||!e("#"+t).length)return console.log("Not found"),this;p();var o=d();r.settings=e.extend({},o,i);var a=function(){switch(r.type){case"video":n&&r.id&&(this.src([{type:"video/mp4",src:"resources/videos/"+r.id+".mp4"}]),this.poster("resources/videos/posters/"+r.id+".jpg")),this.watermark(s.watermark);break;case"audio":n&&r.id&&this.src([{type:"audio/mp3",src:"resources/audios/"+r.id+".mp3"}]),s.wavesurfer.src=this.src(),this.wavesurfer(s.wavesurfer)}};return r.player=u(t,r.settings,a),r.playsCounter=0,this},h=function(e){r.playsCounter++,1===r.playsCounter&&l("",r.id,r.type)},g=function(){var e=1500,t=a[r.index+1];t&&setTimeout(function(){i.location.href=t},e)},v=function(t){var o=[];return t.each(function(t){var n=c(this.href.split("?")[1]),a=e(this).parent();n&&(o[t]=this.href,i.location.href.indexOf(this.href)>-1&&(a.addClass("currently-playing"),r.index=t,t>0&&r.player.autoplay(!0),a.parent().animate({scrollTop:t*a.outerHeight()+1},500)))}),o},y=function(){var t=e(".media-playlist__header__info span");t.text(r.index+1+"/"+a.length)},m=function(){var t=e("<a>",{title:"Open",href:"#",class:"media-playlist__icon",click:function(t){return t.stopPropagation(),e(".media-playlist").toggleClass("open"),!1}}),i=t.clone(!0,!0);t.html('<span class="vjs-icon-chapters"></span>').wrap('<div class="drawer-handle text-nowrap"></div>').parent().append('<span class="media-playlist__header__info"><span></span> videos</span>').prependTo(".media-playlist"),i.attr("title","Close").html("&times;").wrap('<div class="pull-right text-center text-muted"></div>').parent().prependTo(".media-playlist__header"),e(".media-playlist").on("click",function(e){e.stopPropagation()}),t.on("click",function(){e("body").on("click",function(){e(".drawer").toggleClass("open"),e(this).off("click")})}),i.on("click",function(){e("body").off("click")})},w=function(t){if(r.player){var i=e(t);i.length>0&&(a=v(i),"video"==r.type&&m(),y())}};return{createPlayer:u,setMediaPlayer:f,setPlayList:w}};i.embedMedia=o||{}}(jQuery,videojs,window);