!function(t,e){"use strict";e.options.flash.swf="http://static.blogg.no/video/vendors/video.js/video-js.swf";var i=JSON.parse("false"),o=function(e,o,a){return i?0:void t.ajax({method:"GET",url:"http://blogsoft.local/index.bd?fa=public.updateMediaInfo",data:{blogId:e,mediaId:o,mediaType:a}}).done(function(t){console.log(t)})},a=function(e){var i={};return t.each(e.split("&"),function(t,e){var o=e.split("=");2==o.length&&(i[o[0].toString()]=o[1].toString())}),i},s={watermark:{url:"http://blogg.no",image:"http://static.blogg.no/blogs/image/NA_negativ_small.png",fadeTime:1e3},wavesurfer:{src:null,msDisplayMax:10,debug:!0,waveColor:"grey",progressColor:"#0092f5",cursorColor:"white",hideScrollbar:!1}},n={init:function(e){e&&t("#"+e).length&&(this.vPlayerId=e,this.setVideoPlayer())},setVideoPlayer:function(){var i=this,o=e(i.vPlayerId,{controls:!0,autoplay:!0,preload:"auto"});i.playsCounter=0,o.watermark(s.watermark),o.on("play",t.proxy(i.setVideoPlayEvent,i))},setVideoPlayEvent:function(t){this.playsCounter++,console.log("Plays "+this.playsCounter),1===this.playsCounter&&o("","","video")}},r={init:function(e){e&&t("#"+e).length&&(this.vPlayerId=e,this.currentIndex=-1,this.videoList=[],this.setVideoList(),this.setMediaId(),this.setVideoNumber(),this.setAutoChange(),this.setVideoPlayer())},setMediaId:function(){var t=a(document.location.search.substr(1));this.mediaId=t.v,!this.mediaId&&this.videoList[0]&&window.location.replace(this.videoList[0])},setVideoList:function(){var e=this,i=t(".media-playlist__tracks li .media-playlist__video");i.each(function(i){var o=a(this.href.split("?")[1]),s=t(this).parent();if(o){o.v;e.videoList[i]=this.href,window.location.href.indexOf(this.href)>-1&&(s.addClass("currently-playing"),e.currentIndex=i,s.parent().animate({scrollTop:i*s.outerHeight()+1},500))}})},setVideoNumber:function(){var e=t(".media-playlist__header__info span");e.text(this.currentIndex+1+"/"+this.videoList.length)},setAutoChangePlayList:function(t){void 0!==typeof localStorage?localStorage.setItem("autoplayPlaylist",t):console.log("Sorry! No Web Storage support..")},getAutoChangePlayList:function(){if(void 0!==typeof localStorage&&void 0!==localStorage.autoplayPlaylist){var e=JSON.parse(localStorage.autoplayPlaylist);return t("#mediaAutoplay").prop("checked",e),e}return console.log("Sorry! No Web Storage support.."),t("#mediaAutoplay").is(":checked")},setAutoChange:function(){var e=this,i=e.getAutoChangePlayList();e.setAutoChangePlayList(i),t("#mediaAutoplay").change(function(i){e.setAutoChangePlayList(t(this).is(":checked"))})},setVideoPlayer:function(){var o=this,a=e(o.vPlayerId,{controls:!0,autoplay:!0,preload:"none"},function(){i&&o.mediaId&&(this.src([{type:"video/mp4",src:"resources/videos/"+o.mediaId+".mp4"}]),this.poster("resources/videos/posters/"+o.mediaId+".jpg"))});o.playsCounter=0,a.watermark(s.watermark),a.on("play",t.proxy(o.setVideoPlayEvent,o)),a.on("ended",t.proxy(o.setVideoEndEvent,o))},setVideoPlayEvent:function(t){var e=this;e.playsCounter++,console.log("Plays "+e.playsCounter),1===e.playsCounter&&o("",e.mediaId,"video")},setVideoEndEvent:function(t){var e=this.videoList[this.currentIndex+1];e&&this.getAutoChangePlayList()&&setTimeout(function(){window.location.href=e+"#content"},1500)}},l={init:function(){var i=t("audio.js-media-audio"),a=this,n={controls:!0,autoplay:!1,loop:!1,height:100,plugins:{wavesurfer:s.wavesurfer}};a.audios=[],i.each(function(i){this.pause();var s=null,r=t(this).find("source");r.length&&(s=r.attr("src"),r.remove()),this.load(),n.plugins.wavesurfer.src=s,a.playsCounter=0,a.audios[i]=e(this,n),a.audios[i].on("play",function(e){for(var i=0;i<a.audios.length;i++)if(a.audios[i].id()!=e.target.id){var s=!a.audios[i].paused();s&&(a.audios[i].pause(),a.audios[i].currentTime(0),a.playsCounter=0)}if(a.playsCounter++,1===a.playsCounter){var n=t(this.el()).attr("data-audio-id");n&&(o("",n,"audio"),t(this.el()).attr("data-audio-id",""))}})})}};t(document).ready(function(){n.init("videoSingle"),r.init("videoMediaPlayer"),l.init()})}(jQuery,videojs);