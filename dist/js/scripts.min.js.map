{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["videojs.options.flash.swf = \"../vendors/video.js/video-js.swf\";\r\n(function($) {\r\n    'use strict';\r\n    var getUrlQueries = function(queryStr) {\r\n        var out = {};\r\n        $.each(queryStr.split('&'), function(key, value) {\r\n            var i = value.split('=');\r\n            if (i.length == 2)\r\n                out[i[0].toString()] = i[1].toString();\r\n        });\r\n        return out;\r\n    };\r\n\r\n    var videoPlayList = {\r\n        init: function(vPlayerId) {\r\n            if (!(vPlayerId && $(\"#\" + vPlayerId).length))\r\n                return;\r\n            this.vPlayerId = vPlayerId;\r\n            this.currentIndex = -1;\r\n            this.videoList = [];\r\n            this.setVideoList();\r\n            this.setMediaId();\r\n\r\n            this.setVideoPlayer();\r\n        },\r\n        setMediaId: function() {\r\n            var queries = getUrlQueries(document.location.search.substr(1));\r\n            this.mediaId = queries.watch;\r\n            if (!this.mediaId && this.videoList[0])\r\n                window.location.replace(this.videoList[0]);\r\n        },\r\n        setVideoList: function() {\r\n            var self = this;\r\n            var $tracksDom = $('.media-playlist__tracks li .media-playlist__video');\r\n            $tracksDom.each(function(index) {\r\n                var urldata = getUrlQueries(this.href.split('?')[1]);\r\n                var $li = $(this).parent();\r\n                if (urldata) {\r\n                    var trackId = urldata.watch;\r\n                    self.videoList[index] = this.href;\r\n                    if (window.location.href.indexOf(this.href) > -1) {\r\n                        $li.addClass(\"currently-playing\");\r\n                        self.currentIndex = index;\r\n                        $li.parent().animate({\r\n                            scrollTop: index * $li.outerHeight() + 1\r\n                        }, 500);\r\n                    } else if (self.currentIndex > -1)\r\n                        return false;\r\n                }\r\n            });\r\n        },\r\n        setVideoPlayer: function() {\r\n            var self = this;\r\n            var if_autoplay = true;\r\n            var vplayer = videojs(self.vPlayerId, { controls: true, autoplay: if_autoplay, preload: \"none\" }, function() {\r\n                if (self.mediaId) {\r\n                    this.src([{ type: \"video/mp4\", src: \"resources/videos/\" + self.mediaId + \".mp4\" }]);\r\n                    this.poster('resources/videos/posters/' + self.mediaId + '.jpg');\r\n                }\r\n            });\r\n            vplayer.on('ended', $.proxy(this.setVideoEndEvent, this));\r\n        },\r\n        setVideoEndEvent: function(e) {\r\n            var nextVideo = this.videoList[this.currentIndex + 1];\r\n            if (nextVideo) {\r\n                setTimeout(function() {\r\n                    window.location.href = nextVideo;\r\n                }, 1500)\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    var audioPlayers = {\r\n        init: function() {\r\n            var $audios = $(\"audio.js-media-audio\");\r\n            var self = this;\r\n            var audioOption = {\r\n                controls: true,\r\n                autoplay: false,\r\n                loop: false,\r\n                height: 100,\r\n                plugins: {\r\n                    wavesurfer: {\r\n                        src: null,\r\n                        msDisplayMax: 10,\r\n                        debug: true,\r\n                        waveColor: 'grey',\r\n                        progressColor: '#0092f5',\r\n                        cursorColor: 'white',\r\n                        hideScrollbar: false\r\n                    }\r\n                }\r\n            };\r\n            self.audios = [];\r\n            $audios.each(function(index) {\r\n                this.pause();\r\n                var src = null;\r\n                var source = $(this).find(\"source\");\r\n                if (source.length) {\r\n                    src = source.attr(\"src\");\r\n                    source.remove();\r\n                }\r\n                this.load();\r\n                audioOption.plugins.wavesurfer.src = src;\r\n                self.audios[index] = videojs(this, audioOption);\r\n            });\r\n\r\n        }\r\n    };\r\n\r\n    $(document).ready(function() {\r\n        videoPlayList.init(\"videoMediaPlayer\");\r\n        audioPlayers.init();\r\n    });\r\n\r\n})(jQuery);"],"file":"scripts.min.js","sourceRoot":"/source/"}