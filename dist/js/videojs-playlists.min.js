function playList(e,t){var i=this;i.pl=i.pl||{};var o=parseInt(e,10);return i.pl._guessVideoType=function(e){var t={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"},i=e.split(".").pop();return t[i]||""},i.pl.init=function(e,t){t=t||{},i.pl.videos=[],i.pl.current=0,i.on("ended",i.pl._videoEnd),t.getVideoSource&&(i.pl.getVideoSource=t.getVideoSource),i.pl._addVideos(e)},i.pl._updatePoster=function(e){i.poster(e),i.removeChild(i.posterImage),i.posterImage=i.addChild("posterImage")},i.pl._addVideos=function(e){for(var t=0,o=e.length;t<o;t++){for(var s=[],l=0,n=e[t].src.length;l<n;l++)s.push({type:i.pl._guessVideoType(e[t].src[l]),src:e[t].src[l]});e[t].src=s,i.pl.videos.push(e[t])}},i.pl._nextPrev=function(e){var t,o;if("next"===e?(t=i.pl.videos.length-1,o=1):(t=0,o=-1),i.pl.current!==t){var s=i.pl.current+o;i.pl._setVideo(s),i.trigger(e,[i.pl.videos[s]])}},i.pl._setVideo=function(e){e<i.pl.videos.length&&(i.pl.current=e,i.pl.currentVideo=i.pl.videos[e],i.paused()||i.pl._resumeVideo(),i.pl.getVideoSource?i.pl.getVideoSource(i.pl.videos[e],function(e,t){i.pl._setVideoSource(e,t)}):i.pl._setVideoSource(i.pl.videos[e].src,i.pl.videos[e].poster))},i.pl._setVideoSource=function(e,t){i.src(e),i.pl._updatePoster(t)},i.pl._resumeVideo=function(){i.one("loadstart",function(){i.play()})},i.pl._videoEnd=function(){i.pl.current===i.pl.videos.length-1?i.trigger("lastVideoEnded"):(i.pl._resumeVideo(),i.next())},e instanceof Array?(i.pl.init(e,t),i.pl._setVideo(0),i):o===o?(i.pl._setVideo(o),i):"string"==typeof e&&"undefined"!=typeof i.pl[e]?(i.pl[e].apply(i),i):void 0}videojs.Player.prototype.next=function(){return this.pl._nextPrev("next"),this},videojs.Player.prototype.prev=function(){return this.pl._nextPrev("prev"),this},videojs.plugin("playList",playList),function(){var e=[{src:["http://demo.dealerpro.net/Images/Sites/577/videos/HondaHands.mp4"],poster:"",title:"Honda. The Power of Dreams."},{src:["http://1eb9cddbb30a65a675d4-91fe7d858d3e9c59dcdfd3e789416fbc.r56.cf1.rackcdn.com/Sites/577/commercial.mp4"],poster:"",title:"Thanks for Making Us #1"}],t={init:function(){this.els={},this.cacheElements(),this.initVideo(),this.createListOfVideos(),this.bindEvents(),this.overwriteConsole()},overwriteConsole:function(){console._log=console.log,console.log=this.log},log:function(e){t.els.log.append("<p>"+e+"</p>"),console._log(e)},cacheElements:function(){this.els.$playlist=$("div.playlist > ul"),this.els.$next=$("#next"),this.els.$prev=$("#prev"),this.els.log=$("div.panels > pre")},initVideo:function(){this.player=videojs("video"),this.player.playList(e)},createListOfVideos:function(){for(var t="",i=0,o=this.player.pl.videos.length;i<o;i++)t+='<li data-videoplaylist="'+i+'"><span class="number">'+(i+1)+'</span><span class="poster"><img src="'+e[i].poster+'"></span><span class="title">'+e[i].title+"</span></li>";this.els.$playlist.empty().html(t),this.updateActiveVideo()},updateActiveVideo:function(){var e=this.player.pl.current;this.els.$playlist.find("li").removeClass("active"),this.els.$playlist.find('li[data-videoplaylist="'+e+'"]').addClass("active")},bindEvents:function(){var e=this;this.els.$playlist.find("li").on("click",$.proxy(this.selectVideo,this)),this.els.$next.on("click",$.proxy(this.nextOrPrev,this)),this.els.$prev.on("click",$.proxy(this.nextOrPrev,this)),this.player.on("next",function(t){console.log("Next video"),e.updateActiveVideo.apply(e)}),this.player.on("prev",function(t){console.log("Previous video"),e.updateActiveVideo.apply(e)}),this.player.on("lastVideoEnded",function(e){console.log("Last video has finished")})},nextOrPrev:function(e){var t=$(e.target);this.player[t.attr("id")]()},selectVideo:function(e){var t="LI"===e.target.nodeName?$(e.target):$(e.target).closest("li");if(!t.hasClass("active")){console.log("Selecting video");var i=t.data("videoplaylist");this.player.playList(i),this.updateActiveVideo()}}};t.init()}(jQuery);
//# sourceMappingURL=videojs-playlists.min.js.map
